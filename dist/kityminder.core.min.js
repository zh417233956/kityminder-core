/*!
 * ====================================================
 * Kity Minder Core - v1.4.51 - 2020-03-17
 * https://github.com/fex-team/kityminder-core
 * GitHub: https://github.com/fex-team/kityminder-core.git 
 * Copyright (c) 2020 Baidu FEX; Licensed BSD-3-Clause
 * ====================================================
 */

!function(){function a(a){b.r([c[a]])}var b={r:function(a){if(b[a].inited)return b[a].value;if("function"!=typeof b[a].value)return b[a].inited=!0,b[a].value;var c={exports:{}},d=b[a].value(null,c.exports,c);if(b[a].inited=!0,b[a].value=d,void 0!==d)return d;for(var e in c.exports)if(c.exports.hasOwnProperty(e))return b[a].inited=!0,b[a].value=c.exports,c.exports}};b[0]={value:function(a,c,d){var e=b.r(19),f=b.r(13),g=(new e.Marker).pipe(function(){var a=7,b=new e.Circle(a-1);this.addShape(b),this.setRef(a-1,0).setViewBox(-a,-a,a+a,a+a).setWidth(a).setHeight(a),this.dot=b,this.node.setAttribute("markerUnits","userSpaceOnUse")});f.register("arc",function(a,b,c,d,f){var h,i,j,k=a.getLayoutBox(),l=b.getLayoutBox(),m=Math.abs,n=[],o=k.x>l.x?"right":"left";a.getMinder().getPaper().addResource(g),h=new e.Point(l.cx,l.cy),i="left"==o?new e.Point(k.right+2,k.cy):new e.Point(k.left-2,k.cy),j=e.Vector.fromPoints(h,i),n.push("M",h),n.push("A",m(j.x),m(j.y),0,0,j.x*j.y>0?0:1,i),c.setMarker(g),g.dot.fill(f),c.setPathData(n)})}},b[1]={value:function(a,c,d){var e=b.r(19),f=b.r(13),g=(new e.Marker).pipe(function(){var a=7,b=new e.Circle(a-1);this.addShape(b),this.setRef(a-1,0).setViewBox(-a,-a,a+a,a+a).setWidth(a).setHeight(a),this.dot=b,this.node.setAttribute("markerUnits","userSpaceOnUse")});f.register("arc_tp",function(a,b,c,d,f){var h=a.getLayoutBox(),i=b.getLayoutBox(),j=a.getIndex(),k=b.getChildren()[j+1];a.getIndex()>0&&(i=b.getChildren()[j-1].getLayoutBox());var l,m,n=(Math.abs,[]);h.x,i.x;a.getMinder().getPaper().addResource(g),l=new e.Point(i.cx,i.cy),m=new e.Point(h.cx,h.cy);var o=Math.sqrt(Math.pow(l.x-m.x,2)+Math.pow(l.y-m.y,2));if(o=0==a.getIndex()?.4*o:o,e.Vector.fromPoints(l,m),n.push("M",l),n.push("A",o,o,0,0,1,m),c.setMarker(g),g.dot.fill(f),c.setPathData(n),k&&k.getConnection()){var p=k.getConnection(),q=k.getLayoutBox(),r=new e.Point(q.cx,q.cy),s=Math.sqrt(Math.pow(m.x-r.x,2)+Math.pow(m.y-r.y,2));n=[],n.push("M",m),n.push("A",s,s,0,0,1,r),p.setMarker(g),g.dot.fill(f),p.setPathData(n)}})}},b[2]={value:function(a,c,d){b.r(19);b.r(13).register("bezier",function(a,b,c){var d=b.getLayoutVertexOut(),e=a.getLayoutVertexIn(),f=b.getLayoutVectorOut().normalize(),g=Math.round,h=Math.abs,i=[];if(i.push("M",g(d.x),g(d.y)),h(f.x)>h(f.y)){var j=(e.x+d.x)/2;i.push("C",j,d.y,j,e.y,e.x,e.y)}else{var k=(e.y+d.y)/2;i.push("C",d.x,k,e.x,k,e.x,e.y)}c.setMarker(null),c.setPathData(i)})}},b[3]={value:function(a,c,d){b.r(19);b.r(13).register("fish-bone-master",function(a,b,c){var d=b.getLayoutVertexOut(),e=a.getLayoutVertexIn(),f=Math.abs,g=f(d.y-e.y),h=f(d.x-e.x),i=[];i.push("M",d.x,d.y),i.push("h",h-g),i.push("L",e.x,e.y),c.setMarker(null),c.setPathData(i)})}},b[4]={value:function(a,c,d){b.r(19);b.r(13).register("l",function(a,b,c){var d=b.getLayoutVertexOut(),e=a.getLayoutVertexIn(),f=b.getLayoutVectorOut(),g=[],h=Math.round,i=Math.abs;g.push("M",d.round()),i(f.x)>i(f.y)?g.push("H",h(e.x)):g.push("V",e.y),g.push("L",e),c.setPathData(g)})}},b[5]={value:function(a,b){var c=function(){"use strict";function a(b,c){var d,e;return typeof b!=typeof c||(d=Ja(b)?"obj":Array.isArray(b)?"array":"")!=(Ja(c)?"obj":Array.isArray(c)?"array":"")||("obj"===d?a(e=Object.keys(b).sort(),Object.keys(c).sort())||e.some(function(d){return a(b[d],c[d])}):"array"===d?b.length!==c.length||b.some(function(b,d){return a(b,c[d])}):b!==c)}function b(a){return a?Ja(a)?Object.keys(a).reduce(function(c,d){return c[d]=b(a[d]),c},{}):Array.isArray(a)?a.map(b):a:a}function c(a){function b(a){var b=1,c=Aa.exec(a);return c&&(b=parseFloat(c[1]),c[2]?b=0<=b&&b<=100?b/100:1:(b<0||1<b)&&(b=1)),b}var c,d,e,f=1,g=a=(a+"").trim();return(c=/^(rgba|hsla|hwb|gray|device\-cmyk)\s*\(([\s\S]+)\)$/i.exec(a))?(d=c[1].toLowerCase(),e=c[2].trim().split(/\s*,\s*/),"rgba"===d&&4===e.length?(f=b(e[3]),g="rgb("+e.slice(0,3).join(", ")+")"):"hsla"===d&&4===e.length?(f=b(e[3]),g="hsl("+e.slice(0,3).join(", ")+")"):"hwb"===d&&4===e.length?(f=b(e[3]),g="hwb("+e.slice(0,3).join(", ")+")"):"gray"===d&&2===e.length?(f=b(e[1]),g="gray("+e[0]+")"):"device-cmyk"===d&&5<=e.length&&(f=b(e[4]),g="device-cmyk("+e.slice(0,4).join(", ")+")")):(c=/^\#(?:([\da-f]{6})([\da-f]{2})|([\da-f]{3})([\da-f]))$/i.exec(a))?c[1]?(f=parseInt(c[2],16)/255,g="#"+c[1]):(f=parseInt(c[4]+c[4],16)/255,g="#"+c[3]):"transparent"===a.toLocaleLowerCase()&&(f=0),[f,g]}function d(a){return!(!a||a.nodeType!==Node.ELEMENT_NODE||"function"!=typeof a.getBoundingClientRect)}function e(a,b){var c,d,e,f,g={};if(!(e=a.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(a.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_DISCONNECTED)return console.error("A disconnected element was passed."),null;for(d in c=a.getBoundingClientRect())g[d]=c[d];if(!b){if(!(f=e.defaultView))return console.error("Cannot get window that contains the element."),null;g.left+=f.pageXOffset,g.right+=f.pageXOffset,g.top+=f.pageYOffset,g.bottom+=f.pageYOffset}return g}function f(a,b){var c,d,e=[],f=a;for(b=b||window;;){if(!(c=f.ownerDocument))return console.error("Cannot get document that contains the element."),null;if(!(d=c.defaultView))return console.error("Cannot get window that contains the element."),null;if(d===b)break;if(!(f=d.frameElement))return console.error("`baseWindow` was not found."),null;e.unshift(f)}return e}function g(a,b){var c,d,g=0,h=0;return(d=f(a,b=b||window))?d.length?(d.forEach(function(a,b){var c,d,f=e(a,0<b);g+=f.left,h+=f.top,d=(c=a).ownerDocument.defaultView.getComputedStyle(c,""),f={left:c.clientLeft+parseFloat(d.paddingLeft),top:c.clientTop+parseFloat(d.paddingTop)},g+=f.left,h+=f.top}),(c=e(a,!0)).left+=g,c.right+=g,c.top+=h,c.bottom+=h,c):e(a):null}function h(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)}function i(a,b,c){var d=b.x-a.x,e=b.y-a.y;return{x:a.x+d*c,y:a.y+e*c,angle:Math.atan2(e,d)/(Math.PI/180)}}function j(a,b,c){var d=Math.atan2(a.y-b.y,b.x-a.x);return{x:b.x+Math.cos(d)*c,y:b.y+Math.sin(d)*c*-1}}function k(a,b,c,d,e){var f=e*e,g=f*e,h=1-e,i=h*h,j=i*h,k=j*a.x+3*i*e*b.x+3*h*f*c.x+g*d.x,l=j*a.y+3*i*e*b.y+3*h*f*c.y+g*d.y,m=a.x+2*e*(b.x-a.x)+f*(c.x-2*b.x+a.x),n=a.y+2*e*(b.y-a.y)+f*(c.y-2*b.y+a.y),o=b.x+2*e*(c.x-b.x)+f*(d.x-2*c.x+b.x),p=b.y+2*e*(c.y-b.y)+f*(d.y-2*c.y+b.y),q=h*a.x+e*b.x,r=h*a.y+e*b.y,s=h*c.x+e*d.x,t=h*c.y+e*d.y,u=90-180*Math.atan2(m-o,n-p)/Math.PI;return{x:k,y:l,fromP2:{x:m,y:n},toP1:{x:o,y:p},fromP1:{x:q,y:r},toP2:{x:s,y:t},angle:u+=180<u?-180:180}}function l(a,b,c,d,e){function f(a,b,c,d,e){return a*(a*(-3*b+9*c-9*d+3*e)+6*b-12*c+6*d)-3*b+3*c}var g,h,i,j,k,l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],m=0;return g=(e=null==e||1<e?1:e<0?0:e)/2,[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816].forEach(function(e,n){i=f(h=g*e+g,a.x,b.x,c.x,d.x),j=f(h,a.y,b.y,c.y,d.y),k=i*i+j*j,m+=l[n]*Math.sqrt(k)}),g*m}function m(a,b,c,d,e){for(var f,g=.5,h=1-g;f=l(a,b,c,d,h),!(Math.abs(f-e)<=.01);)h+=(f<e?1:-1)*(g/=2);return h}function n(a,b){var c;return a.forEach(function(a){var d=b?a.map(function(a){var c={x:a.x,y:a.y};return b(c),c}):a;c||(c=[{type:"M",values:[d[0].x,d[0].y]}]),c.push(d.length?2===d.length?{type:"L",values:[d[1].x,d[1].y]}:{type:"C",values:[d[1].x,d[1].y,d[2].x,d[2].y,d[3].x,d[3].y]}:{type:"Z",values:[]})}),c}function o(a){var b=[],c=0;return a.forEach(function(a){var d=(2===a.length?h:l).apply(null,a);b.push(d),c+=d}),{segsLen:b,lenAll:c}}function p(a,b){return null==a||null==b||a.length!==b.length||a.some(function(a,c){var d=b[c];return a.type!==d.type||a.values.some(function(a,b){return a!==d.values[b]})})}function q(a,b,c){a.events[b]?a.events[b].indexOf(c)<0&&a.events[b].push(c):a.events[b]=[c]}function r(a,b,c){var d;a.events[b]&&-1<(d=a.events[b].indexOf(c))&&a.events[b].splice(d,1)}function s(a){Q&&clearTimeout(Q),Ra.push(a),Q=setTimeout(function(){Ra.forEach(function(a){a()}),Ra=[]},0)}function t(a,b){a.reflowTargets.indexOf(b)<0&&a.reflowTargets.push(b)}function u(a){a.reflowTargets.forEach(function(a){var b;b=a,setTimeout(function(){var a=b.parentNode,c=b.nextSibling;a.insertBefore(a.removeChild(b),c)},0)}),a.reflowTargets=[]}function v(a,b,c,d,e,f,g){var h,i,j;"auto-start-reverse"===c?("boolean"!=typeof R&&(b.setAttribute("orient","auto-start-reverse"),R=b.orientType.baseVal===SVGMarkerElement.SVG_MARKER_ORIENT_UNKNOWN),R?b.setAttribute("orient",c):((h=e.createSVGTransform()).setRotate(180,0,0),f.transform.baseVal.appendItem(h),b.setAttribute("orient","auto"),j=!0)):(b.setAttribute("orient",c),!1===R&&f.transform.baseVal.clear()),i=b.viewBox.baseVal,j?(i.x=-d.right,i.y=-d.bottom):(i.x=d.left,i.y=d.top),i.width=d.width,i.height=d.height,Da&&t(a,g)}function w(a,b){return{prop:a?"markerEnd":"markerStart",orient:b?b.noRotate?"0":a?"auto":"auto-start-reverse":null}}function x(a,b){Object.keys(b).forEach(function(c){var d=b[c];a[c]=null!=d.iniValue?d.hasSE?[d.iniValue,d.iniValue]:d.iniValue:d.hasSE?d.hasProps?[{},{}]:[]:d.hasProps?{}:null})}function y(a,b,c,d,e){return d!==b[c]&&(b[c]=d,e&&e.forEach(function(b){b(a,d,c)}),!0)}function z(a){function b(a,b){return a+parseFloat(b)}var c=a.document,d=a.getComputedStyle(c.documentElement,""),e=a.getComputedStyle(c.body,""),f={x:0,y:0};return"static"!==e.position?(f.x-=[d.marginLeft,d.borderLeftWidth,d.paddingLeft,e.marginLeft,e.borderLeftWidth].reduce(b,0),f.y-=[d.marginTop,d.borderTopWidth,d.paddingTop,e.marginTop,e.borderTopWidth].reduce(b,0)):"static"!==d.position&&(f.x-=[d.marginLeft,d.borderLeftWidth].reduce(b,0),f.y-=[d.marginTop,d.borderTopWidth].reduce(b,0)),f}function A(a){var b,c=a.document;c.getElementById(ia)||(b=(new a.DOMParser).parseFromString(ja,"image/svg+xml"),c.body.appendChild(b.documentElement),Ma(a))}function B(a){function c(a,b){var c=b===Y?{x:a.left+a.width/2,y:a.top}:b===Z?{x:a.right,y:a.top+a.height/2}:b===$?{x:a.left+a.width/2,y:a.bottom}:{x:a.left,y:a.top+a.height/2};return c.socketId=b,c}function d(a){return{x:a.x,y:a.y}}var e,f,j,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D=a.options,E=a.curStats,F=a.aplStats,G=E.position_socketXYSE,H=!1;if(E.position_path=D.path,E.position_lineStrokeWidth=E.line_strokeWidth,E.position_socketGravitySE=e=b(D.socketGravitySE),f=[0,1].map(function(b){var c,d,e,f=D.anchorSE[b],h=a.optionIsAttach.anchorSE[b],i=!1!==h?Ua[f._id]:null,j=!1!==h&&i.conf.getStrokeWidth?i.conf.getStrokeWidth(i,a):0,k=!1!==h&&i.conf.getBBoxNest?i.conf.getBBoxNest(i,a,j):g(f,a.baseWindow);return E.capsMaskAnchor_pathDataSE[b]=!1!==h&&i.conf.getPathData?i.conf.getPathData(i,a,j):(d=null!=(c=k).right?c.right:c.left+c.width,e=null!=c.bottom?c.bottom:c.top+c.height,[{type:"M",values:[c.left,c.top]},{type:"L",values:[d,c.top]},{type:"L",values:[d,e]},{type:"L",values:[c.left,e]},{type:"Z",values:[]}]),E.capsMaskAnchor_strokeWidthSE[b]=j,k}),q=-1,D.socketSE[0]&&D.socketSE[1]?(G[0]=c(f[0],D.socketSE[0]),G[1]=c(f[1],D.socketSE[1])):(D.socketSE[0]||D.socketSE[1]?(D.socketSE[0]?(o=0,p=1):(o=1,p=0),G[o]=c(f[o],D.socketSE[o]),(n=na.map(function(a){return c(f[p],a)})).forEach(function(a){var b=h(a,G[o]);(b<q||-1===q)&&(G[p]=a,q=b)})):(n=na.map(function(a){return c(f[1],a)}),na.map(function(a){return c(f[0],a)}).forEach(function(a){n.forEach(function(b){var c=h(a,b);(c<q||-1===q)&&(G[0]=a,G[1]=b,q=c)})})),[0,1].forEach(function(a){var b,c;D.socketSE[a]||(f[a].width||f[a].height?f[a].width||G[a].socketId!==_&&G[a].socketId!==Z?f[a].height||G[a].socketId!==Y&&G[a].socketId!==$||(G[a].socketId=0<=G[a?0:1].y-f[a].top?$:Y):G[a].socketId=0<=G[a?0:1].x-f[a].left?Z:_:(b=G[a?0:1].x-f[a].left,c=G[a?0:1].y-f[a].top,G[a].socketId=Math.abs(b)>=Math.abs(c)?0<=b?Z:_:0<=c?$:Y))})),E.position_path!==F.position_path||E.position_lineStrokeWidth!==F.position_lineStrokeWidth||[0,1].some(function(a){return E.position_plugOverheadSE[a]!==F.position_plugOverheadSE[a]||(f=G[a],g=F.position_socketXYSE[a],f.x!==g.x||f.y!==g.y||f.socketId!==g.socketId)||(b=e[a],c=F.position_socketGravitySE[a],(d=null==b?"auto":Array.isArray(b)?"array":"number")!=(null==c?"auto":Array.isArray(c)?"array":"number")||("array"===d?b[0]!==c[0]||b[1]!==c[1]:b!==c));var b,c,d,f,g})){switch(a.pathList.baseVal=j=[],a.pathList.animVal=null,E.position_path){case ba:j.push([d(G[0]),d(G[1])]);break;case ca:v="number"==typeof e[0]&&0<e[0]||"number"==typeof e[1]&&0<e[1],w=za*(v?-1:1),x=Math.atan2(G[1].y-G[0].y,G[1].x-G[0].x),y=-x+w,z=Math.PI-x-w,A=h(G[0],G[1])/Math.sqrt(2)*ya,B={x:G[0].x+Math.cos(y)*A,y:G[0].y+Math.sin(y)*A*-1},C={x:G[1].x+Math.cos(z)*A,y:G[1].y+Math.sin(z)*A*-1},j.push([d(G[0]),B,C,d(G[1])]);break;case da:case ea:s=[e[0],E.position_path===ea?0:e[1]],t=[],u=[],G.forEach(function(a,b){var c,d,e,f,g,h=s[b];Array.isArray(h)?c={x:h[0],y:h[1]}:"number"==typeof h?c=a.socketId===Y?{x:0,y:-h}:a.socketId===Z?{x:h,y:0}:a.socketId===$?{x:0,y:h}:{x:-h,y:0}:(d=G[b?0:1],f=0<(e=E.position_plugOverheadSE[b])?ta+(ua<e?(e-ua)*va:0):qa+(E.position_lineStrokeWidth>ra?(E.position_lineStrokeWidth-ra)*sa:0),a.socketId===Y?((g=(a.y-d.y)/2)<f&&(g=f),c={x:0,y:-g}):a.socketId===Z?((g=(d.x-a.x)/2)<f&&(g=f),c={x:g,y:0}):a.socketId===$?((g=(d.y-a.y)/2)<f&&(g=f),c={x:0,y:g}):((g=(a.x-d.x)/2)<f&&(g=f),c={x:-g,y:0})),t[b]=a.x+c.x,u[b]=a.y+c.y}),j.push([d(G[0]),{x:t[0],y:u[0]},{x:t[1],y:u[1]},d(G[1])]);break;case fa:!function(){function a(a){return a===n?p:a===o?q:a===p?n:o}function b(a){return a===o||a===q?"x":"y"}function c(b,c,d){var e={x:b.x,y:b.y};if(d){if(d===a(b.dirId))throw new Error("Invalid dirId: "+d);e.dirId=d}else e.dirId=b.dirId;return e.dirId===n?e.y-=c:e.dirId===o?e.x+=c:e.dirId===p?e.y+=c:e.x-=c,e}function f(a,b){return b.dirId===n?a.y<=b.y:b.dirId===o?a.x>=b.x:b.dirId===p?a.y>=b.y:a.x<=b.x}function g(a,b){return b.dirId===n||b.dirId===p?a.x===b.x:a.y===b.y}function h(a){return a[0]?{contain:0,notContain:1}:{contain:1,notContain:0}}function i(a,b,c){return Math.abs(b[c]-a[c])}function k(a,b,c){return"x"===c?a.x<b.x?o:q:a.y<b.y?p:n}function l(){var a,d,e,j,l=[f(s[1],s[0]),f(s[0],s[1])],m=[b(s[0].dirId),b(s[1].dirId)];if(m[0]===m[1]){if(l[0]&&l[1])return g(s[1],s[0])||(s[0][m[0]]===s[1][m[1]]?(r[0].push(s[0]),r[1].push(s[1])):(a=s[0][m[0]]+(s[1][m[1]]-s[0][m[0]])/2,r[0].push(c(s[0],Math.abs(a-s[0][m[0]]))),r[1].push(c(s[1],Math.abs(a-s[1][m[1]]))))),!1;l[0]!==l[1]?(d=h(l),(e=i(s[d.notContain],s[d.contain],m[d.notContain]))<xa&&(s[d.notContain]=c(s[d.notContain],xa-e)),r[d.notContain].push(s[d.notContain]),s[d.notContain]=c(s[d.notContain],xa,g(s[d.contain],s[d.notContain])?"x"===m[d.notContain]?p:o:k(s[d.notContain],s[d.contain],"x"===m[d.notContain]?"y":"x"))):(e=i(s[0],s[1],"x"===m[0]?"y":"x"),r.forEach(function(a,b){var d=0===b?1:0;a.push(s[b]),s[b]=c(s[b],xa,2*xa<=e?k(s[b],s[d],"x"===m[b]?"y":"x"):"x"===m[b]?p:o)}))}else{if(l[0]&&l[1])return g(s[1],s[0])?r[1].push(s[1]):g(s[0],s[1])?r[0].push(s[0]):r[0].push("x"===m[0]?{x:s[1].x,y:s[0].y}:{x:s[0].x,y:s[1].y}),!1;l[0]!==l[1]?(d=h(l),r[d.notContain].push(s[d.notContain]),s[d.notContain]=c(s[d.notContain],xa,i(s[d.notContain],s[d.contain],m[d.contain])>=xa?k(s[d.notContain],s[d.contain],m[d.contain]):s[d.contain].dirId)):(j=[{x:s[0].x,y:s[0].y},{x:s[1].x,y:s[1].y}],r.forEach(function(a,b){var d=0===b?1:0,e=i(j[b],j[d],m[b]);e<xa&&(s[b]=c(s[b],xa-e)),a.push(s[b]),s[b]=c(s[b],xa,k(s[b],s[d],m[d]))}))}return!0}var m,n=1,o=2,p=3,q=4,r=[[],[]],s=[];for(G.forEach(function(b,f){var g,h=d(b),i=e[f];g=Array.isArray(i)?i[0]<0?[q,-i[0]]:0<i[0]?[o,i[0]]:i[1]<0?[n,-i[1]]:0<i[1]?[p,i[1]]:[b.socketId,0]:"number"!=typeof i?[b.socketId,xa]:0<=i?[b.socketId,i]:[a(b.socketId),-i],h.dirId=g[0],i=g[1],r[f].push(h),s[f]=c(h,i)});l(););r[1].reverse(),r[0].concat(r[1]).forEach(function(a,b){var c={x:a.x,y:a.y};0<b&&j.push([m,c]),m=c})}()}r=[],E.position_plugOverheadSE.forEach(function(a,b){var c,d,e,g,n,o,p,q,s,t,u,v=!b;0<a?2===(c=j[d=v?0:j.length-1]).length?(r[d]=r[d]||h.apply(null,c),r[d]>wa&&(r[d]-a<wa&&(a=r[d]-wa),e=i(c[0],c[1],(v?a:r[d]-a)/r[d]),j[d]=v?[e,c[1]]:[c[0],e],r[d]-=a)):(r[d]=r[d]||l.apply(null,c),r[d]>wa&&(r[d]-a<wa&&(a=r[d]-wa),e=k(c[0],c[1],c[2],c[3],m(c[0],c[1],c[2],c[3],v?a:r[d]-a)),v?(g=c[0],n=e.toP1):(g=c[3],n=e.fromP2),o=Math.atan2(g.y-e.y,e.x-g.x),p=h(e,n),e.x=g.x+Math.cos(o)*a,e.y=g.y+Math.sin(o)*a*-1,n.x=e.x+Math.cos(o)*p,n.y=e.y+Math.sin(o)*p*-1,j[d]=v?[e,e.toP1,e.toP2,c[3]]:[c[0],e.fromP1,e.fromP2,e],r[d]=null)):a<0&&(c=j[d=v?0:j.length-1],q=G[b].socketId,s=q===_||q===Z?"x":"y",a<(u=-f[b]["x"===s?"width":"height"])&&(a=u),t=a*(q===_||q===Y?-1:1),2===c.length?c[v?0:c.length-1][s]+=t:(v?[0,1]:[c.length-2,c.length-1]).forEach(function(a){c[a][s]+=t}),r[d]=null)}),F.position_socketXYSE=b(G),F.position_plugOverheadSE=b(E.position_plugOverheadSE),F.position_path=E.position_path,F.position_lineStrokeWidth=E.position_lineStrokeWidth,F.position_socketGravitySE=b(e),H=!0,a.events.apl_position&&a.events.apl_position.forEach(function(b){b(a,j)})}return H}function C(a,b){b!==a.isShown&&(!!b!=!!a.isShown&&(a.svg.style.visibility=b?"":"hidden"),a.isShown=b,a.events&&a.events.svgShow&&a.events.svgShow.forEach(function(c){c(a,b)}))}function D(d,e){var f,g,h,i,j,k,l,m,o,q,r,s,x,z,A,C,D,E,F,G,H,I,J,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ia,ja,la,na,oa,qa={};e.line&&(qa.line=(g=(f=d).options,h=f.curStats,i=f.events,j=!1,j=y(f,h,"line_color",g.lineColor,i.cur_line_color)||j,j=y(f,h,"line_colorTra",c(h.line_color)[0]<1)||j,j=y(f,h,"line_strokeWidth",g.lineSize,i.cur_line_strokeWidth)||j)),(e.plug||qa.line)&&(qa.plug=(l=(k=d).options,m=k.curStats,o=k.events,q=!1,[0,1].forEach(function(a){var b,d,e,f,g,h,i,j,n=l.plugSE[a];q=y(k,m.plug_enabledSE,a,n!==ha)||q,q=y(k,m.plug_plugSE,a,n)||q,q=y(k,m.plug_colorSE,a,j=l.plugColorSE[a]||m.line_color,o.cur_plug_colorSE)||q,q=y(k,m.plug_colorTraSE,a,c(j)[0]<1)||q,n!==ha&&(f=d=(b=ka[ma[n]]).widthR*l.plugSizeSE[a],g=e=b.heightR*l.plugSizeSE[a],Ga&&(f*=m.line_strokeWidth,g*=m.line_strokeWidth),q=y(k,m.plug_markerWidthSE,a,f)||q,q=y(k,m.plug_markerHeightSE,a,g)||q,m.capsMaskMarker_markerWidthSE[a]=d,m.capsMaskMarker_markerHeightSE[a]=e),m.plugOutline_plugSE[a]=m.capsMaskMarker_plugSE[a]=n,m.plug_enabledSE[a]?(j=m.line_strokeWidth/Ia.lineSize*l.plugSizeSE[a],m.position_plugOverheadSE[a]=b.overhead*j,m.viewBox_plugBCircleSE[a]=b.bCircle*j,h=b.sideLen*j,i=b.backLen*j):(m.position_plugOverheadSE[a]=-m.line_strokeWidth/2,m.viewBox_plugBCircleSE[a]=h=i=0),y(k,m.attach_plugSideLenSE,a,h,o.cur_attach_plugSideLenSE),y(k,m.attach_plugBackLenSE,a,i,o.cur_attach_plugBackLenSE),m.capsMaskAnchor_enabledSE[a]=!m.plug_enabledSE[a]}),q=y(k,m,"plug_enabled",m.plug_enabledSE[0]||m.plug_enabledSE[1])||q)),(e.lineOutline||qa.line)&&(qa.lineOutline=(x=(r=d).options,z=r.curStats,A=!1,A=y(r,z,"lineOutline_enabled",x.lineOutlineEnabled)||A,A=y(r,z,"lineOutline_color",x.lineOutlineColor)||A,A=y(r,z,"lineOutline_colorTra",c(z.lineOutline_color)[0]<1)||A,s=z.line_strokeWidth*x.lineOutlineSize,A=y(r,z,"lineOutline_strokeWidth",z.line_strokeWidth-2*s)||A,A=y(r,z,"lineOutline_inStrokeWidth",z.lineOutline_colorTra?z.lineOutline_strokeWidth+2*Ha:z.line_strokeWidth-s)||A)),(e.plugOutline||qa.line||qa.plug||qa.lineOutline)&&(qa.plugOutline=(D=(C=d).options,E=C.curStats,F=!1,[0,1].forEach(function(a){var b,d=E.plugOutline_plugSE[a],e=d!==ha?ka[ma[d]]:null;F=y(C,E.plugOutline_enabledSE,a,D.plugOutlineEnabledSE[a]&&E.plug_enabled&&E.plug_enabledSE[a]&&!!e&&!!e.outlineBase)||F,F=y(C,E.plugOutline_colorSE,a,b=D.plugOutlineColorSE[a]||E.lineOutline_color)||F,F=y(C,E.plugOutline_colorTraSE,a,c(b)[0]<1)||F,e&&e.outlineBase&&((b=D.plugOutlineSizeSE[a])>e.outlineMax&&(b=e.outlineMax),b*=2*e.outlineBase,F=y(C,E.plugOutline_strokeWidthSE,a,b)||F,F=y(C,E.plugOutline_inStrokeWidthSE,a,E.plugOutline_colorTraSE[a]?b-Ha/(E.line_strokeWidth/Ia.lineSize)/D.plugSizeSE[a]*2:b/2)||F)}),F)),(e.faces||qa.line||qa.plug||qa.lineOutline||qa.plugOutline)&&(qa.faces=(I=(G=d).curStats,J=G.aplStats,L=G.events,M=!1,!I.line_altColor&&y(G,J,"line_color",H=I.line_color,L.apl_line_color)&&(G.lineFace.style.stroke=H,M=!0),y(G,J,"line_strokeWidth",H=I.line_strokeWidth,L.apl_line_strokeWidth)&&(G.lineShape.style.strokeWidth=H+"px",M=!0,(Ea||Da)&&(t(G,G.lineShape),Da&&(t(G,G.lineFace),t(G,G.lineMaskCaps)))),y(G,J,"lineOutline_enabled",H=I.lineOutline_enabled,L.apl_lineOutline_enabled)&&(G.lineOutlineFace.style.display=H?"inline":"none",M=!0),I.lineOutline_enabled&&(y(G,J,"lineOutline_color",H=I.lineOutline_color,L.apl_lineOutline_color)&&(G.lineOutlineFace.style.stroke=H,M=!0),y(G,J,"lineOutline_strokeWidth",H=I.lineOutline_strokeWidth,L.apl_lineOutline_strokeWidth)&&(G.lineOutlineMaskShape.style.strokeWidth=H+"px",M=!0,Da&&(t(G,G.lineOutlineMaskCaps),t(G,G.lineOutlineFace))),y(G,J,"lineOutline_inStrokeWidth",H=I.lineOutline_inStrokeWidth,L.apl_lineOutline_inStrokeWidth)&&(G.lineMaskShape.style.strokeWidth=H+"px",M=!0,Da&&(t(G,G.lineOutlineMaskCaps),t(G,G.lineOutlineFace)))),y(G,J,"plug_enabled",H=I.plug_enabled,L.apl_plug_enabled)&&(G.plugsFace.style.display=H?"inline":"none",M=!0),I.plug_enabled&&[0,1].forEach(function(a){var b=I.plug_plugSE[a],c=b!==ha?ka[ma[b]]:null,d=w(a,c);y(G,J.plug_enabledSE,a,H=I.plug_enabledSE[a],L.apl_plug_enabledSE)&&(G.plugsFace.style[d.prop]=H?"url(#"+G.plugMarkerIdSE[a]+")":"none",M=!0),I.plug_enabledSE[a]&&(y(G,J.plug_plugSE,a,b,L.apl_plug_plugSE)&&(G.plugFaceSE[a].href.baseVal="#"+c.elmId,v(G,G.plugMarkerSE[a],d.orient,c.bBox,G.svg,G.plugMarkerShapeSE[a],G.plugsFace),M=!0,Ea&&t(G,G.plugsFace)),y(G,J.plug_colorSE,a,H=I.plug_colorSE[a],L.apl_plug_colorSE)&&(G.plugFaceSE[a].style.fill=H,M=!0,(Fa||Ga||Da)&&!I.line_colorTra&&t(G,Da?G.lineMaskCaps:G.capsMaskLine)),["markerWidth","markerHeight"].forEach(function(b){var c="plug_"+b+"SE";y(G,J[c],a,H=I[c][a],L["apl_"+c])&&(G.plugMarkerSE[a][b].baseVal.value=H,M=!0)}),y(G,J.plugOutline_enabledSE,a,H=I.plugOutline_enabledSE[a],L.apl_plugOutline_enabledSE)&&(H?(G.plugFaceSE[a].style.mask="url(#"+G.plugMaskIdSE[a]+")",G.plugOutlineFaceSE[a].style.display="inline"):(G.plugFaceSE[a].style.mask="none",G.plugOutlineFaceSE[a].style.display="none"),M=!0),I.plugOutline_enabledSE[a]&&(y(G,J.plugOutline_plugSE,a,b,L.apl_plugOutline_plugSE)&&(G.plugOutlineFaceSE[a].href.baseVal=G.plugMaskShapeSE[a].href.baseVal=G.plugOutlineMaskShapeSE[a].href.baseVal="#"+c.elmId,[G.plugMaskSE[a],G.plugOutlineMaskSE[a]].forEach(function(a){a.x.baseVal.value=c.bBox.left,a.y.baseVal.value=c.bBox.top,a.width.baseVal.value=c.bBox.width,a.height.baseVal.value=c.bBox.height}),M=!0),y(G,J.plugOutline_colorSE,a,H=I.plugOutline_colorSE[a],L.apl_plugOutline_colorSE)&&(G.plugOutlineFaceSE[a].style.fill=H,M=!0,Da&&(t(G,G.lineMaskCaps),t(G,G.lineOutlineMaskCaps))),y(G,J.plugOutline_strokeWidthSE,a,H=I.plugOutline_strokeWidthSE[a],L.apl_plugOutline_strokeWidthSE)&&(G.plugOutlineMaskShapeSE[a].style.strokeWidth=H+"px",M=!0),y(G,J.plugOutline_inStrokeWidthSE,a,H=I.plugOutline_inStrokeWidthSE[a],L.apl_plugOutline_inStrokeWidthSE)&&(G.plugMaskShapeSE[a].style.strokeWidth=H+"px",M=!0)))}),M)),(e.position||qa.line||qa.plug)&&(qa.position=B(d)),(e.path||qa.position)&&(qa.path=(P=(N=d).curStats,Q=N.aplStats,R=N.pathList.animVal||N.pathList.baseVal,S=P.path_edge,T=!1,R&&(S.x1=S.x2=R[0][0].x,S.y1=S.y2=R[0][0].y,P.path_pathData=O=n(R,function(a){a.x<S.x1&&(S.x1=a.x),a.y<S.y1&&(S.y1=a.y),a.x>S.x2&&(S.x2=a.x),a.y>S.y2&&(S.y2=a.y)}),p(O,Q.path_pathData)&&(N.linePath.setPathData(O),Q.path_pathData=O,T=!0,Da?(t(N,N.plugsFace),t(N,N.lineMaskCaps)):Ea&&t(N,N.linePath),N.events.apl_path&&N.events.apl_path.forEach(function(a){a(N,O)}))),T)),qa.viewBox=(X=(U=d).curStats,Y=U.aplStats,Z=X.path_edge,$=X.viewBox_bBox,_=Y.viewBox_bBox,aa=U.svg.viewBox.baseVal,ba=U.svg.style,ca=!1,V=Math.max(X.line_strokeWidth/2,X.viewBox_plugBCircleSE[0]||0,X.viewBox_plugBCircleSE[1]||0),W={x1:Z.x1-V,y1:Z.y1-V,x2:Z.x2+V,y2:Z.y2+V},U.events.new_edge4viewBox&&U.events.new_edge4viewBox.forEach(function(a){a(U,W)}),$.x=X.lineMask_x=X.lineOutlineMask_x=X.maskBGRect_x=W.x1,$.y=X.lineMask_y=X.lineOutlineMask_y=X.maskBGRect_y=W.y1,$.width=W.x2-W.x1,$.height=W.y2-W.y1,["x","y","width","height"].forEach(function(a){var b;(b=$[a])!==_[a]&&(aa[a]=_[a]=b,ba[pa[a]]=b+("x"===a||"y"===a?U.bodyOffset[a]:0)+"px",ca=!0)}),ca),qa.mask=(fa=(da=d).curStats,ga=da.aplStats,ia=!1,fa.plug_enabled?[0,1].forEach(function(a){fa.capsMaskMarker_enabledSE[a]=fa.plug_enabledSE[a]&&fa.plug_colorTraSE[a]||fa.plugOutline_enabledSE[a]&&fa.plugOutline_colorTraSE[a]}):fa.capsMaskMarker_enabledSE[0]=fa.capsMaskMarker_enabledSE[1]=!1,fa.capsMaskMarker_enabled=fa.capsMaskMarker_enabledSE[0]||fa.capsMaskMarker_enabledSE[1],fa.lineMask_outlineMode=fa.lineOutline_enabled,fa.caps_enabled=fa.capsMaskMarker_enabled||fa.capsMaskAnchor_enabledSE[0]||fa.capsMaskAnchor_enabledSE[1],fa.lineMask_enabled=fa.caps_enabled||fa.lineMask_outlineMode,(fa.lineMask_enabled&&!fa.lineMask_outlineMode||fa.lineOutline_enabled)&&["x","y"].forEach(function(a){var b="maskBGRect_"+a;y(da,ga,b,ea=fa[b])&&(da.maskBGRect[a].baseVal.value=ea,ia=!0)}),y(da,ga,"lineMask_enabled",ea=fa.lineMask_enabled)&&(da.lineFace.style.mask=ea?"url(#"+da.lineMaskId+")":"none",ia=!0,Ga&&t(da,da.lineMask)),fa.lineMask_enabled&&(y(da,ga,"lineMask_outlineMode",ea=fa.lineMask_outlineMode)&&(ea?(da.lineMaskBG.style.display="none",da.lineMaskShape.style.display="inline"):(da.lineMaskBG.style.display="inline",da.lineMaskShape.style.display="none"),ia=!0),["x","y"].forEach(function(a){var b="lineMask_"+a;y(da,ga,b,ea=fa[b])&&(da.lineMask[a].baseVal.value=ea,ia=!0)}),y(da,ga,"caps_enabled",ea=fa.caps_enabled)&&(da.lineMaskCaps.style.display=da.lineOutlineMaskCaps.style.display=ea?"inline":"none",ia=!0,Ga&&t(da,da.capsMaskLine)),fa.caps_enabled&&([0,1].forEach(function(a){var b;y(da,ga.capsMaskAnchor_enabledSE,a,ea=fa.capsMaskAnchor_enabledSE[a])&&(da.capsMaskAnchorSE[a].style.display=ea?"inline":"none",ia=!0,Ga&&t(da,da.lineMask)),fa.capsMaskAnchor_enabledSE[a]&&(p(b=fa.capsMaskAnchor_pathDataSE[a],ga.capsMaskAnchor_pathDataSE[a])&&(da.capsMaskAnchorSE[a].setPathData(b),ga.capsMaskAnchor_pathDataSE[a]=b,ia=!0),y(da,ga.capsMaskAnchor_strokeWidthSE,a,ea=fa.capsMaskAnchor_strokeWidthSE[a])&&(da.capsMaskAnchorSE[a].style.strokeWidth=ea+"px",ia=!0))}),y(da,ga,"capsMaskMarker_enabled",ea=fa.capsMaskMarker_enabled)&&(da.capsMaskLine.style.display=ea?"inline":"none",ia=!0),fa.capsMaskMarker_enabled&&[0,1].forEach(function(a){var b=fa.capsMaskMarker_plugSE[a],c=b!==ha?ka[ma[b]]:null,d=w(a,c);y(da,ga.capsMaskMarker_enabledSE,a,ea=fa.capsMaskMarker_enabledSE[a])&&(da.capsMaskLine.style[d.prop]=ea?"url(#"+da.lineMaskMarkerIdSE[a]+")":"none",ia=!0),fa.capsMaskMarker_enabledSE[a]&&(y(da,ga.capsMaskMarker_plugSE,a,b)&&(da.capsMaskMarkerShapeSE[a].href.baseVal="#"+c.elmId,v(da,da.capsMaskMarkerSE[a],d.orient,c.bBox,da.svg,da.capsMaskMarkerShapeSE[a],da.capsMaskLine),ia=!0,Ea&&(t(da,da.capsMaskLine),t(da,da.lineFace))),["markerWidth","markerHeight"].forEach(function(b){var c="capsMaskMarker_"+b+"SE";y(da,ga[c],a,ea=fa[c][a])&&(da.capsMaskMarkerSE[a][b].baseVal.value=ea,ia=!0)}))}))),fa.lineOutline_enabled&&["x","y"].forEach(function(a){var b="lineOutlineMask_"+a;y(da,ga,b,ea=fa[b])&&(da.lineOutlineMask[a].baseVal.value=ea,ia=!0)}),ia),e.effect&&(na=(ja=d).curStats,oa=ja.aplStats,Object.keys(K).forEach(function(c){var d=K[c],e=c+"_enabled",f=c+"_options",g=na[f];y(ja,oa,e,la=na[e])?(la&&(oa[f]=b(g)),d[la?"init":"remove"](ja)):la&&a(g,oa[f])&&(d.remove(ja),oa[e]=!0,oa[f]=b(g),d.init(ja))})),(Fa||Ga)&&qa.line&&!qa.path&&t(d,d.lineShape),Fa&&qa.plug&&!qa.line&&t(d,d.plugsFace),u(d)}function E(a,c){return{duration:Ka(a.duration)&&0<a.duration?a.duration:c.duration,timing:La.validTiming(a.timing)?a.timing:b(c.timing)}}function F(b,c,d,e){function f(){["show_on","show_effect","show_animOptions"].forEach(function(a){i[a]=h[a]})}var g,h=b.curStats,i=b.aplStats,j={};h.show_on=c,d&&L[d]&&(h.show_effect=d,h.show_animOptions=E(Ja(e)?e:{},L[d].defaultAnimOptions)),j.show_on=h.show_on!==i.show_on,j.show_effect=h.show_effect!==i.show_effect,j.show_animOptions=a(h.show_animOptions,i.show_animOptions),j.show_effect||j.show_animOptions?h.show_inAnim?(g=j.show_effect?L[i.show_effect].stop(b,!0,!0):L[i.show_effect].stop(b),f(),L[i.show_effect].init(b,g)):j.show_on&&(i.show_effect&&j.show_effect&&L[i.show_effect].stop(b,!0,!0),f(),L[i.show_effect].init(b)):j.show_on&&(f(),L[i.show_effect].start(b))}function G(a,b,c){var d={props:a,optionName:c};return!(!(a.attachments.indexOf(b)<0)||b.conf.bind&&!b.conf.bind(b,d)||(a.attachments.push(b),b.boundTargets.push(d),0))}function H(a,b,c){var d=a.attachments.indexOf(b);-1<d&&a.attachments.splice(d,1),b.boundTargets.some(function(c,e){return c.props===a&&(b.conf.unbind&&b.conf.unbind(b,c),d=e,!0)})&&(b.boundTargets.splice(d,1),c||s(function(){b.boundTargets.length||P(b)}))}function I(b,c){function e(a,b,c,d,e){var f={};return c?null!=d?(f.container=a[c],f.key=d):(f.container=a,f.key=c):(f.container=a,f.key=b),f.default=e,f.acceptsAuto=null==f.default,f}function g(a,b,c,d,f,g,h){var i,j,k,l=e(a,c,f,g,h);return null!=b[c]&&(j=(b[c]+"").toLowerCase())&&(l.acceptsAuto&&j===oa||(k=d[j]))&&k!==l.container[l.key]&&(l.container[l.key]=k,i=!0),null!=l.container[l.key]||l.acceptsAuto||(l.container[l.key]=l.default,i=!0),i}function h(a,b,c,d,f,g,h,i,j){var k,l,m,n,o=e(a,c,f,g,h);if(!d){if(null==o.default)throw new Error("Invalid `type`: "+c);d=typeof o.default}return null!=b[c]&&(o.acceptsAuto&&(b[c]+"").toLowerCase()===oa||(m=l=b[c],("number"===(n=d)?Ka(m):typeof m===n)&&(l=j&&"string"===d&&l?l.trim():l,1)&&(!i||i(l))))&&l!==o.container[o.key]&&(o.container[o.key]=l,k=!0),null!=o.container[o.key]||o.acceptsAuto||(o.container[o.key]=o.default,k=!0),k}var i,j,k=b.options,l={};if(c=c||{},["start","end"].forEach(function(a,e){var f=c[a],g=!1;if(f&&(d(f)||(g=O(f,"anchor")))&&f!==k.anchorSE[e]){if(!1!==b.optionIsAttach.anchorSE[e]&&H(b,Ua[k.anchorSE[e]._id]),g&&!G(b,Ua[f._id],a))throw new Error("Can't bind attachment");k.anchorSE[e]=f,b.optionIsAttach.anchorSE[e]=g,j=l.position=!0}}),!k.anchorSE[0]||!k.anchorSE[1]||k.anchorSE[0]===k.anchorSE[1])throw new Error("`start` and `end` are required.");j&&(i=function(a,b){var c,d,e;if(!(c=f(a))||!(d=f(b)))throw new Error("Cannot get frames.");return c.length&&d.length&&(c.reverse(),d.reverse(),c.some(function(a){return d.some(function(b){return b===a&&(e=b.contentWindow,!0)})})),e||window}(!1!==b.optionIsAttach.anchorSE[0]?Ua[k.anchorSE[0]._id].element:k.anchorSE[0],!1!==b.optionIsAttach.anchorSE[1]?Ua[k.anchorSE[1]._id].element:k.anchorSE[1]))!==b.baseWindow&&(function(a,b){function c(a){var b=g.appendChild(q.createElementNS(Ba,"mask"));return b.id=a,b.maskUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[b.x,b.y,b.width,b.height].forEach(function(a){a.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),b}function d(a){var b=g.appendChild(q.createElementNS(Ba,"marker"));return b.id=a,b.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_STROKEWIDTH,b.viewBox.baseVal||b.setAttribute("viewBox","0 0 0 0"),b}function e(a){return[a.width,a.height].forEach(function(a){a.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100)}),a}var f,g,h,i,j,k,l,m,n,o,p=a.aplStats,q=b.document,r=X+"-"+a._id;a.pathList={},x(p,Oa),Object.keys(K).forEach(function(b){var c=b+"_enabled";p[c]&&(K[b].remove(a),p[c]=!1)}),a.baseWindow&&a.svg&&a.baseWindow.document.body.removeChild(a.svg),A(a.baseWindow=b),a.bodyOffset=z(b),a.svg=f=q.createElementNS(Ba,"svg"),f.className.baseVal=X,f.viewBox.baseVal||f.setAttribute("viewBox","0 0 0 0"),a.defs=g=f.appendChild(q.createElementNS(Ba,"defs")),a.linePath=i=g.appendChild(q.createElementNS(Ba,"path")),i.id=j=r+"-line-path",i.className.baseVal=X+"-line-path",Ga&&(i.style.fill="none"),a.lineShape=i=g.appendChild(q.createElementNS(Ba,"use")),i.id=k=r+"-line-shape",i.href.baseVal="#"+j,(h=g.appendChild(q.createElementNS(Ba,"g"))).id=l=r+"-caps",a.capsMaskAnchorSE=[0,1].map(function(){var a=h.appendChild(q.createElementNS(Ba,"path"));return a.className.baseVal=X+"-caps-mask-anchor",a}),a.lineMaskMarkerIdSE=[r+"-caps-mask-marker-0",r+"-caps-mask-marker-1"],a.capsMaskMarkerSE=[0,1].map(function(b){return d(a.lineMaskMarkerIdSE[b])}),a.capsMaskMarkerShapeSE=[0,1].map(function(b){var c=a.capsMaskMarkerSE[b].appendChild(q.createElementNS(Ba,"use"));return c.className.baseVal=X+"-caps-mask-marker-shape",c}),a.capsMaskLine=i=h.appendChild(q.createElementNS(Ba,"use")),i.className.baseVal=X+"-caps-mask-line",i.href.baseVal="#"+k,a.maskBGRect=i=e(g.appendChild(q.createElementNS(Ba,"rect"))),i.id=m=r+"-mask-bg-rect",i.className.baseVal=X+"-mask-bg-rect",Ga&&(i.style.fill="white"),a.lineMask=e(c(a.lineMaskId=r+"-line-mask")),a.lineMaskBG=i=a.lineMask.appendChild(q.createElementNS(Ba,"use")),i.href.baseVal="#"+m,a.lineMaskShape=i=a.lineMask.appendChild(q.createElementNS(Ba,"use")),i.className.baseVal=X+"-line-mask-shape",i.href.baseVal="#"+j,i.style.display="none",a.lineMaskCaps=i=a.lineMask.appendChild(q.createElementNS(Ba,"use")),i.href.baseVal="#"+l,a.lineOutlineMask=e(c(n=r+"-line-outline-mask")),(i=a.lineOutlineMask.appendChild(q.createElementNS(Ba,"use"))).href.baseVal="#"+m,a.lineOutlineMaskShape=i=a.lineOutlineMask.appendChild(q.createElementNS(Ba,"use")),i.className.baseVal=X+"-line-outline-mask-shape",i.href.baseVal="#"+j,a.lineOutlineMaskCaps=i=a.lineOutlineMask.appendChild(q.createElementNS(Ba,"use")),i.href.baseVal="#"+l,a.face=f.appendChild(q.createElementNS(Ba,"g")),a.lineFace=i=a.face.appendChild(q.createElementNS(Ba,"use")),i.href.baseVal="#"+k,a.lineOutlineFace=i=a.face.appendChild(q.createElementNS(Ba,"use")),i.href.baseVal="#"+k,i.style.mask="url(#"+n+")",i.style.display="none",a.plugMaskIdSE=[r+"-plug-mask-0",r+"-plug-mask-1"],a.plugMaskSE=[0,1].map(function(b){return c(a.plugMaskIdSE[b])}),a.plugMaskShapeSE=[0,1].map(function(b){var c=a.plugMaskSE[b].appendChild(q.createElementNS(Ba,"use"));return c.className.baseVal=X+"-plug-mask-shape",c}),o=[],a.plugOutlineMaskSE=[0,1].map(function(a){return c(o[a]=r+"-plug-outline-mask-"+a)}),a.plugOutlineMaskShapeSE=[0,1].map(function(b){var c=a.plugOutlineMaskSE[b].appendChild(q.createElementNS(Ba,"use"));return c.className.baseVal=X+"-plug-outline-mask-shape",c}),a.plugMarkerIdSE=[r+"-plug-marker-0",r+"-plug-marker-1"],a.plugMarkerSE=[0,1].map(function(b){var c=d(a.plugMarkerIdSE[b]);return Ga&&(c.markerUnits.baseVal=SVGMarkerElement.SVG_MARKERUNITS_USERSPACEONUSE),c}),a.plugMarkerShapeSE=[0,1].map(function(b){return a.plugMarkerSE[b].appendChild(q.createElementNS(Ba,"g"))}),a.plugFaceSE=[0,1].map(function(b){return a.plugMarkerShapeSE[b].appendChild(q.createElementNS(Ba,"use"))}),a.plugOutlineFaceSE=[0,1].map(function(b){var c=a.plugMarkerShapeSE[b].appendChild(q.createElementNS(Ba,"use"));return c.style.mask="url(#"+o[b]+")",c.style.display="none",c}),a.plugsFace=i=a.face.appendChild(q.createElementNS(Ba,"use")),i.className.baseVal=X+"-plugs-face",i.href.baseVal="#"+k,i.style.display="none",a.curStats.show_inAnim?(a.isShown=1,L[p.show_effect].stop(a,!0)):a.isShown||(f.style.visibility="hidden"),q.body.appendChild(f),[0,1,2].forEach(function(b){var c,d=a.options.labelSEM[b];d&&O(d,"label")&&(c=Ua[d._id]).conf.initSvg&&c.conf.initSvg(c,a)})}(b,i),l.line=l.plug=l.lineOutline=l.plugOutline=l.faces=l.effect=!0),l.position=g(k,c,"path",ga,null,null,Ia.path)||l.position,l.position=g(k,c,"startSocket",aa,"socketSE",0)||l.position,l.position=g(k,c,"endSocket",aa,"socketSE",1)||l.position,[c.startSocketGravity,c.endSocketGravity].forEach(function(a,b){var c,d,e=!1;null!=a&&(Array.isArray(a)?Ka(a[0])&&Ka(a[1])&&(e=[a[0],a[1]],Array.isArray(k.socketGravitySE[b])&&(c=e,d=k.socketGravitySE[b],c.length===d.length&&c.every(function(a,b){return a===d[b]}))&&(e=!1)):((a+"").toLowerCase()===oa?e=null:Ka(a)&&0<=a&&(e=a),e===k.socketGravitySE[b]&&(e=!1)),!1!==e&&(k.socketGravitySE[b]=e,l.position=!0))}),l.line=h(k,c,"color",null,"lineColor",null,Ia.lineColor,null,!0)||l.line,l.line=h(k,c,"size",null,"lineSize",null,Ia.lineSize,function(a){return 0<a})||l.line,["startPlug","endPlug"].forEach(function(a,b){l.plug=g(k,c,a,la,"plugSE",b,Ia.plugSE[b])||l.plug,l.plug=h(k,c,a+"Color","string","plugColorSE",b,null,null,!0)||l.plug,l.plug=h(k,c,a+"Size",null,"plugSizeSE",b,Ia.plugSizeSE[b],function(a){return 0<a})||l.plug}),l.lineOutline=h(k,c,"outline",null,"lineOutlineEnabled",null,Ia.lineOutlineEnabled)||l.lineOutline,l.lineOutline=h(k,c,"outlineColor",null,"lineOutlineColor",null,Ia.lineOutlineColor,null,!0)||l.lineOutline,l.lineOutline=h(k,c,"outlineSize",null,"lineOutlineSize",null,Ia.lineOutlineSize,function(a){return 0<a&&a<=.48})||l.lineOutline,["startPlugOutline","endPlugOutline"].forEach(function(a,b){l.plugOutline=h(k,c,a,null,"plugOutlineEnabledSE",b,Ia.plugOutlineEnabledSE[b])||l.plugOutline,l.plugOutline=h(k,c,a+"Color","string","plugOutlineColorSE",b,null,null,!0)||l.plugOutline,l.plugOutline=h(k,c,a+"Size",null,"plugOutlineSizeSE",b,Ia.plugOutlineSizeSE[b],function(a){return 1<=a})||l.plugOutline}),["startLabel","endLabel","middleLabel"].forEach(function(a,d){var e,f,g,h=c[a],i=k.labelSEM[d]&&!b.optionIsAttach.labelSEM[d]?Ua[k.labelSEM[d]._id].text:k.labelSEM[d],j=!1;if((e="string"==typeof h)&&(h=h.trim()),(e||h&&(j=O(h,"label")))&&h!==i){if(k.labelSEM[d]&&(H(b,Ua[k.labelSEM[d]._id]),k.labelSEM[d]=""),h){if(j?(f=Ua[(g=h)._id]).boundTargets.slice().forEach(function(a){f.conf.removeOption(f,a)}):g=new N(M.captionLabel,[h]),!G(b,Ua[g._id],a))throw new Error("Can't bind attachment");k.labelSEM[d]=g}b.optionIsAttach.labelSEM[d]=j}}),Object.keys(K).forEach(function(d){function e(a){var b={};return m.optionsConf.forEach(function(c){var d=c[0],e=c[3];null==c[4]||b[e]||(b[e]=[]),("function"==typeof d?d:"id"===d?g:h).apply(null,[b,a].concat(c.slice(1)))}),b}function f(a){var c,e=d+"_animOptions";return a.hasOwnProperty("animation")?Ja(a.animation)?c=b.curStats[e]=E(a.animation,m.defaultAnimOptions):(c=!!a.animation,b.curStats[e]=c?E({},m.defaultAnimOptions):null):(c=!!m.defaultEnabled,b.curStats[e]=c?E({},m.defaultAnimOptions):null),c}var i,j,m=K[d],n=d+"_enabled",o=d+"_options";c.hasOwnProperty(d)&&(i=c[d],Ja(i)?(b.curStats[n]=!0,j=b.curStats[o]=e(i),m.anim&&(b.curStats[o].animation=f(i))):(j=b.curStats[n]=!!i)&&(b.curStats[o]=e({}),m.anim&&(b.curStats[o].animation=f({}))),a(j,k[d])&&(k[d]=j,l.effect=!0))}),D(b,l)}function J(a,c,d){var e={options:{anchorSE:[],socketSE:[],socketGravitySE:[],plugSE:[],plugColorSE:[],plugSizeSE:[],plugOutlineEnabledSE:[],plugOutlineColorSE:[],plugOutlineSizeSE:[],labelSEM:["","",""]},optionIsAttach:{anchorSE:[!1,!1],labelSEM:[!1,!1,!1]},curStats:{},aplStats:{},attachments:[],events:{},reflowTargets:[]};x(e.curStats,Oa),x(e.aplStats,Oa),Object.keys(K).forEach(function(a){var b=K[a].stats;x(e.curStats,b),x(e.aplStats,b),e.options[a]=!1}),x(e.curStats,Pa),x(e.aplStats,Pa),e.curStats.show_effect=Qa,e.curStats.show_animOptions=b(L[Qa].defaultAnimOptions),Object.defineProperty(this,"_id",{value:++Ta}),e._id=this._id,Sa[this._id]=e,1===arguments.length&&(d=a,a=null),d=d||{},(a||c)&&(d=b(d),a&&(d.start=a),c&&(d.end=c)),e.isShown=e.aplStats.show_on=!d.hide,this.setOptions(d)}var K,L,M,N,O,P,Q,R,S,T,U,V,W,X="leader-line",Y=1,Z=2,$=3,_=4,aa={top:Y,right:Z,bottom:$,left:_},ba=1,ca=2,da=3,ea=4,fa=5,ga={straight:ba,arc:ca,fluid:da,magnet:ea,grid:fa},ha="behind",ia=X+"-defs",ja='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" id="leader-line-defs"><style><![CDATA[.leader-line{position:absolute;overflow:visible!important;pointer-events:none!important;font-size:16px;z-index: 99;}#leader-line-defs{width:0;height:0;position:absolute;left:0;top:0}.leader-line-line-path{fill:none}.leader-line-mask-bg-rect{fill:#fff}.leader-line-caps-mask-anchor,.leader-line-caps-mask-marker-shape{fill:#000}.leader-line-caps-mask-anchor{stroke:#000}.leader-line-caps-mask-line,.leader-line-plugs-face{stroke:transparent}.leader-line-line-mask-shape{stroke:#fff}.leader-line-line-outline-mask-shape{stroke:#000}.leader-line-plug-mask-shape{fill:#fff;stroke:#000}.leader-line-plug-outline-mask-shape{fill:#000;stroke:#fff}.leader-line-areaAnchor{position:absolute;overflow:visible!important}]]></style><defs><circle id="leader-line-disc" cx="0" cy="0" r="5"/><rect id="leader-line-square" x="-5" y="-5" width="10" height="10"/><polygon id="leader-line-arrow1" points="-8,-8 8,0 -8,8 -5,0"/><polygon id="leader-line-arrow2" points="-4,-8 4,0 -4,8 -7,5 -2,0 -7,-5"/><polygon id="leader-line-arrow3" points="-4,-5 8,0 -4,5"/><g id="leader-line-hand"><path style="fill: #fcfcfc" d="M9.19 11.14h4.75c1.38 0 2.49-1.11 2.49-2.49 0-.51-.15-.98-.41-1.37h1.3c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.53-2.49-2.53h1.02c1.38 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49h14.96c1.37 0 2.49-1.11 2.49-2.49s-1.11-2.49-2.49-2.49H16.58C16-9.86 14.28-11.14 9.7-11.14c-4.79 0-6.55 3.42-7.87 4.73H-2.14v13.23h3.68C3.29 9.97 5.47 11.14 9.19 11.14L9.19 11.14Z"/><path style="fill: black" d="M13.95 12c1.85 0 3.35-1.5 3.35-3.35 0-.17-.02-.34-.04-.51h.07c1.85 0 3.35-1.5 3.35-3.35 0-.79-.27-1.51-.72-2.08 1.03-.57 1.74-1.67 1.74-2.93 0-.59-.16-1.15-.43-1.63h12.04c1.85 0 3.35-1.5 3.35-3.35 0-1.85-1.5-3.35-3.35-3.35H17.2C16.26-10.93 13.91-12 9.7-12 5.36-12 3.22-9.4 1.94-7.84c0 0-.29.33-.5.57-.63 0-3.58 0-3.58 0C-2.61-7.27-3-6.88-3-6.41v13.23c0 .47.39.86.86.86 0 0 2.48 0 3.2 0C2.9 10.73 5.29 12 9.19 12L13.95 12ZM9.19 10.28c-3.46 0-5.33-1.05-6.9-3.87-.15-.27-.44-.44-.75-.44 0 0-1.81 0-2.82 0V-5.55c1.06 0 3.11 0 3.11 0 .25 0 .44-.06.61-.25l.83-.95c1.23-1.49 2.91-3.53 6.43-3.53 3.45 0 4.9.74 5.57 1.72h-4.3c-.48 0-.86.38-.86.86s.39.86.86.86h22.34c.9 0 1.63.73 1.63 1.63 0 .9-.73 1.63-1.63 1.63H15.83c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.52c.9 0 1.63.73 1.63 1.63s-.73 1.63-1.63 1.63h-3.12c-.48 0-.86.38-.86.86 0 .47.39.86.86.86h2.11c.88 0 1.63.76 1.63 1.67 0 .9-.73 1.63-1.63 1.63h-3.2c-.48 0-.86.39-.86.86 0 .47.39.86.86.86h1.36c.05.16.09.34.09.51 0 .9-.73 1.63-1.63 1.63C13.95 10.28 9.19 10.28 9.19 10.28Z"/></g><g id="leader-line-crosshair"><path d="M0-78.97c-43.54 0-78.97 35.43-78.97 78.97 0 43.54 35.43 78.97 78.97 78.97s78.97-35.43 78.97-78.97C78.97-43.54 43.55-78.97 0-78.97ZM76.51-1.21h-9.91v-9.11h-2.43v9.11h-11.45c-.64-28.12-23.38-50.86-51.5-51.5V-64.17h9.11V-66.6h-9.11v-9.91C42.46-75.86 75.86-42.45 76.51-1.21ZM-1.21-30.76h-9.11v2.43h9.11V-4.2c-1.44.42-2.57 1.54-2.98 2.98H-28.33v-9.11h-2.43v9.11H-50.29C-49.65-28-27.99-49.65-1.21-50.29V-30.76ZM-30.76 1.21v9.11h2.43v-9.11H-4.2c.42 1.44 1.54 2.57 2.98 2.98v24.13h-9.11v2.43h9.11v19.53C-27.99 49.65-49.65 28-50.29 1.21H-30.76ZM1.22 30.75h9.11v-2.43h-9.11V4.2c1.44-.42 2.56-1.54 2.98-2.98h24.13v9.11h2.43v-9.11h19.53C49.65 28 28 49.65 1.22 50.29V30.75ZM30.76-1.21v-9.11h-2.43v9.11H4.2c-.42-1.44-1.54-2.56-2.98-2.98V-28.33h9.11v-2.43h-9.11V-50.29C28-49.65 49.65-28 50.29-1.21H30.76ZM-1.21-76.51v9.91h-9.11v2.43h9.11v11.45c-28.12.64-50.86 23.38-51.5 51.5H-64.17v-9.11H-66.6v9.11h-9.91C-75.86-42.45-42.45-75.86-1.21-76.51ZM-76.51 1.21h9.91v9.11h2.43v-9.11h11.45c.64 28.12 23.38 50.86 51.5 51.5v11.45h-9.11v2.43h9.11v9.91C-42.45 75.86-75.86 42.45-76.51 1.21ZM1.22 76.51v-9.91h9.11v-2.43h-9.11v-11.45c28.12-.64 50.86-23.38 51.5-51.5h11.45v9.11h2.43v-9.11h9.91C75.86 42.45 42.45 75.86 1.22 76.51Z"/><path d="M0 83.58-7.1 96 7.1 96Z"/><path d="M0-83.58 7.1-96-7.1-96"/><path d="M83.58 0 96 7.1 96-7.1Z"/><path d="M-83.58 0-96-7.1-96 7.1Z"/></g></defs></svg>',ka={disc:{elmId:"leader-line-disc",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},square:{elmId:"leader-line-square",noRotate:!0,bBox:{left:-5,top:-5,width:10,height:10,right:5,bottom:5},widthR:2.5,heightR:2.5,bCircle:5,sideLen:5,backLen:5,overhead:0,outlineBase:1,outlineMax:4},arrow1:{elmId:"leader-line-arrow1",bBox:{left:-8,top:-8,width:16,height:16,right:8,bottom:8},widthR:4,heightR:4,bCircle:8,sideLen:8,backLen:8,overhead:8,outlineBase:2,outlineMax:1.5},arrow2:{elmId:"leader-line-arrow2",bBox:{left:-7,top:-8,width:11,height:16,right:4,bottom:8},widthR:2.75,heightR:4,bCircle:8,sideLen:8,backLen:7,overhead:4,outlineBase:1,outlineMax:1.75},arrow3:{elmId:"leader-line-arrow3",bBox:{left:-4,top:-5,width:12,height:10,right:8,bottom:5},widthR:3,heightR:2.5,bCircle:8,sideLen:5,backLen:4,overhead:8,outlineBase:1,outlineMax:2.5},hand:{elmId:"leader-line-hand",bBox:{left:-3,top:-12,width:40,height:24,right:37,bottom:12},widthR:10,heightR:6,bCircle:37,sideLen:12,backLen:3,overhead:37},crosshair:{elmId:"leader-line-crosshair",noRotate:!0,bBox:{left:-96,top:-96,width:192,height:192,right:96,bottom:96},widthR:48,heightR:48,bCircle:96,sideLen:96,backLen:96,overhead:0}},la={behind:ha,disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},ma={disc:"disc",square:"square",arrow1:"arrow1",arrow2:"arrow2",arrow3:"arrow3",hand:"hand",crosshair:"crosshair"},na=[Y,Z,$,_],oa="auto",pa={x:"left",y:"top",width:"width",height:"height"},qa=80,ra=4,sa=5,ta=120,ua=8,va=3.75,wa=10,xa=30,ya=.5522847,za=.25*Math.PI,Aa=/^\s*(\-?[\d\.]+)\s*(\%)?\s*$/,Ba="http://www.w3.org/2000/svg",Ca="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled,Da=!Ca&&!!document.uniqueID,Ea="MozAppearance"in document.documentElement.style,Fa=!(Ca||Ea||!window.chrome||!window.CSS),Ga=!Ca&&!Da&&!Ea&&!Fa&&!window.chrome&&"WebkitAppearance"in document.documentElement.style,Ha=Da||Ca?.2:.1,Ia={path:da,lineColor:"coral",lineSize:4,plugSE:[ha,"arrow1"],plugSizeSE:[1,1],lineOutlineEnabled:!1,lineOutlineColor:"indianred",lineOutlineSize:.25,plugOutlineEnabledSE:[!1,!1],plugOutlineSizeSE:[1,1]},Ja=(U={}.toString,V={}.hasOwnProperty.toString,W=V.call(Object),function(a){var b,c;return a&&"[object Object]"===U.call(a)&&(!(b=Object.getPrototypeOf(a))||(c=b.hasOwnProperty("constructor")&&b.constructor)&&"function"==typeof c&&V.call(c)===W)}),Ka=Number.isFinite||function(a){return"number"==typeof a&&window.isFinite(a)},La=function(){function a(){var b=Date.now(),d=!1;c&&(g.call(window,c),c=null),i.forEach(function(a){var c,f,g;if(a.framesStart){if((c=b-a.framesStart)>=a.duration&&a.count&&a.loopsLeft<=1)return g=a.frames[a.lastFrame=a.reverse?0:a.frames.length-1],a.frameCallback(g.value,!0,g.timeRatio,g.outputRatio),void(a.framesStart=null);if(c>a.duration){if(f=Math.floor(c/a.duration),a.count){if(f>=a.loopsLeft)return g=a.frames[a.lastFrame=a.reverse?0:a.frames.length-1],a.frameCallback(g.value,!0,g.timeRatio,g.outputRatio),void(a.framesStart=null);a.loopsLeft-=f}a.framesStart+=a.duration*f,c=b-a.framesStart}a.reverse&&(c=a.duration-c),g=a.frames[a.lastFrame=Math.round(c/e)],!1!==a.frameCallback(g.value,!1,g.timeRatio,g.outputRatio)?d=!0:a.framesStart=null}}),d&&(c=f.call(window,a))}function b(b,c){b.framesStart=Date.now(),null!=c&&(b.framesStart-=b.duration*(b.reverse?1-c:c)),b.loopsLeft=b.count,b.lastFrame=null,a()}var c,d={ease:[.25,.1,.25,1],linear:[0,0,1,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]},e=1e3/60/2,f=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,e)},g=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(a){clearTimeout(a)},h=Number.isFinite||function(a){return"number"==typeof a&&window.isFinite(a)},i=[],j=0;return{add:function(a,c,f,g,h,k,l){function m(b,c){return{value:a(c),timeRatio:b,outputRatio:c}}var n,o,p,q,r,s,t,u,v,w,x,y,z,A=++j;if("string"==typeof h&&(h=d[h]),a=a||function(){},f<e)o=[m(0,0),m(1,1)];else{if(p=e/f,o=[m(0,0)],0===h[0]&&0===h[1]&&1===h[2]&&1===h[3])for(r=p;r<=1;r+=p)o.push(m(r,r));else for(s=q=(r=p)/10;s<=1;s+=q)w=(v=(u=s)*u)*u,z=3*(x=1-u)*v,r<=(t={x:(y=x*x*3*u)*h[0]+z*h[2]+w,y:y*h[1]+z*h[3]+w}).x&&(o.push(m(t.x,t.y)),r+=p);o.push(m(1,1))}return n={animId:A,frameCallback:c,duration:f,count:g,frames:o,reverse:!!k},i.push(n),!1!==l&&b(n,l),A},remove:function(a){var b;i.some(function(c,d){return c.animId===a&&(b=d,!(c.framesStart=null))})&&i.splice(b,1)},start:function(a,c,d){i.some(function(e){return e.animId===a&&(e.reverse=!!c,b(e,d),!0)})},stop:function(a,b){var c;return i.some(function(d){return d.animId===a&&(b?null!=d.lastFrame&&(c=d.frames[d.lastFrame].timeRatio):(c=(Date.now()-d.framesStart)/d.duration,d.reverse&&(c=1-c),c<0?c=0:1<c&&(c=1)),!(d.framesStart=null))}),c},validTiming:function(a){return"string"==typeof a?d[a]:Array.isArray(a)&&[0,1,2,3].every(function(b){return h(a[b])&&0<=a[b]&&a[b]<=1})?[a[0],a[1],a[2],a[3]]:null}}}(),Ma=function(a){a.SVGPathElement.prototype.getPathData&&a.SVGPathElement.prototype.setPathData||function(){var b={Z:"Z",M:"M",L:"L",C:"C",Q:"Q",A:"A",H:"H",V:"V",S:"S",T:"T",z:"Z",m:"m",l:"l",c:"c",q:"q",a:"a",h:"h",v:"v",s:"s",t:"t"},c=function(a){this._string=a,this._currentIndex=0,this._endIndex=this._string.length,this._prevCommand=null,this._skipOptionalSpaces()},d=-1!==a.navigator.userAgent.indexOf("MSIE ");c.prototype={parseSegment:function(){var a=this._string[this._currentIndex],c=b[a]?b[a]:null;if(null===c){if(null===this._prevCommand)return null;if(null===(c=("+"===a||"-"===a||"."===a||"0"<=a&&a<="9")&&"Z"!==this._prevCommand?"M"===this._prevCommand?"L":"m"===this._prevCommand?"l":this._prevCommand:null))return null}else this._currentIndex+=1;var d=null,e=(this._prevCommand=c).toUpperCase();return"H"===e||"V"===e?d=[this._parseNumber()]:"M"===e||"L"===e||"T"===e?d=[this._parseNumber(),this._parseNumber()]:"S"===e||"Q"===e?d=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"C"===e?d=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseNumber()]:"A"===e?d=[this._parseNumber(),this._parseNumber(),this._parseNumber(),this._parseArcFlag(),this._parseArcFlag(),this._parseNumber(),this._parseNumber()]:"Z"===e&&(this._skipOptionalSpaces(),d=[]),null===d||0<=d.indexOf(null)?null:{type:c,values:d}},hasMoreData:function(){return this._currentIndex<this._endIndex},peekSegmentType:function(){var a=this._string[this._currentIndex];return b[a]?b[a]:null},initialCommandIsMoveTo:function(){if(!this.hasMoreData())return!0;var a=this.peekSegmentType();return"M"===a||"m"===a},_isCurrentSpace:function(){var a=this._string[this._currentIndex];return a<=" "&&(" "===a||"\n"===a||"\t"===a||"\r"===a||"\f"===a)},_skipOptionalSpaces:function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex+=1;return this._currentIndex<this._endIndex},_skipOptionalSpacesOrDelimiter:function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!==this._string[this._currentIndex])&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","===this._string[this._currentIndex]&&(this._currentIndex+=1,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},_parseNumber:function(){var a=0,b=0,c=1,d=0,e=1,f=1,g=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"===this._string[this._currentIndex]?this._currentIndex+=1:this._currentIndex<this._endIndex&&"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,e=-1),this._currentIndex===this._endIndex||(this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])&&"."!==this._string[this._currentIndex])return null;for(var h=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)this._currentIndex+=1;if(this._currentIndex!==h)for(var i=this._currentIndex-1,j=1;h<=i;)b+=j*(this._string[i]-"0"),i-=1,j*=10;if(this._currentIndex<this._endIndex&&"."===this._string[this._currentIndex]){if(this._currentIndex+=1,this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)c*=10,d+=(this._string.charAt(this._currentIndex)-"0")/c,this._currentIndex+=1}if(this._currentIndex!==g&&this._currentIndex+1<this._endIndex&&("e"===this._string[this._currentIndex]||"E"===this._string[this._currentIndex])&&"x"!==this._string[this._currentIndex+1]&&"m"!==this._string[this._currentIndex+1]){if(this._currentIndex+=1,"+"===this._string[this._currentIndex]?this._currentIndex+=1:"-"===this._string[this._currentIndex]&&(this._currentIndex+=1,f=-1),this._currentIndex>=this._endIndex||this._string[this._currentIndex]<"0"||"9"<this._string[this._currentIndex])return null;for(;this._currentIndex<this._endIndex&&"0"<=this._string[this._currentIndex]&&this._string[this._currentIndex]<="9";)a*=10,a+=this._string[this._currentIndex]-"0",this._currentIndex+=1}var k=b+d;return k*=e,a&&(k*=Math.pow(10,f*a)),g===this._currentIndex?null:(this._skipOptionalSpacesOrDelimiter(),k)},_parseArcFlag:function(){if(this._currentIndex>=this._endIndex)return null;var a=null,b=this._string[this._currentIndex];if(this._currentIndex+=1,"0"===b)a=0;else{if("1"!==b)return null;a=1}return this._skipOptionalSpacesOrDelimiter(),a}};var e=function(a){if(!a||0===a.length)return[];var b=new c(a),d=[];if(b.initialCommandIsMoveTo())for(;b.hasMoreData();){var e=b.parseSegment();if(null===e)break;d.push(e)}return d},f=a.SVGPathElement.prototype.setAttribute,g=a.SVGPathElement.prototype.removeAttribute,h=a.Symbol?a.Symbol():"__cachedPathData",i=a.Symbol?a.Symbol():"__cachedNormalizedPathData",j=function(a,b,c,d,e,f,g,h,i,k){var l,m,n,o,p,q=function(a,b,c){return{x:a*Math.cos(c)-b*Math.sin(c),y:a*Math.sin(c)+b*Math.cos(c)}},r=(l=g,Math.PI*l/180),s=[];if(k)m=k[0],n=k[1],o=k[2],p=k[3];else{var t=q(a,b,-r);a=t.x,b=t.y;var u=q(c,d,-r),v=(a-(c=u.x))/2,w=(b-(d=u.y))/2,x=v*v/(e*e)+w*w/(f*f);1<x&&(e*=x=Math.sqrt(x),f*=x);var y=e*e,z=f*f,A=y*z-y*w*w-z*v*v,B=y*w*w+z*v*v,C=(h===i?-1:1)*Math.sqrt(Math.abs(A/B));o=C*e*w/f+(a+c)/2,p=C*-f*v/e+(b+d)/2,m=Math.asin(parseFloat(((b-p)/f).toFixed(9))),n=Math.asin(parseFloat(((d-p)/f).toFixed(9))),a<o&&(m=Math.PI-m),c<o&&(n=Math.PI-n),m<0&&(m=2*Math.PI+m),n<0&&(n=2*Math.PI+n),i&&n<m&&(m-=2*Math.PI),!i&&m<n&&(n-=2*Math.PI)}var D=n-m;if(Math.abs(D)>120*Math.PI/180){var E=n,F=c,G=d;n=i&&m<n?m+120*Math.PI/180*1:m+120*Math.PI/180*-1,c=o+e*Math.cos(n),d=p+f*Math.sin(n),s=j(c,d,F,G,e,f,g,0,i,[n,E,o,p])}D=n-m;var H=Math.cos(m),I=Math.sin(m),J=Math.cos(n),K=Math.sin(n),L=Math.tan(D/4),M=4/3*e*L,N=4/3*f*L,O=[a,b],P=[a+M*I,b-N*H],Q=[c+M*K,d-N*J],R=[c,d];if(P[0]=2*O[0]-P[0],P[1]=2*O[1]-P[1],k)return[P,Q,R].concat(s);s=[P,Q,R].concat(s).join().split(",");var S=[],T=[];return s.forEach(function(a,b){b%2?T.push(q(s[b-1],s[b],r).y):T.push(q(s[b],s[b+1],r).x),6===T.length&&(S.push(T),T=[])}),S},k=function(a){return a.map(function(a){return{type:a.type,values:Array.prototype.slice.call(a.values)}})},l=function(a){var b=[],c=null,d=null,e=null,f=null,g=null,h=null,i=null;return a.forEach(function(a){if("M"===a.type){var k=a.values[0],l=a.values[1];b.push({type:"M",values:[k,l]}),f=h=k,g=i=l}else if("C"===a.type){var m=a.values[0],n=a.values[1],o=a.values[2],p=a.values[3];k=a.values[4],l=a.values[5],b.push({type:"C",values:[m,n,o,p,k,l]}),d=o,e=p,f=k,g=l}else if("L"===a.type)k=a.values[0],l=a.values[1],b.push({type:"L",values:[k,l]}),f=k,g=l;else if("H"===a.type)k=a.values[0],b.push({type:"L",values:[k,g]}),f=k;else if("V"===a.type)l=a.values[0],b.push({type:"L",values:[f,l]}),g=l;else if("S"===a.type)o=a.values[0],p=a.values[1],k=a.values[2],l=a.values[3],"C"===c||"S"===c?(q=f+(f-d),r=g+(g-e)):(q=f,r=g),b.push({type:"C",values:[q,r,o,p,k,l]}),d=o,e=p,f=k,g=l;else if("T"===a.type){k=a.values[0],l=a.values[1],"Q"===c||"T"===c?(m=f+(f-d),n=g+(g-e)):(m=f,n=g);var q=f+2*(m-f)/3,r=g+2*(n-g)/3,s=k+2*(m-k)/3,t=l+2*(n-l)/3;b.push({type:"C",values:[q,r,s,t,k,l]}),d=m,e=n,f=k,g=l}else if("Q"===a.type)m=a.values[0],n=a.values[1],k=a.values[2],l=a.values[3],q=f+2*(m-f)/3,r=g+2*(n-g)/3,s=k+2*(m-k)/3,t=l+2*(n-l)/3,b.push({type:"C",values:[q,r,s,t,k,l]}),d=m,e=n,f=k,g=l;else if("A"===a.type){var u=a.values[0],v=a.values[1],w=a.values[2],x=a.values[3],y=a.values[4];k=a.values[5],l=a.values[6],0===u||0===v?(b.push({type:"C",values:[f,g,k,l,k,l]}),f=k,g=l):f===k&&g===l||j(f,g,k,l,u,v,w,x,y).forEach(function(a){b.push({type:"C",values:a}),f=k,g=l})}else"Z"===a.type&&(b.push(a),f=h,g=i);c=a.type}),b};a.SVGPathElement.prototype.setAttribute=function(a,b){"d"===a&&(this[h]=null,this[i]=null),f.call(this,a,b)},a.SVGPathElement.prototype.removeAttribute=function(a,b){"d"===a&&(this[h]=null,this[i]=null),g.call(this,a)},a.SVGPathElement.prototype.getPathData=function(a){if(a&&a.normalize){if(this[i])return k(this[i]);this[h]?m=k(this[h]):(m=e(this.getAttribute("d")||""),this[h]=k(m));var b=l((c=[],j=g=f=d=null,m.forEach(function(a){var b=a.type;if("M"===b){var e=a.values[0],h=a.values[1];c.push({type:"M",values:[e,h]}),d=g=e,f=j=h}else if("m"===b)e=d+a.values[0],h=f+a.values[1],c.push({type:"M",values:[e,h]}),d=g=e,f=j=h;else if("L"===b)e=a.values[0],h=a.values[1],c.push({type:"L",values:[e,h]}),d=e,f=h;else if("l"===b)e=d+a.values[0],h=f+a.values[1],c.push({type:"L",values:[e,h]}),d=e,f=h;else if("C"===b){var i=a.values[0],k=a.values[1],l=a.values[2],m=a.values[3];e=a.values[4],h=a.values[5],c.push({type:"C",values:[i,k,l,m,e,h]}),d=e,f=h}else"c"===b?(i=d+a.values[0],k=f+a.values[1],l=d+a.values[2],m=f+a.values[3],e=d+a.values[4],h=f+a.values[5],c.push({type:"C",values:[i,k,l,m,e,h]}),d=e,f=h):"Q"===b?(i=a.values[0],k=a.values[1],e=a.values[2],h=a.values[3],c.push({type:"Q",values:[i,k,e,h]}),d=e,f=h):"q"===b?(i=d+a.values[0],k=f+a.values[1],e=d+a.values[2],h=f+a.values[3],c.push({type:"Q",values:[i,k,e,h]}),d=e,f=h):"A"===b?(e=a.values[5],h=a.values[6],c.push({type:"A",values:[a.values[0],a.values[1],a.values[2],a.values[3],a.values[4],e,h]}),d=e,f=h):"a"===b?(e=d+a.values[5],h=f+a.values[6],c.push({type:"A",values:[a.values[0],a.values[1],a.values[2],a.values[3],a.values[4],e,h]}),d=e,f=h):"H"===b?(e=a.values[0],c.push({type:"H",values:[e]}),d=e):"h"===b?(e=d+a.values[0],c.push({type:"H",values:[e]}),d=e):"V"===b?(h=a.values[0],c.push({type:"V",values:[h]}),f=h):"v"===b?(h=f+a.values[0],c.push({type:"V",values:[h]}),f=h):"S"===b?(l=a.values[0],m=a.values[1],e=a.values[2],h=a.values[3],c.push({type:"S",values:[l,m,e,h]}),d=e,f=h):"s"===b?(l=d+a.values[0],m=f+a.values[1],e=d+a.values[2],h=f+a.values[3],c.push({type:"S",values:[l,m,e,h]}),d=e,f=h):"T"===b?(e=a.values[0],h=a.values[1],c.push({type:"T",values:[e,h]}),d=e,f=h):"t"===b?(e=d+a.values[0],h=f+a.values[1],c.push({type:"T",values:[e,h]}),d=e,f=h):"Z"!==b&&"z"!==b||(c.push({type:"Z",values:[]}),d=g,f=j)}),c));return this[i]=k(b),b}if(this[h])return k(this[h]);var c,d,f,g,j,m=e(this.getAttribute("d")||"");return this[h]=k(m),m},a.SVGPathElement.prototype.setPathData=function(a){if(0===a.length)d?this.setAttribute("d",""):this.removeAttribute("d");else{for(var b="",c=0,e=a.length;c<e;c+=1){var f=a[c];0<c&&(b+=" "),b+=f.type,f.values&&0<f.values.length&&(b+=" "+f.values.join(" "))}this.setAttribute("d",b)}},a.SVGRectElement.prototype.getPathData=function(a){var b=this.x.baseVal.value,c=this.y.baseVal.value,d=this.width.baseVal.value,e=this.height.baseVal.value,f=this.hasAttribute("rx")?this.rx.baseVal.value:this.ry.baseVal.value,g=this.hasAttribute("ry")?this.ry.baseVal.value:this.rx.baseVal.value;d/2<f&&(f=d/2),e/2<g&&(g=e/2);var h=[{type:"M",values:[b+f,c]},{type:"H",values:[b+d-f]},{type:"A",values:[f,g,0,0,1,b+d,c+g]},{type:"V",values:[c+e-g]},{type:"A",values:[f,g,0,0,1,b+d-f,c+e]},{type:"H",values:[b+f]},{type:"A",values:[f,g,0,0,1,b,c+e-g]},{type:"V",values:[c+g]},{type:"A",values:[f,g,0,0,1,b+f,c]},{type:"Z",values:[]}];return h=h.filter(function(a){return"A"!==a.type||0!==a.values[0]&&0!==a.values[1]}),a&&!0===a.normalize&&(h=l(h)),h},a.SVGCircleElement.prototype.getPathData=function(a){var b=this.cx.baseVal.value,c=this.cy.baseVal.value,d=this.r.baseVal.value,e=[{type:"M",values:[b+d,c]},{type:"A",values:[d,d,0,0,1,b,c+d]},{type:"A",values:[d,d,0,0,1,b-d,c]},{type:"A",values:[d,d,0,0,1,b,c-d]},{type:"A",values:[d,d,0,0,1,b+d,c]},{type:"Z",values:[]}];return a&&!0===a.normalize&&(e=l(e)),e},a.SVGEllipseElement.prototype.getPathData=function(a){var b=this.cx.baseVal.value,c=this.cy.baseVal.value,d=this.rx.baseVal.value,e=this.ry.baseVal.value,f=[{type:"M",values:[b+d,c]},{type:"A",values:[d,e,0,0,1,b,c+e]},{type:"A",values:[d,e,0,0,1,b-d,c]},{type:"A",values:[d,e,0,0,1,b,c-e]},{type:"A",values:[d,e,0,0,1,b+d,c]},{type:"Z",values:[]}];return a&&!0===a.normalize&&(f=l(f)),f},a.SVGLineElement.prototype.getPathData=function(){return[{type:"M",values:[this.x1.baseVal.value,this.y1.baseVal.value]},{type:"L",values:[this.x2.baseVal.value,this.y2.baseVal.value]}]},a.SVGPolylineElement.prototype.getPathData=function(){for(var a=[],b=0;b<this.points.numberOfItems;b+=1){var c=this.points.getItem(b);a.push({type:0===b?"M":"L",values:[c.x,c.y]})}return a},a.SVGPolygonElement.prototype.getPathData=function(){for(var a=[],b=0;b<this.points.numberOfItems;b+=1){var c=this.points.getItem(b);a.push({type:0===b?"M":"L",values:[c.x,c.y]})}return a.push({type:"Z",values:[]}),a}}()},Na=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.r=function(a){Object.defineProperty(a,"__esModule",{value:!0})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){function d(){var a=void 0,b=void 0;j&&(i.call(window,j),j=null),g.forEach(function(b){b.event&&(b.listener(b.event),b.event=null,a=!0)}),a?(k=Date.now(),b=!0):Date.now()-k<f&&(b=!0),b&&(j=h.call(window,d))}function e(a){var b=-1;return g.some(function(c,d){return c.listener===a&&(b=d,!0)}),b}c.r(b);var f=500,g=[],h=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1e3/60)},i=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return clearTimeout(a)},j=void 0,k=Date.now(),l={add:function(a){var b=void 0;return-1===e(a)?(g.push(b={listener:a}),function(a){b.event=a,j||d()}):null},remove:function(a){var b;-1<(b=e(a))&&(g.splice(b,1),!g.length&&j&&(i.call(window,j),j=null))}};b.default=l}]).default,Oa={line_altColor:{iniValue:!1},line_color:{},line_colorTra:{iniValue:!1},line_strokeWidth:{},plug_enabled:{iniValue:!1},plug_enabledSE:{hasSE:!0,iniValue:!1},plug_plugSE:{hasSE:!0,iniValue:ha},plug_colorSE:{hasSE:!0},plug_colorTraSE:{hasSE:!0,iniValue:!1},plug_markerWidthSE:{hasSE:!0},plug_markerHeightSE:{hasSE:!0},lineOutline_enabled:{iniValue:!1},lineOutline_color:{},lineOutline_colorTra:{iniValue:!1},lineOutline_strokeWidth:{},lineOutline_inStrokeWidth:{},plugOutline_enabledSE:{hasSE:!0,iniValue:!1},plugOutline_plugSE:{hasSE:!0,iniValue:ha},plugOutline_colorSE:{hasSE:!0},plugOutline_colorTraSE:{hasSE:!0,iniValue:!1},plugOutline_strokeWidthSE:{hasSE:!0},plugOutline_inStrokeWidthSE:{hasSE:!0},position_socketXYSE:{hasSE:!0,hasProps:!0},position_plugOverheadSE:{hasSE:!0},position_path:{},position_lineStrokeWidth:{},position_socketGravitySE:{hasSE:!0},path_pathData:{},path_edge:{hasProps:!0},viewBox_bBox:{hasProps:!0},viewBox_plugBCircleSE:{hasSE:!0},lineMask_enabled:{iniValue:!1},lineMask_outlineMode:{iniValue:!1},lineMask_x:{},lineMask_y:{},lineOutlineMask_x:{},lineOutlineMask_y:{},maskBGRect_x:{},maskBGRect_y:{},capsMaskAnchor_enabledSE:{hasSE:!0,iniValue:!1},capsMaskAnchor_pathDataSE:{hasSE:!0},capsMaskAnchor_strokeWidthSE:{hasSE:!0},capsMaskMarker_enabled:{iniValue:!1},capsMaskMarker_enabledSE:{hasSE:!0,iniValue:!1},capsMaskMarker_plugSE:{hasSE:!0,iniValue:ha},capsMaskMarker_markerWidthSE:{hasSE:!0},capsMaskMarker_markerHeightSE:{hasSE:!0},caps_enabled:{iniValue:!1},attach_plugSideLenSE:{hasSE:!0},attach_plugBackLenSE:{hasSE:!0}},Pa={show_on:{},show_effect:{},show_animOptions:{},show_animId:{},show_inAnim:{}},Qa="fade",Ra=[],Sa={},Ta=0,Ua={},Va=0;return K={dash:{stats:{dash_len:{},dash_gap:{},dash_maxOffset:{}},anim:!0,defaultAnimOptions:{duration:1e3,timing:"linear"},optionsConf:[["type","len","number",null,null,null,function(a){return 0<a}],["type","gap","number",null,null,null,function(a){return 0<a}]],init:function(a){q(a,"apl_line_strokeWidth",K.dash.update),a.lineFace.style.strokeDashoffset=0,K.dash.update(a)},remove:function(a){var b=a.curStats;r(a,"apl_line_strokeWidth",K.dash.update),b.dash_animId&&(La.remove(b.dash_animId),b.dash_animId=null),a.lineFace.style.strokeDasharray="none",a.lineFace.style.strokeDashoffset=0,x(a.aplStats,K.dash.stats)},update:function(c){var d,e=c.curStats,f=c.aplStats,g=f.dash_options,h=!1;e.dash_len=g.len||2*f.line_strokeWidth,e.dash_gap=g.gap||f.line_strokeWidth,e.dash_maxOffset=e.dash_len+e.dash_gap,h=y(c,f,"dash_len",e.dash_len)||h,(h=y(c,f,"dash_gap",e.dash_gap)||h)&&(c.lineFace.style.strokeDasharray=f.dash_len+","+f.dash_gap),e.dash_animOptions?(h=y(c,f,"dash_maxOffset",e.dash_maxOffset),f.dash_animOptions&&(h||a(e.dash_animOptions,f.dash_animOptions))&&(e.dash_animId&&(d=La.stop(e.dash_animId),La.remove(e.dash_animId)),f.dash_animOptions=null),f.dash_animOptions||(e.dash_animId=La.add(function(a){return(1-a)*f.dash_maxOffset+"px"},function(a){c.lineFace.style.strokeDashoffset=a},e.dash_animOptions.duration,0,e.dash_animOptions.timing,!1,d),f.dash_animOptions=b(e.dash_animOptions))):f.dash_animOptions&&(e.dash_animId&&(La.remove(e.dash_animId),e.dash_animId=null),c.lineFace.style.strokeDashoffset=0,f.dash_animOptions=null)}},gradient:{stats:{gradient_colorSE:{hasSE:!0},gradient_pointSE:{hasSE:!0,hasProps:!0}},optionsConf:[["type","startColor","string","colorSE",0,null,null,!0],["type","endColor","string","colorSE",1,null,null,!0]],init:function(a){var b,c=a.baseWindow.document,d=a.defs,e=X+"-"+a._id+"-gradient";a.efc_gradient_gradient=b=d.appendChild(c.createElementNS(Ba,"linearGradient")),b.id=e,b.gradientUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,[b.x1,b.y1,b.x2,b.y2].forEach(function(a){a.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0)}),a.efc_gradient_stopSE=[0,1].map(function(b){var d=a.efc_gradient_gradient.appendChild(c.createElementNS(Ba,"stop"));try{d.offset.baseVal=b}catch(a){if(a.code!==DOMException.NO_MODIFICATION_ALLOWED_ERR)throw a;d.setAttribute("offset",b)}return d}),q(a,"cur_plug_colorSE",K.gradient.update),q(a,"apl_path",K.gradient.update),a.curStats.line_altColor=!0,a.lineFace.style.stroke="url(#"+e+")",K.gradient.update(a)},remove:function(a){a.efc_gradient_gradient&&(a.defs.removeChild(a.efc_gradient_gradient),a.efc_gradient_gradient=a.efc_gradient_stopSE=null),r(a,"cur_plug_colorSE",K.gradient.update),r(a,"apl_path",K.gradient.update),a.curStats.line_altColor=!1,a.lineFace.style.stroke=a.curStats.line_color,x(a.aplStats,K.gradient.stats)},update:function(a){var b,d,e=a.curStats,f=a.aplStats,g=f.gradient_options,h=a.pathList.animVal||a.pathList.baseVal;[0,1].forEach(function(a){e.gradient_colorSE[a]=g.colorSE[a]||e.plug_colorSE[a]}),d=h[0][0],e.gradient_pointSE[0]={x:d.x,y:d.y},d=(b=h[h.length-1])[b.length-1],e.gradient_pointSE[1]={x:d.x,y:d.y},[0,1].forEach(function(b){var d;y(a,f.gradient_colorSE,b,d=e.gradient_colorSE[b])&&(Ga?(d=c(d),a.efc_gradient_stopSE[b].style.stopColor=d[1],a.efc_gradient_stopSE[b].style.stopOpacity=d[0]):a.efc_gradient_stopSE[b].style.stopColor=d),["x","y"].forEach(function(c){(d=e.gradient_pointSE[b][c])!==f.gradient_pointSE[b][c]&&(a.efc_gradient_gradient[c+(b+1)].baseVal.value=f.gradient_pointSE[b][c]=d)})})}},dropShadow:{stats:{dropShadow_dx:{},dropShadow_dy:{},dropShadow_blur:{},dropShadow_color:{},dropShadow_opacity:{},dropShadow_x:{},dropShadow_y:{}},optionsConf:[["type","dx",null,null,null,2],["type","dy",null,null,null,4],["type","blur",null,null,null,3,function(a){return 0<=a}],["type","color",null,null,null,"#000",null,!0],["type","opacity",null,null,null,.8,function(a){return 0<=a&&a<=1}]],init:function(a){var b,c,d,e,f,g=a.baseWindow.document,h=a.defs,i=X+"-"+a._id+"-dropShadow",j=(b=g,c=i,f={},"boolean"!=typeof T&&(T=!!window.SVGFEDropShadowElement&&!Ga),f.elmsAppend=[f.elmFilter=d=b.createElementNS(Ba,"filter")],d.filterUnits.baseVal=SVGUnitTypes.SVG_UNIT_TYPE_USERSPACEONUSE,d.x.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),d.y.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),d.width.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),d.height.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,100),d.id=c,T?(f.elmOffset=f.elmBlur=e=d.appendChild(b.createElementNS(Ba,"feDropShadow")),f.styleFlood=e.style):(f.elmBlur=d.appendChild(b.createElementNS(Ba,"feGaussianBlur")),f.elmOffset=e=d.appendChild(b.createElementNS(Ba,"feOffset")),e.result.baseVal="offsetblur",e=d.appendChild(b.createElementNS(Ba,"feFlood")),f.styleFlood=e.style,(e=d.appendChild(b.createElementNS(Ba,"feComposite"))).in2.baseVal="offsetblur",e.operator.baseVal=SVGFECompositeElement.SVG_FECOMPOSITE_OPERATOR_IN,(e=d.appendChild(b.createElementNS(Ba,"feMerge"))).appendChild(b.createElementNS(Ba,"feMergeNode")),e.appendChild(b.createElementNS(Ba,"feMergeNode")).in1.baseVal="SourceGraphic"),f);["elmFilter","elmOffset","elmBlur","styleFlood","elmsAppend"].forEach(function(b){a["efc_dropShadow_"+b]=j[b]}),j.elmsAppend.forEach(function(a){h.appendChild(a)}),a.face.setAttribute("filter","url(#"+i+")"),q(a,"new_edge4viewBox",K.dropShadow.adjustEdge),K.dropShadow.update(a)},remove:function(a){var b=a.defs;a.efc_dropShadow_elmsAppend&&(a.efc_dropShadow_elmsAppend.forEach(function(a){b.removeChild(a)}),a.efc_dropShadow_elmFilter=a.efc_dropShadow_elmOffset=a.efc_dropShadow_elmBlur=a.efc_dropShadow_styleFlood=a.efc_dropShadow_elmsAppend=null),r(a,"new_edge4viewBox",K.dropShadow.adjustEdge),D(a,{}),a.face.removeAttribute("filter"),x(a.aplStats,K.dropShadow.stats)},update:function(a){var b,c,d=a.curStats,e=a.aplStats,f=e.dropShadow_options;d.dropShadow_dx=b=f.dx,y(a,e,"dropShadow_dx",b)&&(a.efc_dropShadow_elmOffset.dx.baseVal=b,c=!0),d.dropShadow_dy=b=f.dy,y(a,e,"dropShadow_dy",b)&&(a.efc_dropShadow_elmOffset.dy.baseVal=b,c=!0),d.dropShadow_blur=b=f.blur,y(a,e,"dropShadow_blur",b)&&(a.efc_dropShadow_elmBlur.setStdDeviation(b,b),c=!0),c&&D(a,{}),d.dropShadow_color=b=f.color,y(a,e,"dropShadow_color",b)&&(a.efc_dropShadow_styleFlood.floodColor=b),d.dropShadow_opacity=b=f.opacity,y(a,e,"dropShadow_opacity",b)&&(a.efc_dropShadow_styleFlood.floodOpacity=b)},adjustEdge:function(a,b){var c,d,e=a.curStats,f=a.aplStats;null!=e.dropShadow_dx&&(c=3*e.dropShadow_blur,(d={x1:b.x1-c+e.dropShadow_dx,y1:b.y1-c+e.dropShadow_dy,x2:b.x2+c+e.dropShadow_dx,y2:b.y2+c+e.dropShadow_dy}).x1<b.x1&&(b.x1=d.x1),d.y1<b.y1&&(b.y1=d.y1),d.x2>b.x2&&(b.x2=d.x2),d.y2>b.y2&&(b.y2=d.y2),["x","y"].forEach(function(c){var d,g="dropShadow_"+c;e[g]=d=b[c+"1"],y(a,f,g,d)&&(a.efc_dropShadow_elmFilter[c].baseVal.value=d)}))}}},Object.keys(K).forEach(function(a){var b=K[a],c=b.stats;c[a+"_enabled"]={iniValue:!1},c[a+"_options"]={hasProps:!0},b.anim&&(c[a+"_animOptions"]={},c[a+"_animId"]={})}),L={none:{defaultAnimOptions:{},init:function(a,b){var c=a.curStats;c.show_animId&&(La.remove(c.show_animId),c.show_animId=null),L.none.start(a,b)},start:function(a,b){L.none.stop(a,!0)},stop:function(a,b,c){var d=a.curStats;return c=null!=c?c:a.aplStats.show_on,d.show_inAnim=!1,b&&C(a,c),c?1:0}},fade:{defaultAnimOptions:{duration:300,timing:"linear"},init:function(a,b){var c=a.curStats,d=a.aplStats;c.show_animId&&La.remove(c.show_animId),c.show_animId=La.add(function(a){return a},function(b,c){c?L.fade.stop(a,!0):(a.svg.style.opacity=b+"",Da&&(t(a,a.svg),u(a)))},d.show_animOptions.duration,1,d.show_animOptions.timing,null,!1),L.fade.start(a,b)},start:function(a,b){var c,d=a.curStats;d.show_inAnim&&(c=La.stop(d.show_animId)),C(a,1),d.show_inAnim=!0,La.start(d.show_animId,!a.aplStats.show_on,null!=b?b:c)},stop:function(a,b,c){var d,e=a.curStats;return c=null!=c?c:a.aplStats.show_on,d=e.show_inAnim?La.stop(e.show_animId):c?1:0,e.show_inAnim=!1,b&&(a.svg.style.opacity=c?"":"0",C(a,c)),d}},draw:{defaultAnimOptions:{duration:500,timing:[.58,0,.42,1]},init:function(a,b){var c=a.curStats,d=a.aplStats,e=a.pathList.baseVal,f=o(e),g=f.segsLen,h=f.lenAll;c.show_animId&&La.remove(c.show_animId),c.show_animId=La.add(function(a){var b,c,d,f,j=-1;if(0===a)c=[[e[0][0],e[0][0]]];else if(1===a)c=e;else{for(b=h*a,c=[];b>=g[++j];)c.push(e[j]),b-=g[j];b&&(2===(d=e[j]).length?c.push([d[0],i(d[0],d[1],b/g[j])]):(f=k(d[0],d[1],d[2],d[3],m(d[0],d[1],d[2],d[3],b)),c.push([d[0],f.fromP1,f.fromP2,f])))}return c},function(b,c){c?L.draw.stop(a,!0):(a.pathList.animVal=b,D(a,{path:!0}))},d.show_animOptions.duration,1,d.show_animOptions.timing,null,!1),L.draw.start(a,b)},start:function(a,b){var c,d=a.curStats;d.show_inAnim&&(c=La.stop(d.show_animId)),C(a,1),d.show_inAnim=!0,q(a,"apl_position",L.draw.update),La.start(d.show_animId,!a.aplStats.show_on,null!=b?b:c)},stop:function(a,b,c){var d,e=a.curStats;return c=null!=c?c:a.aplStats.show_on,d=e.show_inAnim?La.stop(e.show_animId):c?1:0,e.show_inAnim=!1,b&&(a.pathList.animVal=c?null:[[a.pathList.baseVal[0][0],a.pathList.baseVal[0][0]]],D(a,{path:!0}),C(a,c)),d},update:function(a){r(a,"apl_position",L.draw.update),a.curStats.show_inAnim?L.draw.init(a,L.draw.stop(a)):a.aplStats.show_animOptions={}}}},function(){function a(a){return function(b){var c={};c[a]=b,this.setOptions(c)}}[["start","anchorSE",0],["end","anchorSE",1],["color","lineColor"],["size","lineSize"],["startSocketGravity","socketGravitySE",0],["endSocketGravity","socketGravitySE",1],["startPlugColor","plugColorSE",0],["endPlugColor","plugColorSE",1],["startPlugSize","plugSizeSE",0],["endPlugSize","plugSizeSE",1],["outline","lineOutlineEnabled"],["outlineColor","lineOutlineColor"],["outlineSize","lineOutlineSize"],["startPlugOutline","plugOutlineEnabledSE",0],["endPlugOutline","plugOutlineEnabledSE",1],["startPlugOutlineColor","plugOutlineColorSE",0],["endPlugOutlineColor","plugOutlineColorSE",1],["startPlugOutlineSize","plugOutlineSizeSE",0],["endPlugOutlineSize","plugOutlineSizeSE",1]].forEach(function(c){var d=c[0],e=c[1],f=c[2];Object.defineProperty(J.prototype,d,{get:function(){var a=null!=f?Sa[this._id].options[e][f]:e?Sa[this._id].options[e]:Sa[this._id].options[d];return null==a?oa:b(a)},set:a(d),enumerable:!0})}),[["path",ga],["startSocket",aa,"socketSE",0],["endSocket",aa,"socketSE",1],["startPlug",la,"plugSE",0],["endPlug",la,"plugSE",1]].forEach(function(b){var c=b[0],d=b[1],e=b[2],f=b[3];Object.defineProperty(J.prototype,c,{get:function(){var a,b=null!=f?Sa[this._id].options[e][f]:e?Sa[this._id].options[e]:Sa[this._id].options[c];return b?Object.keys(d).some(function(c){return d[c]===b&&(a=c,!0)})?a:new Error("It's broken"):oa},set:a(c),enumerable:!0})}),Object.keys(K).forEach(function(c){var d=K[c];Object.defineProperty(J.prototype,c,{get:function(){var a,e,f=Sa[this._id].options[c];return Ja(f)?(a=f,e=d.optionsConf.reduce(function(c,d){var e,f=d[0],g=d[1],h=d[2],i=d[3],j=d[4],k=null!=j?a[i][j]:i?a[i]:a[g];return c[g]="id"===f?k?Object.keys(h).some(function(a){return h[a]===k&&(e=a,!0)})?e:new Error("It's broken"):oa:null==k?oa:b(k),c},{}),d.anim&&(e.animation=b(a.animation)),e):f},set:a(c),enumerable:!0})}),["startLabel","endLabel","middleLabel"].forEach(function(b,c){Object.defineProperty(J.prototype,b,{get:function(){var a=Sa[this._id],b=a.options;return b.labelSEM[c]&&!a.optionIsAttach.labelSEM[c]?Ua[b.labelSEM[c]._id].text:b.labelSEM[c]||""},set:a(b),enumerable:!0})})}(),J.prototype.setOptions=function(a){return I(Sa[this._id],a),this},J.prototype.position=function(){return D(Sa[this._id],{position:!0}),this},J.prototype.remove=function(){var a=Sa[this._id],b=a.curStats;Object.keys(K).forEach(function(a){var c=a+"_animId";b[c]&&La.remove(b[c])}),b.show_animId&&La.remove(b.show_animId),a.attachments.slice().forEach(function(b){H(a,b)}),a.baseWindow&&a.svg&&a.baseWindow.document.body.removeChild(a.svg),delete Sa[this._id]},J.prototype.show=function(a,b){return F(Sa[this._id],!0,a,b),this},J.prototype.hide=function(a,b){return F(Sa[this._id],!1,a,b),this},P=function(a){a&&Ua[a._id]&&(a.boundTargets.slice().forEach(function(b){H(b.props,a,!0)}),a.conf.remove&&a.conf.remove(a),delete Ua[a._id])},N=function(){function a(a,c){var d,e={conf:a,curStats:{},aplStats:{},boundTargets:[]},f={};a.argOptions.every(function(a){return!(!c.length||("string"==typeof a.type?typeof c[0]!==a.type:"function"!=typeof a.type||!a.type(c[0]))||(f[a.optionName]=c.shift(),0))}),d=c.length&&Ja(c[0])?b(c[0]):{},Object.keys(f).forEach(function(a){d[a]=f[a]}),a.stats&&(x(e.curStats,a.stats),x(e.aplStats,a.stats)),Object.defineProperty(this,"_id",{value:++Va}),Object.defineProperty(this,"isRemoved",{get:function(){return!Ua[this._id]}}),e._id=this._id,a.init&&!a.init(e,d)||(Ua[this._id]=e)}return a.prototype.remove=function(){var a=this,b=Ua[a._id];b&&(b.boundTargets.slice().forEach(function(a){b.conf.removeOption(b,a)}),s(function(){var b=Ua[a._id];b&&(console.error("LeaderLineAttachment was not removed by removeOption"),P(b))}))},a}(),window.LeaderLineAttachment=N,O=function(a,b){return a instanceof N&&(!(a.isRemoved||b&&Ua[a._id].conf.type!==b)||null)},M={pointAnchor:{type:"anchor",argOptions:[{optionName:"element",type:d}],init:function(a,b){return a.element=M.pointAnchor.checkElement(b.element),a.x=M.pointAnchor.parsePercent(b.x,!0)||[.5,!0],a.y=M.pointAnchor.parsePercent(b.y,!0)||[.5,!0],!0},removeOption:function(a,b){var c=b.props,d={},e=a.element,f=c.options.anchorSE["start"===b.optionName?1:0];e===f&&(e=f===document.body?new N(M.pointAnchor,[e]):document.body),d[b.optionName]=e,I(c,d)},getBBoxNest:function(a,b){var c=g(a.element,b.baseWindow),d=c.width,e=c.height;return c.width=c.height=0,c.left=c.right=c.left+a.x[0]*(a.x[1]?d:1),c.top=c.bottom=c.top+a.y[0]*(a.y[1]?e:1),c},parsePercent:function(a,b){var c,d,e=!1;return Ka(a)?d=a:"string"==typeof a&&(c=Aa.exec(a))&&c[2]&&(e=0!=(d=parseFloat(c[1])/100)),null!=d&&(b||0<=d)?[d,e]:null},checkElement:function(a){if(null==a)a=document.body;else if(!d(a))throw new Error("`element` must be Element");return a}},areaAnchor:{type:"anchor",argOptions:[{optionName:"element",type:d},{optionName:"shape",type:"string"}],stats:{color:{},strokeWidth:{},elementWidth:{},elementHeight:{},elementLeft:{},elementTop:{},pathListRel:{},bBoxRel:{},pathData:{},viewBoxBBox:{hasProps:!0},dashLen:{},dashGap:{}},init:function(a,b){var c,d,e,f=[];return a.element=M.pointAnchor.checkElement(b.element),"string"==typeof b.color&&(a.color=b.color.trim()),"string"==typeof b.fillColor&&(a.fill=b.fillColor.trim()),Ka(b.size)&&0<=b.size&&(a.size=b.size),b.dash&&(a.dash=!0,Ka(b.dash.len)&&0<b.dash.len&&(a.dashLen=b.dash.len),Ka(b.dash.gap)&&0<b.dash.gap&&(a.dashGap=b.dash.gap)),"circle"===b.shape?a.shape=b.shape:"polygon"===b.shape&&Array.isArray(b.points)&&3<=b.points.length&&b.points.every(function(b){var c={};return!(!(c.x=M.pointAnchor.parsePercent(b[0],!0))||!(c.y=M.pointAnchor.parsePercent(b[1],!0))||(f.push(c),(c.x[1]||c.y[1])&&(a.hasRatio=!0),0))})?(a.shape=b.shape,a.points=f):(a.shape="rect",a.radius=Ka(b.radius)&&0<=b.radius?b.radius:0),"rect"!==a.shape&&"circle"!==a.shape||(a.x=M.pointAnchor.parsePercent(b.x,!0)||[-.05,!0],a.y=M.pointAnchor.parsePercent(b.y,!0)||[-.05,!0],a.width=M.pointAnchor.parsePercent(b.width)||[1.1,!0],a.height=M.pointAnchor.parsePercent(b.height)||[1.1,!0],(a.x[1]||a.y[1]||a.width[1]||a.height[1])&&(a.hasRatio=!0)),c=a.element.ownerDocument,a.svg=d=c.createElementNS(Ba,"svg"),d.className.baseVal=X+"-areaAnchor",d.viewBox.baseVal||d.setAttribute("viewBox","0 0 0 0"),a.path=d.appendChild(c.createElementNS(Ba,"path")),a.path.style.fill=a.fill||"none",a.isShown=!1,d.style.visibility="hidden",c.body.appendChild(d),A(e=c.defaultView),a.bodyOffset=z(e),a.updateColor=function(){var b,c=a.curStats,d=a.aplStats,e=a.boundTargets.length?a.boundTargets[0].props.curStats:null;c.color=b=a.color||(e?e.line_color:Ia.lineColor),y(a,d,"color",b)&&(a.path.style.stroke=b)},a.updateShow=function(){C(a,a.boundTargets.some(function(a){return!0===a.props.isShown}))},!0},bind:function(a,b){var c=b.props;return a.color||q(c,"cur_line_color",a.updateColor),q(c,"svgShow",a.updateShow),s(function(){a.updateColor(),a.updateShow()}),!0},unbind:function(a,b){var c=b.props;a.color||r(c,"cur_line_color",a.updateColor),r(c,"svgShow",a.updateShow),1<a.boundTargets.length&&s(function(){a.updateColor(),a.updateShow(),M.areaAnchor.update(a)&&a.boundTargets.forEach(function(a){D(a.props,{position:!0})})})},removeOption:function(a,b){M.pointAnchor.removeOption(a,b)},remove:function(a){a.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),a.boundTargets.forEach(function(b){M.areaAnchor.unbind(a,b)})),a.svg.parentNode.removeChild(a.svg)},getStrokeWidth:function(a,b){return M.areaAnchor.update(a)&&1<a.boundTargets.length&&s(function(){a.boundTargets.forEach(function(a){a.props!==b&&D(a.props,{position:!0})})}),a.curStats.strokeWidth},getPathData:function(a,b){var c=g(a.element,b.baseWindow);return n(a.curStats.pathListRel,function(a){a.x+=c.left,a.y+=c.top})},getBBoxNest:function(a,b){var c=g(a.element,b.baseWindow),d=a.curStats.bBoxRel;return{left:d.left+c.left,top:d.top+c.top,right:d.right+c.left,bottom:d.bottom+c.top,width:d.width,height:d.height}},update:function(a){var b,c,d,f,g,h,i,j,k,l,m,o,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L=a.curStats,M=a.aplStats,N=a.boundTargets.length?a.boundTargets[0].props.curStats:null,O={};if(O.strokeWidth=y(a,L,"strokeWidth",null!=a.size?a.size:N?N.line_strokeWidth:Ia.lineSize),b=e(a.element),O.elementWidth=y(a,L,"elementWidth",b.width),O.elementHeight=y(a,L,"elementHeight",b.height),O.elementLeft=y(a,L,"elementLeft",b.left),O.elementTop=y(a,L,"elementTop",b.top),O.strokeWidth||a.hasRatio&&(O.elementWidth||O.elementHeight)){switch(a.shape){case"rect":(x={left:a.x[0]*(a.x[1]?b.width:1),top:a.y[0]*(a.y[1]?b.height:1),width:a.width[0]*(a.width[1]?b.width:1),height:a.height[0]*(a.height[1]?b.height:1)}).right=x.left+x.width,x.bottom=x.top+x.height,C=L.strokeWidth/2,A=(B=Math.min(x.width,x.height))?B/2*Math.SQRT2+C:0,(z=a.radius?a.radius<=A?a.radius:A:0)?(E=z-(D=(z-C)/Math.SQRT2),G=z*ya,F=[{x:x.left-E,y:x.top+D},{x:x.left+D,y:x.top-E},{x:x.right-D,y:x.top-E},{x:x.right+E,y:x.top+D},{x:x.right+E,y:x.bottom-D},{x:x.right-D,y:x.bottom+E},{x:x.left+D,y:x.bottom+E},{x:x.left-E,y:x.bottom-D}],L.pathListRel=[[F[0],{x:F[0].x,y:F[0].y-G},{x:F[1].x-G,y:F[1].y},F[1]]],F[1].x!==F[2].x&&L.pathListRel.push([F[1],F[2]]),L.pathListRel.push([F[2],{x:F[2].x+G,y:F[2].y},{x:F[3].x,y:F[3].y-G},F[3]]),F[3].y!==F[4].y&&L.pathListRel.push([F[3],F[4]]),L.pathListRel.push([F[4],{x:F[4].x,y:F[4].y+G},{x:F[5].x+G,y:F[5].y},F[5]]),F[5].x!==F[6].x&&L.pathListRel.push([F[5],F[6]]),L.pathListRel.push([F[6],{x:F[6].x-G,y:F[6].y},{x:F[7].x,y:F[7].y+G},F[7]]),F[7].y!==F[0].y&&L.pathListRel.push([F[7],F[0]]),L.pathListRel.push([]),E=z-D+L.strokeWidth/2,F=[{x:x.left-E,y:x.top-E},{x:x.right+E,y:x.bottom+E}]):(E=L.strokeWidth/2,F=[{x:x.left-E,y:x.top-E},{x:x.right+E,y:x.bottom+E}],L.pathListRel=[[F[0],{x:F[1].x,y:F[0].y}],[{x:F[1].x,y:F[0].y},F[1]],[F[1],{x:F[0].x,y:F[1].y}],[]],F=[{x:x.left-L.strokeWidth,y:x.top-L.strokeWidth},{x:x.right+L.strokeWidth,y:x.bottom+L.strokeWidth}]),L.bBoxRel={left:F[0].x,top:F[0].y,right:F[1].x,bottom:F[1].y,width:F[1].x-F[0].x,height:F[1].y-F[0].y};break;case"circle":(i={left:a.x[0]*(a.x[1]?b.width:1),top:a.y[0]*(a.y[1]?b.height:1),width:a.width[0]*(a.width[1]?b.width:1),height:a.height[0]*(a.height[1]?b.height:1)}).width||i.height||(i.width=i.height=10),i.width||(i.width=i.height),i.height||(i.height=i.width),i.right=i.left+i.width,i.bottom=i.top+i.height,j=i.left+i.width/2,k=i.top+i.height/2,r=L.strokeWidth/2,s=i.width/2,t=i.height/2,l=s*Math.SQRT2+r,m=t*Math.SQRT2+r,o=l*ya,q=m*ya,w=[{x:j-l,y:k},{x:j,y:k-m},{x:j+l,y:k},{x:j,y:k+m}],L.pathListRel=[[w[0],{x:w[0].x,y:w[0].y-q},{x:w[1].x-o,y:w[1].y},w[1]],[w[1],{x:w[1].x+o,y:w[1].y},{x:w[2].x,y:w[2].y-q},w[2]],[w[2],{x:w[2].x,y:w[2].y+q},{x:w[3].x+o,y:w[3].y},w[3]],[w[3],{x:w[3].x-o,y:w[3].y},{x:w[0].x,y:w[0].y+q},w[0]],[]],u=l-s+L.strokeWidth/2,v=m-t+L.strokeWidth/2,w=[{x:i.left-u,y:i.top-v},{x:i.right+u,y:i.bottom+v}],L.bBoxRel={left:w[0].x,top:w[0].y,right:w[1].x,bottom:w[1].y,width:w[1].x-w[0].x,height:w[1].y-w[0].y};break;case"polygon":a.points.forEach(function(a){var c=a.x[0]*(a.x[1]?b.width:1),e=a.y[0]*(a.y[1]?b.height:1);d?(c<d.left&&(d.left=c),c>d.right&&(d.right=c),e<d.top&&(d.top=e),e>d.bottom&&(d.bottom=e)):d={left:c,right:c,top:e,bottom:e},f?L.pathListRel.push([f,{x:c,y:e}]):L.pathListRel=[],f={x:c,y:e}}),L.pathListRel.push([]),g=L.strokeWidth/2,h=[{x:d.left-g,y:d.top-g},{x:d.right+g,y:d.bottom+g}],L.bBoxRel={left:h[0].x,top:h[0].y,right:h[1].x,bottom:h[1].y,width:h[1].x-h[0].x,height:h[1].y-h[0].y}}O.pathListRel=O.bBoxRel=!0}return(O.pathListRel||O.elementLeft||O.elementTop)&&(L.pathData=n(L.pathListRel,function(a){a.x+=b.left,a.y+=b.top})),y(a,M,"strokeWidth",c=L.strokeWidth)&&(a.path.style.strokeWidth=c+"px"),p(c=L.pathData,M.pathData)&&(a.path.setPathData(c),M.pathData=c,O.pathData=!0),a.dash&&(!O.pathData&&(!O.strokeWidth||a.dashLen&&a.dashGap)||(L.dashLen=a.dashLen||2*L.strokeWidth,L.dashGap=a.dashGap||L.strokeWidth),O.dash=y(a,M,"dashLen",L.dashLen)||O.dash,O.dash=y(a,M,"dashGap",L.dashGap)||O.dash,O.dash&&(a.path.style.strokeDasharray=M.dashLen+","+M.dashGap)),H=L.viewBoxBBox,I=M.viewBoxBBox,J=a.svg.viewBox.baseVal,K=a.svg.style,H.x=L.bBoxRel.left+b.left,H.y=L.bBoxRel.top+b.top,H.width=L.bBoxRel.width,H.height=L.bBoxRel.height,["x","y","width","height"].forEach(function(b){(c=H[b])!==I[b]&&(J[b]=I[b]=c,K[pa[b]]=c+("x"===b||"y"===b?a.bodyOffset[b]:0)+"px")}),O.strokeWidth||O.pathListRel||O.bBoxRel}},mouseHoverAnchor:{type:"anchor",argOptions:[{optionName:"element",type:d},{optionName:"showEffectName",type:"string"}],style:{backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cG9seWdvbiBwb2ludHM9IjI0LDAgMCw4IDgsMTEgMCwxOSA1LDI0IDEzLDE2IDE2LDI0IiBmaWxsPSJjb3JhbCIvPjwvc3ZnPg==')",backgroundSize:"",backgroundRepeat:"no-repeat",backgroundColor:"#f8f881",cursor:"default"},hoverStyle:{backgroundImage:"none",backgroundColor:"#fadf8f"},padding:{top:1,right:15,bottom:1,left:2},minHeight:15,backgroundPosition:{right:2,top:2},backgroundSize:{width:12,height:12},dirKeys:[["top","Top"],["right","Right"],["bottom","Bottom"],["left","Left"]],init:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=M.mouseHoverAnchor,o={};if(a.element=M.pointAnchor.checkElement(b.element),j=a.element,!((l=j.ownerDocument)&&(k=l.defaultView)&&k.HTMLElement&&j instanceof k.HTMLElement))throw new Error("`element` must be HTML element");return n.style.backgroundSize=n.backgroundSize.width+"px "+n.backgroundSize.height+"px",["style","hoverStyle"].forEach(function(b){var c=n[b];a[b]=Object.keys(c).reduce(function(a,b){return a[b]=c[b],a},{})}),"inline"===(c=a.element.ownerDocument.defaultView.getComputedStyle(a.element,"")).display?a.style.display="inline-block":"none"===c.display&&(a.style.display="block"),M.mouseHoverAnchor.dirKeys.forEach(function(b){var d=b[0],e="padding"+b[1];parseFloat(c[e])<n.padding[d]&&(a.style[e]=n.padding[d]+"px")}),a.style.display&&(f=a.element.style.display,a.element.style.display=a.style.display),M.mouseHoverAnchor.dirKeys.forEach(function(b){var c="padding"+b[1];a.style[c]&&(o[c]=a.element.style[c],a.element.style[c]=a.style[c])}),(e=a.element.getBoundingClientRect()).height<n.minHeight&&(Da?(m=n.minHeight,"content-box"===c.boxSizing?m-=parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom):"padding-box"===c.boxSizing&&(m-=parseFloat(c.borderTopWidth)+parseFloat(c.borderBottomWidth)),a.style.height=m+"px"):a.style.height=parseFloat(c.height)+(n.minHeight-e.height)+"px"),a.style.backgroundPosition=Ga?e.width-n.backgroundSize.width-n.backgroundPosition.right+"px "+n.backgroundPosition.top+"px":"right "+n.backgroundPosition.right+"px top "+n.backgroundPosition.top+"px",a.style.display&&(a.element.style.display=f),M.mouseHoverAnchor.dirKeys.forEach(function(b){var c="padding"+b[1];a.style[c]&&(a.element.style[c]=o[c])}),["style","hoverStyle"].forEach(function(c){var d=a[c],e=b[c];Ja(e)&&Object.keys(e).forEach(function(a){"string"==typeof e[a]||Ka(e[a])?d[a]=e[a]:null==e[a]&&delete d[a]})}),"function"==typeof b.onSwitch&&(i=b.onSwitch),b.showEffectName&&L[b.showEffectName]&&(a.showEffectName=g=b.showEffectName),h=b.animOptions,a.elmStyle=d=a.element.style,a.mouseenter=function(b){a.hoverStyleSave=n.getStyles(d,Object.keys(a.hoverStyle)),n.setStyles(d,a.hoverStyle),a.boundTargets.forEach(function(a){F(a.props,!0,g,h)}),i&&i(b)},a.mouseleave=function(b){n.setStyles(d,a.hoverStyleSave),a.boundTargets.forEach(function(a){F(a.props,!1,g,h)}),i&&i(b)},!0},bind:function(a,b){var c,d,e,f,g;return b.props.svg?M.mouseHoverAnchor.llShow(b.props,!1,a.showEffectName):s(function(){M.mouseHoverAnchor.llShow(b.props,!1,a.showEffectName)}),a.enabled||(a.styleSave=M.mouseHoverAnchor.getStyles(a.elmStyle,Object.keys(a.style)),M.mouseHoverAnchor.setStyles(a.elmStyle,a.style),a.removeEventListener=(c=a.element,d=a.mouseenter,e=a.mouseleave,"onmouseenter"in c&&"onmouseleave"in c?(c.addEventListener("mouseenter",d,!1),c.addEventListener("mouseleave",e,!1),function(){c.removeEventListener("mouseenter",d,!1),c.removeEventListener("mouseleave",e,!1)}):(console.warn("mouseenter and mouseleave events polyfill is enabled."),f=function(a){a.relatedTarget&&(a.relatedTarget===this||this.compareDocumentPosition(a.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||d.apply(this,arguments)},c.addEventListener("mouseover",f),g=function(a){a.relatedTarget&&(a.relatedTarget===this||this.compareDocumentPosition(a.relatedTarget)&Node.DOCUMENT_POSITION_CONTAINED_BY)||e.apply(this,arguments)},c.addEventListener("mouseout",g),function(){c.removeEventListener("mouseover",f,!1),c.removeEventListener("mouseout",g,!1)})),a.enabled=!0),!0},unbind:function(a,b){a.enabled&&a.boundTargets.length<=1&&(a.removeEventListener(),M.mouseHoverAnchor.setStyles(a.elmStyle,a.styleSave),a.enabled=!1),M.mouseHoverAnchor.llShow(b.props,!0,a.showEffectName)},removeOption:function(a,b){M.pointAnchor.removeOption(a,b)},remove:function(a){a.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),a.boundTargets.forEach(function(b){M.mouseHoverAnchor.unbind(a,b)}))},getBBoxNest:function(a,b){return g(a.element,b.baseWindow)},llShow:function(a,b,c){L[c||a.curStats.show_effect].stop(a,!0,b),a.aplStats.show_on=b},getStyles:function(a,b){return b.reduce(function(b,c){return b[c]=a[c],b},{})},setStyles:function(a,b){Object.keys(b).forEach(function(c){a[c]=b[c]})}},captionLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},x:{},y:{}},textStyleProps:["fontFamily","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","kerning","letterSpacing","wordSpacing","textDecoration"],init:function(a,b){return"string"==typeof b.text&&(a.text=b.text.trim()),!!a.text&&("string"==typeof b.color&&(a.color=b.color.trim()),a.outlineColor="string"==typeof b.outlineColor?b.outlineColor.trim():"#fff",Array.isArray(b.offset)&&Ka(b.offset[0])&&Ka(b.offset[1])&&(a.offset={x:b.offset[0],y:b.offset[1]}),Ka(b.lineOffset)&&(a.lineOffset=b.lineOffset),M.captionLabel.textStyleProps.forEach(function(c){null!=b[c]&&(a[c]=b[c])}),a.updateColor=function(b){M.captionLabel.updateColor(a,b)},a.updateSocketXY=function(b){var c,d,e,f,g=a.curStats,h=a.aplStats,i=b.curStats,j=i.position_socketXYSE[a.socketIndex];null!=j.x&&(a.offset?(g.x=j.x+a.offset.x,g.y=j.y+a.offset.y):(c=a.height/2,d=Math.max(i.attach_plugSideLenSE[a.socketIndex]||0,i.line_strokeWidth/2),e=i.position_socketXYSE[a.socketIndex?0:1],j.socketId===_||j.socketId===Z?(g.x=j.socketId===_?j.x-c-a.width:j.x+c,g.y=e.y<j.y?j.y+d+c:j.y-d-c-a.height):(g.x=e.x<j.x?j.x+d+c:j.x-d-c-a.width,g.y=j.socketId===Y?j.y-c-a.height:j.y+c)),y(a,h,"x",f=g.x)&&(a.elmPosition.x.baseVal.getItem(0).value=f),y(a,h,"y",f=g.y)&&(a.elmPosition.y.baseVal.getItem(0).value=f+a.height))},a.updatePath=function(b){var c,d,e=a.curStats,f=a.aplStats,g=b.pathList.animVal||b.pathList.baseVal;g&&(c=M.captionLabel.getMidPoint(g,a.lineOffset),e.x=c.x-a.width/2,e.y=c.y-a.height/2,y(a,f,"x",d=e.x)&&(a.elmPosition.x.baseVal.getItem(0).value=d),y(a,f,"y",d=e.y)&&(a.elmPosition.y.baseVal.getItem(0).value=d+a.height))},a.updateShow=function(b){M.captionLabel.updateShow(a,b)},Ga&&(a.adjustEdge=function(b,c){var d=a.curStats;null!=d.x&&M.captionLabel.adjustEdge(c,{x:d.x,y:d.y,width:a.width,height:a.height},a.strokeWidth/2)}),!0)},updateColor:function(a,b){var c,d=a.curStats,e=a.aplStats,f=b.curStats;d.color=c=a.color||f.line_color,y(a,e,"color",c)&&(a.styleFill.fill=c)},updateShow:function(a,b){var c=!0===b.isShown;c!==a.isShown&&(a.styleShow.visibility=c?"":"hidden",a.isShown=c)},adjustEdge:function(a,b,c){var d={x1:b.x-c,y1:b.y-c,x2:b.x+b.width+c,y2:b.y+b.height+c};d.x1<a.x1&&(a.x1=d.x1),d.y1<a.y1&&(a.y1=d.y1),d.x2>a.x2&&(a.x2=d.x2),d.y2>a.y2&&(a.y2=d.y2)},newText:function(a,b,c,d,e){var f,g,h,i,j,k;return(f=b.createElementNS(Ba,"text")).textContent=a,[f.x,f.y].forEach(function(a){var b=c.createSVGLength();b.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),a.baseVal.initialize(b)}),"boolean"!=typeof S&&(S="paintOrder"in f.style),e&&!S?(h=b.createElementNS(Ba,"defs"),f.id=d,h.appendChild(f),(j=(g=b.createElementNS(Ba,"g")).appendChild(b.createElementNS(Ba,"use"))).href.baseVal="#"+d,(i=g.appendChild(b.createElementNS(Ba,"use"))).href.baseVal="#"+d,(k=j.style).strokeLinejoin="round",{elmPosition:f,styleText:f.style,styleFill:i.style,styleStroke:k,styleShow:g.style,elmsAppend:[h,g]}):(k=f.style,e&&(k.strokeLinejoin="round",k.paintOrder="stroke"),{elmPosition:f,styleText:k,styleFill:k,styleStroke:e?k:null,styleShow:k,elmsAppend:[f]})},getMidPoint:function(a,b){var c,d,e,f=o(a),g=f.segsLen,h=f.lenAll,j=-1;if((c=h/2+(b||0))<=0)return 2===(d=a[0]).length?i(d[0],d[1],0):k(d[0],d[1],d[2],d[3],0);if(h<=c)return 2===(d=a[a.length-1]).length?i(d[0],d[1],1):k(d[0],d[1],d[2],d[3],1);for(e=[];c>g[++j];)e.push(a[j]),c-=g[j];return 2===(d=a[j]).length?i(d[0],d[1],c/g[j]):k(d[0],d[1],d[2],d[3],m(d[0],d[1],d[2],d[3],c))},initSvg:function(a,b){var c,d,e=M.captionLabel.newText(a.text,b.baseWindow.document,b.svg,X+"-captionLabel-"+a._id,a.outlineColor);["elmPosition","styleFill","styleShow","elmsAppend"].forEach(function(b){a[b]=e[b]}),a.isShown=!1,a.styleShow.visibility="hidden",M.captionLabel.textStyleProps.forEach(function(b){null!=a[b]&&(e.styleText[b]=a[b])}),e.elmsAppend.forEach(function(a){b.svg.appendChild(a)}),c=e.elmPosition.getBBox(),a.width=c.width,a.height=c.height,a.outlineColor&&(d=10<(d=c.height/9)?10:d<2?2:d,e.styleStroke.strokeWidth=d+"px",e.styleStroke.stroke=a.outlineColor),a.strokeWidth=d||0,x(a.aplStats,M.captionLabel.stats),a.updateColor(b),a.refSocketXY?a.updateSocketXY(b):a.updatePath(b),Ga&&D(b,{}),a.updateShow(b)},bind:function(a,b){var c=b.props;return a.color||q(c,"cur_line_color",a.updateColor),(a.refSocketXY="startLabel"===b.optionName||"endLabel"===b.optionName)?(a.socketIndex="startLabel"===b.optionName?0:1,q(c,"apl_position",a.updateSocketXY),a.offset||(q(c,"cur_attach_plugSideLenSE",a.updateSocketXY),q(c,"cur_line_strokeWidth",a.updateSocketXY))):q(c,"apl_path",a.updatePath),q(c,"svgShow",a.updateShow),Ga&&q(c,"new_edge4viewBox",a.adjustEdge),M.captionLabel.initSvg(a,c),!0},unbind:function(a,b){var c=b.props;a.elmsAppend&&(a.elmsAppend.forEach(function(a){c.svg.removeChild(a)}),a.elmPosition=a.styleFill=a.styleShow=a.elmsAppend=null),x(a.curStats,M.captionLabel.stats),x(a.aplStats,M.captionLabel.stats),a.color||r(c,"cur_line_color",a.updateColor),a.refSocketXY?(r(c,"apl_position",a.updateSocketXY),a.offset||(r(c,"cur_attach_plugSideLenSE",a.updateSocketXY),r(c,"cur_line_strokeWidth",a.updateSocketXY))):r(c,"apl_path",a.updatePath),r(c,"svgShow",a.updateShow),Ga&&(r(c,"new_edge4viewBox",a.adjustEdge),D(c,{}))},removeOption:function(a,b){var c=b.props,d={};d[b.optionName]="",I(c,d)},remove:function(a){a.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),a.boundTargets.forEach(function(b){M.captionLabel.unbind(a,b)}))}},pathLabel:{type:"label",argOptions:[{optionName:"text",type:"string"}],stats:{color:{},startOffset:{},pathData:{}},init:function(a,b){return"string"==typeof b.text&&(a.text=b.text.trim()),!!a.text&&("string"==typeof b.color&&(a.color=b.color.trim()),a.outlineColor="string"==typeof b.outlineColor?b.outlineColor.trim():"#fff",Ka(b.lineOffset)&&(a.lineOffset=b.lineOffset),M.captionLabel.textStyleProps.forEach(function(c){null!=b[c]&&(a[c]=b[c])}),a.updateColor=function(b){M.captionLabel.updateColor(a,b)},a.updatePath=function(b){var c,d=a.curStats,e=a.aplStats,f=b.curStats,g=b.pathList.animVal||b.pathList.baseVal;g&&(d.pathData=c=M.pathLabel.getOffsetPathData(g,f.line_strokeWidth/2+a.strokeWidth/2+a.height/4,1.25*a.height),p(c,e.pathData)&&(a.elmPath.setPathData(c),e.pathData=c,a.bBox=a.elmPosition.getBBox(),a.updateStartOffset(b)))},a.updateStartOffset=function(b){var c,d,e,f,g=a.curStats,i=a.aplStats,j=b.curStats;g.pathData&&(2!==a.semIndex||a.lineOffset)&&(c=g.pathData.reduce(function(a,b){var c,d=b.values;switch(b.type){case"M":f={x:d[0],y:d[1]};break;case"L":c={x:d[0],y:d[1]},f&&(a+=h(f,c)),f=c;break;case"C":c={x:d[4],y:d[5]},f&&(a+=l(f,{x:d[0],y:d[1]},{x:d[2],y:d[3]},c)),f=c}return a},0),e=0===a.semIndex?0:1===a.semIndex?c:c/2,2!==a.semIndex&&(d=Math.max(j.attach_plugBackLenSE[a.semIndex]||0,j.line_strokeWidth/2)+a.strokeWidth/2+a.height/4,e=(e+=0===a.semIndex?d:-d)<0?0:c<e?c:e),a.lineOffset&&(e=(e+=a.lineOffset)<0?0:c<e?c:e),g.startOffset=e,y(a,i,"startOffset",e)&&(a.elmOffset.startOffset.baseVal.value=e))},a.updateShow=function(b){M.captionLabel.updateShow(a,b)},Ga&&(a.adjustEdge=function(b,c){a.bBox&&M.captionLabel.adjustEdge(c,a.bBox,a.strokeWidth/2)}),!0)},getOffsetPathData:function(a,b,c){function d(a,b){return Math.abs(a.x-b.x)<g&&Math.abs(a.y-b.y)<g}var e,f,g=3,i=[];return a.forEach(function(a){var c,f,g,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D;2===a.length?(A=a[0],B=a[1],C=b,D=Math.atan2(A.y-B.y,B.x-A.x)+.5*Math.PI,c=[{x:A.x+Math.cos(D)*C,y:A.y+Math.sin(D)*C*-1},{x:B.x+Math.cos(D)*C,y:B.y+Math.sin(D)*C*-1}],e?(g=e.points,0<=(m=Math.atan2(g[1].y-g[0].y,g[0].x-g[1].x)-Math.atan2(a[0].y-a[1].y,a[1].x-a[0].x))&&m<=Math.PI?f={type:"line",points:c,inside:!0}:(o=j(g[0],g[1],b),n=j(c[1],c[0],b),q=g[0],s=n,t=c[1],u=(r=o).x-q.x,v=r.y-q.y,w=t.x-s.x,x=t.y-s.y,y=(-v*(q.x-s.x)+u*(q.y-s.y))/(-w*v+u*x),z=(w*(q.y-s.y)-x*(q.x-s.x))/(-w*v+u*x),(p=0<=y&&y<=1&&0<=z&&z<=1?{x:q.x+z*u,y:q.y+z*v}:null)?f={type:"line",points:[g[1]=p,c[1]]}:(g[1]=d(n,o)?n:o,f={type:"line",points:[n,c[1]]}),e.len=h(g[0],g[1]))):f={type:"line",points:c},f.len=h(f.points[0],f.points[1]),i.push(e=f)):(i.push({type:"cubic",points:function(a,b,c,d,e,f){for(var g,h,i=l(a,b,c,d)/f,j=1/(f<e?i*(e/f):i),m=[],n=0;h=(90-(g=k(a,b,c,d,n)).angle)*(Math.PI/180),m.push({x:g.x+Math.cos(h)*e,y:g.y+Math.sin(h)*e*-1}),!(1<=n);)1<(n+=j)&&(n=1);return m}(a[0],a[1],a[2],a[3],b,16)}),e=null)}),e=null,i.forEach(function(a){var d;"line"===a.type?(a.inside&&(e.len>b?((d=e.points)[1]=j(d[0],d[1],-b),e.len=h(d[0],d[1])):(e.points=null,e.len=0),a.len>b+c?((d=a.points)[0]=j(d[1],d[0],-(b+c)),a.len=h(d[0],d[1])):(a.points=null,a.len=0)),e=a):e=null}),i.reduce(function(a,b){var c=b.points;return c&&(f&&d(c[0],f)||a.push({type:"M",values:[c[0].x,c[0].y]}),"line"===b.type?a.push({type:"L",values:[c[1].x,c[1].y]}):(c.shift(),c.forEach(function(b){a.push({type:"L",values:[b.x,b.y]})})),f=c[c.length-1]),a},[])},newText:function(a,b,c,d){var e,f,g,h,i,j,k,l,m,n;return(h=(g=b.createElementNS(Ba,"defs")).appendChild(b.createElementNS(Ba,"path"))).id=e=c+"-path",(j=(i=b.createElementNS(Ba,"text")).appendChild(b.createElementNS(Ba,"textPath"))).href.baseVal="#"+e,j.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX,0),j.textContent=a,"boolean"!=typeof S&&(S="paintOrder"in i.style),d&&!S?(i.id=f=c+"-text",g.appendChild(i),(m=(k=b.createElementNS(Ba,"g")).appendChild(b.createElementNS(Ba,"use"))).href.baseVal="#"+f,(l=k.appendChild(b.createElementNS(Ba,"use"))).href.baseVal="#"+f,(n=m.style).strokeLinejoin="round",{elmPosition:i,elmPath:h,elmOffset:j,styleText:i.style,styleFill:l.style,styleStroke:n,styleShow:k.style,elmsAppend:[g,k]}):(n=i.style,d&&(n.strokeLinejoin="round",n.paintOrder="stroke"),{elmPosition:i,elmPath:h,elmOffset:j,styleText:n,styleFill:n,styleStroke:d?n:null,styleShow:n,elmsAppend:[g,i]})},initSvg:function(a,b){var c,d,e=M.pathLabel.newText(a.text,b.baseWindow.document,X+"-pathLabel-"+a._id,a.outlineColor);["elmPosition","elmPath","elmOffset","styleFill","styleShow","elmsAppend"].forEach(function(b){a[b]=e[b]}),a.isShown=!1,a.styleShow.visibility="hidden",M.captionLabel.textStyleProps.forEach(function(b){null!=a[b]&&(e.styleText[b]=a[b])}),e.elmsAppend.forEach(function(a){b.svg.appendChild(a)}),e.elmPath.setPathData([{type:"M",values:[0,100]},{type:"h",values:[100]}]),c=e.elmPosition.getBBox(),e.styleText.textAnchor=["start","end","middle"][a.semIndex],2!==a.semIndex||a.lineOffset||e.elmOffset.startOffset.baseVal.newValueSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PERCENTAGE,50),a.height=c.height,a.outlineColor&&(d=10<(d=c.height/9)?10:d<2?2:d,e.styleStroke.strokeWidth=d+"px",e.styleStroke.stroke=a.outlineColor),a.strokeWidth=d||0,x(a.aplStats,M.pathLabel.stats),a.updateColor(b),a.updatePath(b),a.updateStartOffset(b),Ga&&D(b,{}),a.updateShow(b)},bind:function(a,b){var c=b.props;return a.color||q(c,"cur_line_color",a.updateColor),q(c,"cur_line_strokeWidth",a.updatePath),q(c,"apl_path",a.updatePath),a.semIndex="startLabel"===b.optionName?0:"endLabel"===b.optionName?1:2,(2!==a.semIndex||a.lineOffset)&&q(c,"cur_attach_plugBackLenSE",a.updateStartOffset),q(c,"svgShow",a.updateShow),Ga&&q(c,"new_edge4viewBox",a.adjustEdge),M.pathLabel.initSvg(a,c),!0},unbind:function(a,b){var c=b.props;a.elmsAppend&&(a.elmsAppend.forEach(function(a){c.svg.removeChild(a)}),a.elmPosition=a.elmPath=a.elmOffset=a.styleFill=a.styleShow=a.elmsAppend=null),x(a.curStats,M.pathLabel.stats),x(a.aplStats,M.pathLabel.stats),a.color||r(c,"cur_line_color",a.updateColor),r(c,"cur_line_strokeWidth",a.updatePath),r(c,"apl_path",a.updatePath),(2!==a.semIndex||a.lineOffset)&&r(c,"cur_attach_plugBackLenSE",a.updateStartOffset),r(c,"svgShow",a.updateShow),Ga&&(r(c,"new_edge4viewBox",a.adjustEdge),D(c,{}))},removeOption:function(a,b){var c=b.props,d={};d[b.optionName]="",I(c,d)},remove:function(a){a.boundTargets.length&&(console.error("LeaderLineAttachment was not unbound by remove"),a.boundTargets.forEach(function(b){M.pathLabel.unbind(a,b)}))}}},Object.keys(M).forEach(function(a){J[a]=function(){return new N(M[a],Array.prototype.slice.call(arguments))}}),J.positionByWindowResize=!0,window.addEventListener("resize",Na.add(function(){J.positionByWindowResize&&Object.keys(Sa).forEach(function(a){D(Sa[a],{position:!0})})}),!1),J}();b.LeaderLine=c}},b[6]={value:function(a,b){var c=function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{enumerable:!0,get:d})},b.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},b.t=function(a,c){if(1&c&&(a=b(a)),8&c)return a;if(4&c&&"object"==typeof a&&a&&a.__esModule)return a;var d=Object.create(null);if(b.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:a}),2&c&&"string"!=typeof a)for(var e in a)b.d(d,e,function(b){return a[b]}.bind(null,e));return d},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=0)}([function(a,b,c){"use strict";function d(){var a=void 0,b=void 0;T&&(R.call(window,T),T=null),P.forEach(function(b){var c;(c=b.event)&&(b.event=null,b.listener(c),a=!0)}),a?(S=Date.now(),b=!0):Date.now()-S<O&&(b=!0),b&&(T=Q.call(window,d))}function e(a){var b=-1;return P.some(function(c,d){return c.listener===a&&(b=d,!0)}),b}function f(a,b,c,d){a.addEventListener(b,c,W?d:d.capture)}function g(a,b){if(null!=a&&null!=b)for(var c=0;c<a.length;c++)if(a[c].identifier===b)return a[c];return null}function h(a){return a&&"number"==typeof a.clientX&&"number"==typeof a.clientY}function i(a){a.preventDefault()}function j(a){return a.substr(0,1).toUpperCase()+a.substr(1)}function k(a){if((a=aa(a))&&null==da[a]){var b=_();if(null!=b[a])da[a]=a;else{var c=j(a);Z.some(function(d){var e=d+c;return null!=b[e]&&(da[a]=e,!0)})||(da[a]=!1)}}return da[a]||void 0}function l(a){return(a+"").trim()}function m(a,b){b.setAttribute("class",a.join(" "))}function n(a){return!n.ignoreNative&&a.classList||function(){var b=(a.getAttribute("class")||"").trim().split(/\s+/).filter(function(a){return!!a}),c={length:b.length,item:function(a){return b[a]},contains:function(a){return-1!==b.indexOf(l(a))},add:function(){return function(a,b,c){c.filter(function(b){return!(!(b=l(b))||-1!==a.indexOf(b)||(a.push(b),0))}).length&&m(a,b)}(b,a,Array.prototype.slice.call(arguments)),n.methodChain?c:void 0},remove:function(){return function(a,b,c){c.filter(function(b){var c=void 0;return!(!(b=l(b))||-1===(c=a.indexOf(b))||(a.splice(c,1),0))}).length&&m(a,b)}(b,a,Array.prototype.slice.call(arguments)),n.methodChain?c:void 0},toggle:function(c,d){return function(a,b,c,d){var e=a.indexOf(c=l(c));return-1!==e?!!d||(a.splice(e,1),m(a,b),!1):!1!==d&&(a.push(c),m(a,b),!0)}(b,a,c,d)},replace:function(d,e){return function(a,b,c,d){var e=void 0;(c=l(c))&&(d=l(d))&&c!==d&&-1!==(e=a.indexOf(c))&&(a.splice(e,1),-1===a.indexOf(d)&&a.push(d),m(a,b))}(b,a,d,e),n.methodChain?c:void 0}};return c}()}function o(a,b,c){return null!=c&&("x"===b?a.scrollTo(c,a.pageYOffset):a.scrollTo(a.pageXOffset,c)),"x"===b?a.pageXOffset:a.pageYOffset}function p(a,b,c){var d="x"===b?"scrollLeft":"scrollTop";return null!=c&&(a[d]=c),a[d]}function q(a){return a?za(a)?Object.keys(a).reduce(function(b,c){return b[c]=q(a[c]),b},{}):Array.isArray(a)?a.map(q):a:a}function r(a,b){var c=void 0,d=void 0;return(void 0===a?"undefined":ia(a))!==(void 0===b?"undefined":ia(b))||(c=za(a)?"obj":Array.isArray(a)?"array":"")!=(za(b)?"obj":Array.isArray(b)?"array":"")||("obj"===c?r(d=Object.keys(a).sort(),Object.keys(b).sort())||d.some(function(c){return r(a[c],b[c])}):"array"===c?a.length!==b.length||a.some(function(a,c){return r(a,b[c])}):a!==b)}function s(a){return!(!a||a.nodeType!==Node.ELEMENT_NODE||"function"!=typeof a.getBoundingClientRect||a.compareDocumentPosition(document)&Node.DOCUMENT_POSITION_DISCONNECTED)}function t(a){if(!za(a))return null;var b=void 0;if(!Aa(b=a.left)&&!Aa(b=a.x))return null;if(a.left=a.x=b,!Aa(b=a.top)&&!Aa(b=a.y))return null;if(a.top=a.y=b,Aa(a.width)&&a.width>=0)a.right=a.left+a.width;else{if(!(Aa(a.right)&&a.right>=a.left))return null;a.width=a.right-a.left}if(Aa(a.height)&&a.height>=0)a.bottom=a.top+a.height;else{if(!(Aa(a.bottom)&&a.bottom>=a.top))return null;a.height=a.bottom-a.top}return a}function u(a){return Aa(a)?{value:a,isRatio:!1}:"string"==typeof a?function(a){var b=/^(.+?)(%)?$/.exec(a),c=void 0,d=void 0;return b&&Aa(c=parseFloat(b[1]))?{value:(d=!(!b[2]||!c))?c/100:c,isRatio:d}:null}(a.replace(/\s/g,"")):null}function v(a){return a.isRatio?100*a.value+"%":a.value}function w(a,b,c){return"number"==typeof a?a:b+a.value*(a.isRatio?c:1)}function x(a){if(!za(a))return null;var b=void 0;if(!(b=u(a.left))&&!(b=u(a.x)))return null;if(a.left=a.x=b,!(b=u(a.top))&&!(b=u(a.y)))return null;if(a.top=a.y=b,(b=u(a.width))&&b.value>=0)a.width=b,delete a.right;else{if(!(b=u(a.right)))return null;a.right=b,delete a.width}if((b=u(a.height))&&b.value>=0)a.height=b,delete a.bottom;else{if(!(b=u(a.bottom)))return null;a.bottom=b,delete a.height}return a}function y(a){return Object.keys(a).reduce(function(b,c){return b[c]=v(a[c]),b},{})}function z(a,b){var c={left:"x",right:"x",x:"x",width:"x",top:"y",bottom:"y",y:"y",height:"y"},d={x:b.left,y:b.top},e={x:b.width,y:b.height};return t(Object.keys(a).reduce(function(b,f){return b[f]=w(a[f],"width"===f||"height"===f?0:d[c[f]],e[c[f]]),b},{}))}function A(a,b){var c=a.getBoundingClientRect(),d={left:c.left,top:c.top,width:c.width,height:c.height};if(d.left+=window.pageXOffset,d.top+=window.pageYOffset,b){var e=window.getComputedStyle(a,""),f=parseFloat(e.borderTopWidth)||0,g=parseFloat(e.borderRightWidth)||0,h=parseFloat(e.borderBottomWidth)||0,i=parseFloat(e.borderLeftWidth)||0;d.left+=i,d.top+=f,d.width-=i+g,d.height-=f+h}return t(d)}function B(a,b){null==Ia&&(!1!==Pa&&(Ia=fa.getValue("cursor",Pa)),null==Ia&&(Ia=!1)),a.style.cursor=!1===Ia?b:Ia}function C(a){null==Ja&&(!1!==Qa&&(Ja=fa.getValue("cursor",Qa)),null==Ja&&(Ja=!1)),!1!==Ja&&(a.style.cursor=Ja)}function D(a,b,c){var d=a.svgPoint;return d.x=b,d.y=c,d.matrixTransform(a.svgCtmElement.getScreenCTM().inverse())}function E(a,b){var c=a.elementBBox;if(b.left!==c.left||b.top!==c.top){var d=a.htmlOffset;return a.elementStyle[Ma]="translate("+(b.left+d.left)+"px, "+(b.top+d.top)+"px)",!0}return!1}function F(a,b){var c=a.elementBBox,d=a.elementStyle,e=a.htmlOffset,f=!1;return b.left!==c.left&&(d.left=b.left+e.left+"px",f=!0),b.top!==c.top&&(d.top=b.top+e.top+"px",f=!0),f}function G(a,b){var c=a.elementBBox;if(b.left!==c.left||b.top!==c.top){var d=a.svgOffset,e=a.svgOriginBBox,f=D(a,b.left-window.pageXOffset,b.top-window.pageYOffset);return a.svgTransform.setTranslate(f.x+d.x-e.x,f.y+d.y-e.y),!0}return!1}function H(a,b,c){function d(){a.minLeft>=a.maxLeft?b.left=e.left:b.left<a.minLeft?b.left=a.minLeft:b.left>a.maxLeft&&(b.left=a.maxLeft),a.minTop>=a.maxTop?b.top=e.top:b.top<a.minTop?b.top=a.minTop:b.top>a.maxTop&&(b.top=a.maxTop)}var e=a.elementBBox;if(d(),c){if(!1===c(b))return!1;d()}var f=a.moveElm(a,b);return f&&(a.elementBBox=t({left:b.left,top:b.top,width:e.width,height:e.height})),f}function I(a){var b=a.element,c=a.elementStyle,d=A(b),e=["display","marginTop","marginBottom","width","height"];e.unshift(Ma);var f=c[La];c[La]="none";var g=A(b);a.orgStyle?e.forEach(function(b){null!=a.lastStyle[b]&&c[b]!==a.lastStyle[b]||(c[b]=a.orgStyle[b])}):(a.orgStyle=e.reduce(function(a,b){return a[b]=c[b]||"",a},{}),a.lastStyle={});var h=A(b),i=window.getComputedStyle(b,"");"inline"===i.display&&(c.display="inline-block",["Top","Bottom"].forEach(function(a){var b=parseFloat(i["padding"+a]);c["margin"+a]=b?"-"+b+"px":"0"})),c[Ma]="translate(0, 0)";var j=A(b),k=a.htmlOffset={left:j.left?-j.left:0,top:j.top?-j.top:0};return c[Ma]="translate("+(d.left+k.left)+"px, "+(d.top+k.top)+"px)",["width","height"].forEach(function(d){j[d]!==h[d]&&(c[d]=h[d]+"px",(j=A(b))[d]!==h[d]&&(c[d]=h[d]-(j[d]-h[d])+"px")),a.lastStyle[d]=c[d]}),b.offsetWidth,c[La]=f,g.left===d.left&&g.top===d.top||(c[Ma]="translate("+(g.left+k.left)+"px, "+(g.top+k.top)+"px)"),g}function J(a){var b=a.element,c=a.elementStyle,d=A(b),e=["position","marginTop","marginRight","marginBottom","marginLeft","width","height"],f=c[La];c[La]="none";var g=A(b);a.orgStyle?e.forEach(function(b){null!=a.lastStyle[b]&&c[b]!==a.lastStyle[b]||(c[b]=a.orgStyle[b])}):(a.orgStyle=e.reduce(function(a,b){return a[b]=c[b]||"",a},{}),a.lastStyle={});var h=A(b);c.position="absolute",c.left=c.top=c.margin="0";var i=A(b),j=a.htmlOffset={left:i.left?-i.left:0,top:i.top?-i.top:0};return c.left=d.left+j.left+"px",c.top=d.top+j.top+"px",["width","height"].forEach(function(d){i[d]!==h[d]&&(c[d]=h[d]+"px",(i=A(b))[d]!==h[d]&&(c[d]=h[d]-(i[d]-h[d])+"px")),a.lastStyle[d]=c[d]}),b.offsetWidth,c[La]=f,g.left===d.left&&g.top===d.top||(c.left=g.left+j.left+"px",c.top=g.top+j.top+"px"),g}function K(a){var b=a.element,c=a.svgTransform,d=b.getBoundingClientRect(),e=A(b);c.setTranslate(0,0);var f=a.svgOriginBBox=b.getBBox(),g=b.getBoundingClientRect(),h=D(a,g.left,g.top),i=a.svgOffset={x:f.x-h.x,y:f.y-h.y},j=D(a,d.left,d.top);return c.setTranslate(j.x+i.x-f.x,j.y+i.y-f.y),e}function L(a,b){var c=A(document.documentElement),d=a.elementBBox=a.initElm(a),e=a.containmentBBox=a.containmentIsBBox?z(a.options.containment,c)||c:A(a.options.containment,!0);if(a.minLeft=e.left,a.maxLeft=e.right-d.width,a.minTop=e.top,a.maxTop=e.bottom-d.height,H(a,{left:d.left,top:d.top}),a.parsedSnapTargets){var f={x:d.width,y:d.height},g={x:a.minLeft,y:a.minTop},h={x:a.maxLeft,y:a.maxTop},i={left:"x",right:"x",x:"x",width:"x",xStart:"x",xEnd:"x",xStep:"x",top:"y",bottom:"y",y:"y",height:"y",yStart:"y",yEnd:"y",yStep:"y"},j=a.parsedSnapTargets.reduce(function(a,b){function j(c){if(null==c.center&&(c.center=b.center),null==c.xGravity&&(c.xGravity=b.gravity),null==c.yGravity&&(c.yGravity=b.gravity),null!=c.x&&null!=c.y)c.x=w(c.x,l.x,m.x),c.y=w(c.y,l.y,m.y),c.center&&(c.x-=f.x/2,c.y-=f.y/2,c.corners=["tl"]),(c.corners||b.corners).forEach(function(b){var d=c.x-("tr"===b||"br"===b?f.x:0),e=c.y-("bl"===b||"br"===b?f.y:0);if(d>=g.x&&d<=h.x&&e>=g.y&&e<=h.y){var i={x:d,y:e},j=d-c.xGravity,k=d+c.xGravity,l=e-c.yGravity,m=e+c.yGravity;j>g.x&&(i.gravityXStart=j),k<h.x&&(i.gravityXEnd=k),l>g.y&&(i.gravityYStart=l),m<h.y&&(i.gravityYEnd=m),a.push(i)}});else{var d=null!=c.x?"x":"y",e="x"===d?"y":"x",i=e+"Start",j=e+"End",k=d+"Gravity",n=d.toUpperCase(),o=e.toUpperCase(),p="gravity"+n+"Start",q="gravity"+n+"End",r="gravity"+o+"Start",s="gravity"+o+"End";if(c[d]=w(c[d],l[d],m[d]),c[i]=w(c[i],l[e],m[e]),c[j]=w(c[j],l[e],m[e])-f[e],c[i]>c[j]||c[i]>h[e]||c[j]<g[e])return;c.center&&(c[d]-=f[d]/2,c.sides=["start"]),(c.sides||b.sides).forEach(function(b){var l=c[d]-("end"===b?f[d]:0);if(l>=g[d]&&l<=h[d]){var m={},n=l-c[k],o=l+c[k];m[d]=l,n>g[d]&&(m[p]=n),o<h[d]&&(m[q]=o),c[i]>g[e]&&(m[r]=c[i]),c[j]<h[e]&&(m[s]=c[j]),a.push(m)}})}}var k="containment"===b.base?e:c,l={x:k.left,y:k.top},m={x:k.width,y:k.height},n=void 0;if((n=b.element?A(b.element):null)||b.ppBBox)b.ppBBox&&(n=z(b.ppBBox,k)),n&&b.edges.forEach(function(a){var c=b.gravity,e=b.gravity;"outside"===a&&(c+=d.width,e+=d.height);var f=n.left-c,g=n.right+c,h=n.top-e,i=n.bottom+e,k="inside"===a?"start":"end";j({xStart:f,xEnd:g,y:n.top,sides:[k],center:!1}),j({x:n.left,yStart:h,yEnd:i,sides:[k],center:!1}),k="inside"===a?"end":"start",j({xStart:f,xEnd:g,y:n.bottom,sides:[k],center:!1}),j({x:n.right,yStart:h,yEnd:i,sides:[k],center:!1})});else{var o=[["x","y","xStart","xEnd","xStep","yStart","yEnd","yStep"].reduce(function(a,c){return b[c]&&(a[c]=w(b[c],"xStep"===c||"yStep"===c?0:l[i[c]],m[i[c]])),a},{})];["x","y"].forEach(function(a){var c=a+"Start",d=a+"End",e=a+"Step",f=a+"Gravity";o=o.reduce(function(g,h){var i=h[c],j=h[d],k=h[e];if(null!=i&&null!=j&&i>=j)return g;if(null!=k){if(k<2)return g;var l=k/2;l=b.gravity>l?l:null;for(var m=i;m<=j;m+=k){var n=Object.keys(h).reduce(function(a,b){return b!==c&&b!==d&&b!==e&&(a[b]=h[b]),a},{});n[a]=m,n[f]=l,g.push(n)}}else g.push(h);return g},[])}),o.forEach(function(a){j(a)})}return a},[]);a.snapTargets=j.length?j:null}var k={},l=a.options.autoScroll;if(l){k.isWindow=l.target===window,k.target=l.target;var m="scroll"===b,n=function(a,b,c){var d={},e=void 0,f=void 0,g=void 0;!function(a){d.clientWidth=a.clientWidth,d.clientHeight=a.clientHeight}(b?document.documentElement:a);var h=0,i=0;if(!c){var j=void 0,k=void 0;b?(j=o(a,"x"),k=o(a,"y"),e=getComputedStyle(document.documentElement,""),f=getComputedStyle(document.body,""),h=o(a,"x",document.documentElement.scrollWidth+d.clientWidth+["marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"].reduce(function(a,b){return a+(parseFloat(e[b])||0)+(parseFloat(f[b])||0)},0)),i=o(a,"y",document.documentElement.scrollHeight+d.clientHeight+["marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].reduce(function(a,b){return a+(parseFloat(e[b])||0)+(parseFloat(f[b])||0)},0)),o(a,"x",j),o(a,"y",k)):(j=p(a,"x"),k=p(a,"y"),g=getComputedStyle(a,""),h=p(a,"x",a.scrollWidth+d.clientWidth+["marginLeft","marginRight","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"].reduce(function(a,b){return a+(parseFloat(g[b])||0)},0)),i=p(a,"y",a.scrollHeight+d.clientHeight+["marginTop","marginBottom","borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].reduce(function(a,b){return a+(parseFloat(g[b])||0)},0)),p(a,"x",j),p(a,"y",k))}d.scrollWidth=d.clientWidth+h,d.scrollHeight=d.clientHeight+i;var l=void 0;return b?d.clientX=d.clientY=0:(l=a.getBoundingClientRect(),g||(g=getComputedStyle(a,"")),d.clientX=l.left+(parseFloat(g.borderLeftWidth)||0),d.clientY=l.top+(parseFloat(g.borderTopWidth)||0)),d}(l.target,k.isWindow,m),q=t({left:n.clientX,top:n.clientY,width:n.clientWidth,height:n.clientHeight});m?a.autoScroll&&(k.scrollWidth=a.autoScroll.scrollWidth,k.scrollHeight=a.autoScroll.scrollHeight):(k.scrollWidth=n.scrollWidth,k.scrollHeight=n.scrollHeight),[["X","Width","left","right"],["Y","Height","top","bottom"]].forEach(function(a){var b=a[0],c=a[1],e=a[2],f=a[3],g=(k["scroll"+c]||0)-n["client"+c],h=l["min"+b]||0,i=Aa(l["max"+b])?l["max"+b]:g;if(h<i&&h<g){i>g&&(i=g);for(var j=[],m=d[c.toLowerCase()],o=l.sensitivity.length-1;o>=0;o--){var p=l.sensitivity[o],r=l.speed[o];j.push({dir:-1,speed:r,position:q[e]+p}),j.push({dir:1,speed:r,position:q[f]-p-m})}k[b.toLowerCase()]={min:h,max:i,lines:j}}})}a.autoScroll=k.x||k.y?k:null}function M(a){Ua.stop(),B(a.options.handle,a.orgCursor),Ha.style.cursor=Ka,!1!==a.options.zIndex&&(a.elementStyle.zIndex=a.orgZIndex),Na&&(Ha.style[Na]=Oa);var b=ga(a.element);Ta&&b.remove(Ta),Sa&&b.remove(Sa),Fa=null,Da.cancel(),a.onDragEnd&&a.onDragEnd({left:a.elementBBox.left,top:a.elementBBox.top})}function N(a,b){function c(a,b){function c(a){return"string"==typeof a?a.replace(/[, ]+/g," ").trim().toLowerCase():null}Aa(b.gravity)&&b.gravity>0&&(a.gravity=b.gravity);var d=c(b.corner);if(d){if("all"!==d){var e={},f=d.split(/\s/).reduce(function(a,b){return(b="tl"===(b=b.trim().replace(/^(.).*?-(.).*$/,"$1$2"))||"lt"===b?"tl":"tr"===b||"rt"===b?"tr":"bl"===b||"lb"===b?"bl":"br"===b||"rb"===b?"br":null)&&!e[b]&&(a.push(b),e[b]=!0),a},[]),g=f.length;d=g?4===g?"all":f.join(" "):null}d&&(a.corner=d)}var h=c(b.side);h&&("start"===h||"end"===h||"both"===h?a.side=h:"start end"!==h&&"end start"!==h||(a.side="both")),"boolean"==typeof b.center&&(a.center=b.center);var i=c(b.edge);i&&("inside"===i||"outside"===i||"both"===i?a.edge=i:"inside outside"!==i&&"outside inside"!==i||(a.edge="both"));var j="string"==typeof b.base?b.base.trim().toLowerCase():null;return!j||"containment"!==j&&"document"!==j||(a.base=j),a}var d=a.options,e=void 0;if(b.containment){var f=void 0;s(b.containment)?b.containment!==d.containment&&(d.containment=b.containment,a.containmentIsBBox=!1,e=!0):(f=x(q(b.containment)))&&r(f,d.containment)&&(d.containment=f,a.containmentIsBBox=!0,e=!0)}if(null!=b.snap){var g=za(b.snap)&&null!=b.snap.targets?b.snap:{targets:b.snap},h=[],i=c({targets:h},g);i.gravity||(i.gravity=ka),i.corner||(i.corner=la),i.side||(i.side=ma),"boolean"!=typeof i.center&&(i.center=!1),i.edge||(i.edge=na),i.base||(i.base=oa);var j=(Array.isArray(g.targets)?g.targets:[g.targets]).reduce(function(a,b){if(null==b)return a;var d=s(b),e=x(q(b)),f=d||e?{boundingBox:b}:za(b)&&null==b.start&&null==b.end&&null==b.step?b:{x:b,y:b},g=[],j={},k=f.boundingBox,l=void 0;if(d||s(k))g.push({element:k}),j.boundingBox=k;else if(l=e||x(q(k)))g.push({ppBBox:l}),j.boundingBox=y(l);else{var m=void 0,n=["x","y"].reduce(function(a,b){var c,d=f[b];if(c=u(d))a[b]=c,j[b]=v(c);else{var e=void 0,g=void 0,h=void 0;za(d)&&(e=u(d.start),g=u(d.end),h=u(d.step),e&&g&&e.isRatio===g.isRatio&&e.value>=g.value&&(m=!0)),e=a[b+"Start"]=e||{value:0,isRatio:!1},g=a[b+"End"]=g||{value:1,isRatio:!0},j[b]={start:v(e),end:v(g)},h&&((h.isRatio?h.value>0:h.value>=2)?(a[b+"Step"]=h,j[b].step=v(h)):m=!0)}return a},{});if(m)return a;n.xStart&&!n.xStep&&n.yStart&&!n.yStep?g.push({xStart:n.xStart,xEnd:n.xEnd,y:n.yStart},{xStart:n.xStart,xEnd:n.xEnd,y:n.yEnd},{x:n.xStart,yStart:n.yStart,yEnd:n.yEnd},{x:n.xEnd,yStart:n.yStart,yEnd:n.yEnd}):g.push(n)}if(g.length){h.push(c(j,f));var o=j.corner||i.corner,p=j.side||i.side,r=j.edge||i.edge,t={gravity:j.gravity||i.gravity,base:j.base||i.base,center:"boolean"==typeof j.center?j.center:i.center,corners:"all"===o?pa:o.split(" "),sides:"both"===p?qa:[p],edges:"both"===r?ra:[r]};g.forEach(function(b){["gravity","corners","sides","center","edges","base"].forEach(function(a){b[a]=t[a]}),a.push(b)})}return a},[]);j.length&&(d.snap=i,r(j,a.parsedSnapTargets)&&(a.parsedSnapTargets=j,e=!0))}else b.hasOwnProperty("snap")&&a.parsedSnapTargets&&(d.snap=a.parsedSnapTargets=a.snapTargets=void 0);if(b.autoScroll){var k=za(b.autoScroll)?b.autoScroll:{target:!0===b.autoScroll?window:b.autoScroll},l={};l.target=s(k.target)?k.target:window,l.speed=[],(Array.isArray(k.speed)?k.speed:[k.speed]).every(function(a,b){return!!(b<=2&&Aa(a))&&(l.speed[b]=a,!0)}),l.speed.length||(l.speed=sa);var m=Array.isArray(k.sensitivity)?k.sensitivity:[k.sensitivity];l.sensitivity=l.speed.map(function(a,b){return Aa(m[b])?m[b]:ta[b]}),["X","Y"].forEach(function(a){var b="min"+a,c="max"+a;Aa(k[b])&&k[b]>=0&&(l[b]=k[b]),Aa(k[c])&&k[c]>=0&&(!l[b]||k[c]>=l[b])&&(l[c]=k[c])}),r(l,d.autoScroll)&&(d.autoScroll=l,e=!0)}else b.hasOwnProperty("autoScroll")&&(d.autoScroll&&(e=!0),d.autoScroll=void 0);if(e&&L(a),s(b.handle)&&b.handle!==d.handle){d.handle&&(d.handle.style.cursor=a.orgCursor,Na&&(d.handle.style[Na]=a.orgUserSelect),Da.removeStartHandler(d.handle,a.pointerEventHandlerId));var n=d.handle=b.handle;a.orgCursor=n.style.cursor,B(n,a.orgCursor),Na&&(a.orgUserSelect=n.style[Na],n.style[Na]="none"),Da.addStartHandler(n,a.pointerEventHandlerId)}(Aa(b.zIndex)||!1===b.zIndex)&&(d.zIndex=b.zIndex,a===Fa&&(a.elementStyle.zIndex=!1===d.zIndex?a.orgZIndex:d.zIndex));var o={left:a.elementBBox.left,top:a.elementBBox.top},p=void 0;Aa(b.left)&&b.left!==o.left&&(o.left=b.left,p=!0),Aa(b.top)&&b.top!==o.top&&(o.top=b.top,p=!0),p&&H(a,o),["onDrag","onMove","onDragStart","onMoveStart","onDragEnd"].forEach(function(c){"function"==typeof b[c]?(d[c]=b[c],a[c]=d[c].bind(a.ins)):b.hasOwnProperty(c)&&null==b[c]&&(d[c]=a[c]=void 0)})}c.r(b);var O=500,P=[],Q=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1e3/60)},R=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return clearTimeout(a)},S=Date.now(),T=void 0,U={add:function(a){var b=void 0;return-1===e(a)?(P.push(b={listener:a}),function(a){b.event=a,T||d()}):null},remove:function(a){var b;(b=e(a))>-1&&(P.splice(b,1),!P.length&&T&&(R.call(window,T),T=null))}},V=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),W=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){W=!0}}))}catch(a){}var X=function(){function a(b){var c=this;!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a),this.startHandlers={},this.lastHandlerId=0,this.curPointerClass=null,this.curTouchId=null,this.lastPointerXY={clientX:0,clientY:0},this.lastTouchTime=0,this.options={preventDefault:!0,stopPropagation:!0},b&&["preventDefault","stopPropagation"].forEach(function(a){"boolean"==typeof b[a]&&(c.options[a]=b[a])})}return V(a,[{key:"regStartHandler",value:function(a){var b=this;return b.startHandlers[++b.lastHandlerId]=function(c){var d="mousedown"===c.type?"mouse":"touch",e=Date.now(),f=void 0,g=void 0;if("touch"===d)b.lastTouchTime=e,f=c.changedTouches[0],g=c.changedTouches[0].identifier;else{if(e-b.lastTouchTime<400)return;f=c}if(!h(f))throw new Error("No clientX/clientY");b.curPointerClass&&b.cancel(),a.call(b,f)&&(b.curPointerClass=d,b.curTouchId="touch"===d?g:null,b.lastPointerXY.clientX=f.clientX,b.lastPointerXY.clientY=f.clientY,b.options.preventDefault&&c.preventDefault(),b.options.stopPropagation&&c.stopPropagation())},b.lastHandlerId}},{key:"unregStartHandler",value:function(a){delete this.startHandlers[a]}},{key:"addStartHandler",value:function(a,b){if(!this.startHandlers[b])throw new Error("Invalid handlerId: "+b);return f(a,"mousedown",this.startHandlers[b],{capture:!1,passive:!1}),f(a,"touchstart",this.startHandlers[b],{capture:!1,passive:!1}),f(a,"dragstart",i,{capture:!1,passive:!1}),b}},{key:"removeStartHandler",value:function(a,b){if(!this.startHandlers[b])throw new Error("Invalid handlerId: "+b);return a.removeEventListener("mousedown",this.startHandlers[b],!1),a.removeEventListener("touchstart",this.startHandlers[b],!1),a.removeEventListener("dragstart",i,!1),b}},{key:"addMoveHandler",value:function(a,b){var c=this,d=U.add(function(a){var b="mousemove"===a.type?"mouse":"touch";if("touch"===b&&(c.lastTouchTime=Date.now()),b===c.curPointerClass){var d="touch"===b?g(a.changedTouches,c.curTouchId):a;h(d)&&(d.clientX===c.lastPointerXY.clientX&&d.clientY===c.lastPointerXY.clientY||c.move(d),c.options.preventDefault&&a.preventDefault(),c.options.stopPropagation&&a.stopPropagation())}});f(a,"mousemove",d,{capture:!1,passive:!1}),f(a,"touchmove",d,{capture:!1,passive:!1}),c.curMoveHandler=b}},{key:"move",value:function(a){h(a)&&(this.lastPointerXY.clientX=a.clientX,this.lastPointerXY.clientY=a.clientY),this.curMoveHandler&&this.curMoveHandler(this.lastPointerXY)}},{key:"addEndHandler",value:function(a,b){function c(a){var b="mouseup"===a.type?"mouse":"touch";if("touch"===b&&(d.lastTouchTime=Date.now()),b===d.curPointerClass){var c="touch"===b?g(a.changedTouches,d.curTouchId)||(g(a.touches,d.curTouchId)?null:{}):a;c&&(d.end(c),d.options.preventDefault&&a.preventDefault(),d.options.stopPropagation&&a.stopPropagation())}}var d=this;f(a,"mouseup",c,{capture:!1,passive:!1}),f(a,"touchend",c,{capture:!1,passive:!1}),d.curEndHandler=b}},{key:"end",value:function(a){h(a)&&(this.lastPointerXY.clientX=a.clientX,this.lastPointerXY.clientY=a.clientY),this.curEndHandler&&this.curEndHandler(this.lastPointerXY),this.curPointerClass=this.curTouchId=null}},{key:"addCancelHandler",value:function(a,b){var c=this;f(a,"touchcancel",function(a){c.lastTouchTime=Date.now(),null!=c.curPointerClass&&(g(a.changedTouches,c.curTouchId)||!g(a.touches,c.curTouchId))&&c.cancel()},{capture:!1,passive:!1}),c.curCancelHandler=b}},{key:"cancel",value:function(){this.curCancelHandler&&this.curCancelHandler(),this.curPointerClass=this.curTouchId=null}}],[{key:"addEventListenerWithOptions",get:function(){return f}}]),a}(),Y=["webkit","moz","ms","o"],Z=Y.reduce(function(a,b){return a.push(b),a.push(j(b)),a},[]),$=Y.map(function(a){return"-"+a+"-"}),_=function(){var a=void 0;return function(){return a=a||document.createElement("div").style}}(),aa=function(){var a=new RegExp("^(?:"+Y.join("|")+")(.)","i"),b=/[A-Z]/;return function(c){return"float"===(c=(c+"").replace(/\s/g,"").replace(/-([\da-z])/gi,function(a,b){return b.toUpperCase()}).replace(a,function(a,c){return b.test(c)?c.toLowerCase():a})).toLowerCase()?"cssFloat":c}}(),ba=function(){var a=new RegExp("^(?:"+$.join("|")+")","i");return function(b){return(null!=b?b+"":"").replace(/\s/g,"").replace(a,"")}}(),ca=function(a,b){var c=_();return a=a.replace(/[A-Z]/g,function(a){return"-"+a.toLowerCase()}),c.setProperty(a,b),null!=c[a]&&c.getPropertyValue(a)===b},da={},ea={},fa={getName:k,getValue:function(a,b){var c=void 0;return(a=k(a))?(ea[a]=ea[a]||{},(Array.isArray(b)?b:[b]).some(function(b){return b=ba(b),null!=ea[a][b]?!1!==ea[a][b]&&(c=ea[a][b],!0):ca(a,b)?(c=ea[a][b]=b,!0):!!$.some(function(d){var e=d+b;return!!ca(a,e)&&(c=ea[a][b]=e,!0)})||(ea[a][b]=!1,!1)}),"string"==typeof c?c:void 0):c}};n.methodChain=!0;var ga=n,ha=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};ga.ignoreNative=!0;var ja=9e3,ka=20,la="tl",ma="both",na="both",oa="containment",pa=["tl","tr","bl","br"],qa=["start","end"],ra=["inside","outside"],sa=[40,200,1e3],ta=[100,40,0],ua="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style&&!window.navigator.msPointerEnabled,va=!ua&&!!document.uniqueID,wa="MozAppearance"in document.documentElement.style,xa=!(ua||wa||!window.chrome||!window.CSS),ya=!ua&&!va&&!wa&&!xa&&!window.chrome&&"WebkitAppearance"in document.documentElement.style,za=function(){var a={}.toString,b={}.hasOwnProperty.toString,c=b.call(Object);return function(d){var e=void 0,f=void 0;return d&&"[object Object]"===a.call(d)&&(!(e=Object.getPrototypeOf(d))||(f=e.hasOwnProperty("constructor")&&e.constructor)&&"function"==typeof f&&b.call(f)===c)}}(),Aa=Number.isFinite||function(a){return"number"==typeof a&&window.isFinite(a)},Ba={},Ca={},Da=new X,Ea=0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0,Oa=void 0,Pa=ya?["all-scroll","move"]:["grab","all-scroll","move"],Qa=ya?"move":["grabbing","move"],Ra="plain-draggable",Sa="plain-draggable-dragging",Ta="plain-draggable-moving",Ua={},Va=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return setTimeout(a,1e3/60)},Wa=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame||function(a){return clearTimeout(a)},Xa=function(){var a=Date.now();["x","y"].forEach(function(b){var c=Za[b];if(c){var d=a-c.lastFrameTime,e=_a($a,b),f=null!=c.lastValue&&Math.abs(c.lastValue-e)<10?c.lastValue:e;if(-1===c.dir?f>c.min:f<c.max){var g=f+c.speed*d*c.dir;g<c.min?g=c.min:g>c.max&&(g=c.max),_a($a,b,g),c.lastValue=g}c.lastFrameTime=a}})},Ya=function a(){Wa.call(window,ab),Xa(),ab=Va.call(window,a)},Za={},$a=void 0,_a=void 0,ab=void 0;Ua.move=function(a,b,c){Wa.call(window,ab),Xa(),$a===a&&(b.x&&Za.x&&(b.x.lastValue=Za.x.lastValue),b.y&&Za.y&&(b.y.lastValue=Za.y.lastValue)),$a=a,Za=b,_a=c;var d=Date.now();["x","y"].forEach(function(a){var b=Za[a];b&&(b.lastFrameTime=d)}),ab=Va.call(window,Ya)},Ua.stop=function(){Wa.call(window,ab),Xa(),Za={},$a=null};var bb=function(){function a(b,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a);var d={ins:this,options:{zIndex:ja},disabled:!1};if(Object.defineProperty(this,"_id",{value:++Ea}),d._id=this._id,Ba[this._id]=d,!s(b)||b===Ha)throw new Error("This element is not accepted.");if(c){if(!za(c))throw new Error("Invalid options.")}else c={};var e=!0,f=void 0;if(b instanceof SVGElement&&(f=b.ownerSVGElement)){if(!b.getBBox)throw new Error("This element is not accepted. (SVGLocatable)");if(!b.transform)throw new Error("This element is not accepted. (SVGAnimatedTransformList)");d.svgTransform=b.transform.baseVal.appendItem(f.createSVGTransform()),d.svgPoint=f.createSVGPoint();var g=b.nearestViewportElement;d.svgCtmElement=wa?g.appendChild(document.createElementNS(f.namespaceURI,"rect")):g,e=!1,d.initElm=K,d.moveElm=G}else{var h=fa.getName("willChange");h&&(e=!1),!c.leftTop&&Ma?(h&&(b.style[h]="transform"),d.initElm=I,d.moveElm=E):(h&&(b.style[h]="left, top"),d.initElm=J,d.moveElm=F)}if(d.element=function(a,b){var c=a.style;c.webkitTapHighlightColor="transparent";var d=fa.getName("boxShadow"),e=window.getComputedStyle(a,"")[d];return e&&"none"!==e||(c[d]="0 0 1px transparent"),b&&Ma&&(c[Ma]="translateZ(0)"),a}(b,e),d.elementStyle=b.style,d.orgZIndex=d.elementStyle.zIndex,Ra&&ga(b).add(Ra),d.pointerEventHandlerId=Da.regStartHandler(function(a){return function(a,b){return!(a.disabled||a.onDragStart&&!1===a.onDragStart(b)||(Fa&&M(Fa),C(a.options.handle),Ha.style.cursor=Ja||window.getComputedStyle(a.options.handle,"").cursor,!1!==a.options.zIndex&&(a.elementStyle.zIndex=a.options.zIndex),Na&&(Ha.style[Na]="none"),Sa&&ga(a.element).add(Sa),Fa=a,Ga=!1,Ca.left=a.elementBBox.left-(b.clientX+window.pageXOffset),Ca.top=a.elementBBox.top-(b.clientY+window.pageYOffset),0))}(d,a)}),!c.containment){var i;c.containment=(i=b.parentNode)&&s(i)?i:Ha}c.handle||(c.handle=b),N(d,c)}return ha(a,[{key:"remove",value:function(){var a=Ba[this._id];this.disabled=!0,Da.unregStartHandler(Da.removeStartHandler(a.options.handle,a.pointerEventHandlerId)),delete Ba[this._id]}},{key:"setOptions",value:function(a){return za(a)&&N(Ba[this._id],a),this}},{key:"position",value:function(){return L(Ba[this._id]),this}},{key:"disabled",get:function(){return Ba[this._id].disabled},set:function(a){var b=Ba[this._id];(a=!!a)!==b.disabled&&(b.disabled=a,b.disabled?(b===Fa&&M(b),b.options.handle.style.cursor=b.orgCursor,Na&&(b.options.handle.style[Na]=b.orgUserSelect),Ra&&ga(b.element).remove(Ra)):(B(b.options.handle,b.orgCursor),Na&&(b.options.handle.style[Na]="none"),Ra&&ga(b.element).add(Ra)))}},{key:"element",get:function(){return Ba[this._id].element}},{key:"rect",get:function(){return q(Ba[this._id].elementBBox)}},{key:"left",get:function(){return Ba[this._id].elementBBox.left},set:function(a){N(Ba[this._id],{left:a})}},{key:"top",get:function(){return Ba[this._id].elementBBox.top},set:function(a){N(Ba[this._id],{top:a})}},{key:"containment",get:function(){var a=Ba[this._id];return a.containmentIsBBox?y(a.options.containment):a.options.containment},set:function(a){N(Ba[this._id],{containment:a})}},{key:"snap",get:function(){return q(Ba[this._id].options.snap)},set:function(a){N(Ba[this._id],{snap:a})}},{key:"autoScroll",get:function(){return q(Ba[this._id].options.autoScroll)},set:function(a){N(Ba[this._id],{autoScroll:a})}},{key:"handle",get:function(){return Ba[this._id].options.handle},set:function(a){N(Ba[this._id],{handle:a})}},{key:"zIndex",get:function(){return Ba[this._id].options.zIndex},set:function(a){N(Ba[this._id],{zIndex:a})}},{key:"onDrag",get:function(){return Ba[this._id].options.onDrag},set:function(a){N(Ba[this._id],{onDrag:a})}},{key:"onMove",get:function(){return Ba[this._id].options.onMove},set:function(a){N(Ba[this._id],{onMove:a})}},{key:"onDragStart",get:function(){return Ba[this._id].options.onDragStart},set:function(a){N(Ba[this._id],{onDragStart:a})}},{key:"onMoveStart",get:function(){return Ba[this._id].options.onMoveStart},set:function(a){N(Ba[this._id],{onMoveStart:a})}},{key:"onDragEnd",get:function(){return Ba[this._id].options.onDragEnd},set:function(a){N(Ba[this._id],{onDragEnd:a})}}],[{key:"draggableCursor",get:function(){return Pa},set:function(a){Pa!==a&&(Pa=a,Ia=null,Object.keys(Ba).forEach(function(a){var b=Ba[a];b.disabled||b===Fa&&!1!==Ja||(B(b.options.handle,b.orgCursor),b===Fa&&(Ha.style.cursor=Ka,Ha.style.cursor=window.getComputedStyle(b.options.handle,"").cursor))}))}},{key:"draggingCursor",get:function(){return Qa},set:function(a){Qa!==a&&(Qa=a,Ja=null,Fa&&(C(Fa.options.handle),!1===Ja&&(B(Fa.options.handle,Fa.orgCursor),Ha.style.cursor=Ka),Ha.style.cursor=Ja||window.getComputedStyle(Fa.options.handle,"").cursor))}},{key:"draggableClass",get:function(){return Ra},set:function(a){(a=a?a+"":void 0)!==Ra&&(Object.keys(Ba).forEach(function(b){var c=Ba[b];if(!c.disabled){var d=ga(c.element);Ra&&d.remove(Ra),a&&d.add(a)}}),Ra=a)}},{key:"draggingClass",get:function(){return Sa},set:function(a){if((a=a?a+"":void 0)!==Sa){if(Fa){var b=ga(Fa.element);Sa&&b.remove(Sa),a&&b.add(a)}Sa=a}}},{key:"movingClass",get:function(){return Ta},set:function(a){if((a=a?a+"":void 0)!==Ta){if(Fa&&Ga){var b=ga(Fa.element);Ta&&b.remove(Ta),a&&b.add(a)}Ta=a}}}]),a}();Da.addMoveHandler(document,function(a){if(Fa){var b={left:a.clientX+window.pageXOffset+Ca.left,top:a.clientY+window.pageYOffset+Ca.top};if(H(Fa,b,Fa.snapTargets?function(a){var b=Fa.snapTargets.length,c=!1,d=!1,e=void 0;for(e=0;e<b&&(!c||!d);e++){var f=Fa.snapTargets[e];(null==f.gravityXStart||a.left>=f.gravityXStart)&&(null==f.gravityXEnd||a.left<=f.gravityXEnd)&&(null==f.gravityYStart||a.top>=f.gravityYStart)&&(null==f.gravityYEnd||a.top<=f.gravityYEnd)&&(c||null==f.x||(a.left=f.x,c=!0,e=-1),d||null==f.y||(a.top=f.y,d=!0,e=-1))}return a.snapped=c||d,!Fa.onDrag||Fa.onDrag(a)}:Fa.onDrag)){var c={},d=Fa.autoScroll;if(d){var e={x:Fa.elementBBox.left-window.pageXOffset,y:Fa.elementBBox.top-window.pageYOffset};["x","y"].forEach(function(a){if(d[a]){var b=d[a].min,f=d[a].max;d[a].lines.some(function(d){return(-1===d.dir?e[a]<=d.position:e[a]>=d.position)&&(c[a]={dir:d.dir,speed:d.speed/1e3,min:b,max:f},!0)})}})}c.x||c.y?(Ua.move(d.target,c,d.isWindow?o:p),b.autoScroll=!0):Ua.stop(),Ga||(Ga=!0,Ta&&ga(Fa.element).add(Ta),Fa.onMoveStart&&Fa.onMoveStart(b)),Fa.onMove&&Fa.onMove(b)}}});var cb=function(){Fa&&M(Fa)};Da.addEndHandler(document,cb),Da.addCancelHandler(document,cb);var db=function(){function a(a,b){a.initElm&&L(a,b)}La=fa.getName("transitionProperty"),Ma=fa.getName("transform"),Ka=Ha.style.cursor,(Na=fa.getName("userSelect"))&&(Oa=Ha.style[Na]);var b={},c=void 0,d=!1,e=U.add(function(e){d||(d=!0,Fa&&(a(Fa,e.type),Da.move(),b[Fa._id]=!0),clearTimeout(c),c=setTimeout(function(){!function(d){clearTimeout(c),Object.keys(Ba).forEach(function(c){b[c]||a(Ba[c],d)}),b={}}(e.type)},200),d=!1)});window.addEventListener("resize",e,!0),window.addEventListener("scroll",e,!0)};(Ha=document.body)?db():document.addEventListener("DOMContentLoaded",function(){Ha=document.body,db()},!0),b.default=bb}]).default;b.PlainDraggable=c}},b[7]={value:function(a,c,d){b.r(19);b.r(13).register("poly",function(a,b,c,d){var e=b.getLayoutVertexOut(),f=a.getLayoutVertexIn(),g=b.getLayoutVectorOut().normalize(),h=Math.round,i=Math.abs,j=[];switch(j.push("M",h(e.x),h(e.y)),!0){case i(g.x)>i(g.y)&&g.x<0:j.push("h",-b.getStyle("margin-left")),j.push("v",f.y-e.y),j.push("H",f.x);break;case i(g.x)>i(g.y)&&g.x>=0:j.push("h",b.getStyle("margin-right")),j.push("v",f.y-e.y),j.push("H",f.x);break;case i(g.x)<=i(g.y)&&g.y<0:j.push("v",-b.getStyle("margin-top")),j.push("h",f.x-e.x),j.push("V",f.y);break;case i(g.x)<=i(g.y)&&g.y>=0:j.push("v",b.getStyle("margin-bottom")),j.push("h",f.x-e.x),j.push("V",f.y)}c.setMarker(null),c.setPathData(j)})}},b[8]={value:function(a,c,d){var e=b.r(19);b.r(13).register("under",function(a,b,c,d,f){var g,h,i,j,k=a.getLayoutBox(),l=b.getLayoutBox(),m=(Math.abs,[]),n=k.x>l.x?"right":"left",o=(a.getStyle("connect-radius"),k.bottom+3),p="sub"==b.getType()?l.bottom+3:l.cy;"right"==n?(g=new e.Point(l.right,p),h=new e.Point(k.left-10,o),i=new e.Point(k.right,o)):(g=new e.Point(l.left,p),h=new e.Point(k.right+10,o),i=new e.Point(k.left,o)),j=(g.x+h.x)/2,m.push("M",g),m.push("C",j,g.y,j,h.y,h),m.push("L",i),c.setMarker(null),c.setPathData(m)})}},b[9]={value:function(a,c,d){var e=b.r(19),f=b.r(21);if(-1!=location.href.indexOf("boxv")){var g;Object.defineProperty(e.Box.prototype,"visualization",{get:function(){return g?g.setBox(this):null}}),f.registerInitHook(function(){this.on("paperrender",function(){g=new e.Rect,g.fill("rgba(200, 200, 200, .5)"),g.stroke("orange"),this.getRenderContainer().addShape(g)})})}}},b[10]={value:function(a,c,d){var e=b.r(21),f={enableAnimation:!0,layoutAnimationDuration:300,viewAnimationDuration:100,zoomAnimationDuration:300},g={};e.registerInitHook(function(){this.setDefaultOptions(f),this.getOption("enableAnimation")||this.disableAnimation()}),e.prototype.enableAnimation=function(){for(var a in f)f.hasOwnProperty(a)&&this.setOption(g[a])},e.prototype.disableAnimation=function(){for(var a in f)f.hasOwnProperty(a)&&(g[a]=this.getOption(a),this.setOption(a,0))}}},b[11]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21)),g=(b.r(23),b.r(15)),h=0,i=e.createClass("Command",{constructor:function(){this._isContentChange=!0,this._isSelectionChange=!1},execute:function(a,b){throw new Error("Not Implement: Command.execute()")},setContentChanged:function(a){this._isContentChange=!!a},isContentChanged:function(){return this._isContentChange},setSelectionChanged:function(a){this._isSelectionChange=!!a},isSelectionChanged:function(){return this._isContentChange},queryState:function(a){return h},queryValue:function(a){return 0},isNeedUndo:function(){return!0}});i.STATE_NORMAL=h,i.STATE_ACTIVE=1,i.STATE_DISABLED=-1,e.extendClass(f,{_getCommand:function(a){return this._commands[a.toLowerCase()]},_queryCommand:function(a,b,c){var d=this._getCommand(a);if(d){var e=d["query"+b];if(e)return e.apply(d,[this].concat(c))}return 0},queryCommandState:function(a){return this._queryCommand(a,"State",[].slice.call(arguments,1))},queryCommandValue:function(a){return this._queryCommand(a,"Value",[].slice.call(arguments,1))},execCommand:function(a){if(!a)return null;a=a.toLowerCase();var b,c,d,e,f=[].slice.call(arguments,1),h=this;return b=this._getCommand(a),e={command:b,commandName:a.toLowerCase(),commandArgs:f},!(!b||!~this.queryCommandState(a))&&(this._hasEnterExecCommand?(d=b.execute.apply(b,[h].concat(f)),this._hasEnterExecCommand||this._interactChange()):(this._hasEnterExecCommand=!0,c=this._fire(new g("beforeExecCommand",e,!0)),c||(this._fire(new g("preExecCommand",e,!1)),d=b.execute.apply(b,[h].concat(f)),this._fire(new g("execCommand",e,!1)),b.isContentChanged()&&this._firePharse(new g("contentchange")),this._interactChange()),this._hasEnterExecCommand=!1),void 0===d?null:d)}}),d.exports=i}},b[12]={value:function(a,c,d){function e(a){switch(a.version||(a.root?"1.4.0":"1.1.3")){case"1.1.3":h(a);case"1.2.0":case"1.2.1":g(a);case"1.3.0":case"1.3.1":case"1.3.2":case"1.3.3":case"1.3.4":case"1.3.5":i(a)}return a}function f(a,b){b(a),a.children&&a.children.forEach(function(a){f(a,b)})}function g(a){f(a,function(a){var b=a.data;delete b.layout_bottom_offset,delete b.layout_default_offset,delete b.layout_filetree_offset})}function h(a){var b=a.data.currentstyle;delete a.data.currentstyle,"bottom"==b?(a.template="structure",a.theme="snow"):"default"==b&&(a.template="default",a.theme="classic"),f(a,function(a){var b=a.data;"PriorityIcon"in b&&(b.priority=b.PriorityIcon,delete b.PriorityIcon),"ProgressIcon"in b&&(b.progress=1+(b.ProgressIcon-1<<1),delete b.ProgressIcon),delete b.point,delete b.layout})}function i(a){a.root={data:a.data,children:a.children},delete a.data,delete a.children}b.r(35);return e}},b[13]={value:function(a,c,d){function e(a,b){k[a]=b}var f=b.r(19),g=b.r(35),h=b.r(22),i=b.r(21),j=b.r(23),k={};e("default",function(a,b,c){c.setPathData(["M",b.getLayoutVertexOut(),"L",a.getLayoutVertexIn()])}),f.extendClass(j,{getConnect:function(){return this.data.connect||"default"},getConnectProvider:function(){return k[this.getConnect()]||k.default},getConnection:function(){return this._connection||null}}),f.extendClass(i,{getConnectContainer:function(){return this._connectContainer},createConnect:function(a){if(!a.isRoot()){var b=new f.Path;a._connection=b,this._connectContainer.addShape(b),this.updateConnect(a)}},removeConnect:function(a){var b=this;a.traverse(function(a){b._connectContainer.removeShape(a._connection),a._connection=null})},updateConnect:function(a){var b=a._connection,c=a.parent;if(c&&b){if(c.isCollapsed())return void b.setVisible(!1);b.setVisible(!0);var d=a.getConnectProvider(),e=a.getStyle("connect-color")||"white",f=a.getStyle("connect-width")||2;b.stroke(e,f),d(a,c,b,f,e),f%2==0?b.setTranslate(.5,.5):b.setTranslate(0,0)}}}),h.register("Connect",{init:function(){this._connectContainer=(new f.Group).setId(g.uuid("minder_connect_group")),this.getRenderContainer().prependShape(this._connectContainer)},events:{nodeattach:function(a){this.createConnect(a.node)},nodedetach:function(a){this.removeConnect(a.node)},"layoutapply layoutfinish noderender":function(a){this.updateConnect(a.node)}}}),c.register=e}},b[14]={value:function(a,c,d){function e(a,b){l[a]=b;for(var c in l)l.hasOwnProperty(c)&&(l[c]=l[c],l[c].name=c)}function f(a){return void 0===a?l:l[a]||null}var g=b.r(19),h=(b.r(35),b.r(21)),i=(b.r(23),b.r(15)),j=b.r(12),k=b.r(27),l={};c.registerProtocol=e,c.getRegisterProtocol=f,g.extendClass(h,{setup:function(a){if("string"==typeof a&&(a=document.querySelector(a)),a){var b=a.getAttribute("minder-data-type");if(b in l){var c=a.textContent;a.textContent=null,this.renderTo(a),this.importData(b,c)}return this}},exportJson:function(){function a(b){var c={};c.data=b.getData();var d=b.getChildren();c.children=[];for(var e=0;e<d.length;e++)c.children.push(a(d[e]));return c}var b={root:a(this.getRoot())};return b.template=this.getTemplate(),b.theme=this.getTheme(),b.version=h.version,JSON.parse(JSON.stringify(b))},Text2Children:function(a,b){function c(a){return""===a&&!/\S/.test(a)}function d(a){return{data:{text:a.replace(/^(\t|\x20{4})+/,"").replace(/(\t|\x20{4})+$/,"")},children:[]}}function e(a){for(var b=0;m.test(a);)a=a.replace(m,""),b++;return b}function f(a,b){a.children.push(b)}function g(a,b){for(var c=0,d=b.length;c<d;c++){var e=q.createNode(null,a);e.setData("text",b[c].data.text||""),g(e,b[c].children)}}if(a instanceof kityminder.Node){for(var h,i=[],j={},k=0,l=/\r|\n|\r\n/,m=/^(\t|\x20{4})/,n=b.split(l),o="",p=0,q=this;void 0!==(o=n[p++]);)if(o=o.replace(/&nbsp;/g,""),!c(o))if(k=e(o),h=d(o),0===k)j={},i.push(h),j[0]=i[i.length-1];else{if(!j[k-1])throw new Error("Invalid local format");f(j[k-1],h),j[k]=h}g(a,i),q.refresh()}},exportNode:function(a){var b={};b.data=a.getData();var c=a.getChildren();b.children=[];for(var d=0;d<c.length;d++)b.children.push(this.exportNode(c[d]));return b},importNode:function(a,b){var c=b.data;a.data={};for(var d in c)a.setData(d,c[d]);for(var e=b.children||[],f=0;f<e.length;f++){var g=this.createNode(null,a);this.importNode(g,e[f])}return a},importJson:function(a){if(a){for(this._fire(new i("preimport",null,!1));this._root.getChildren().length;)this.removeNode(this._root.getChildren()[0]);return a=j(a),this.importNode(this._root,a.root),this.setTemplate(a.template||"default"),this.setTheme(a.theme||null),a.relLine&&(this._relLine=a.relLine),this.refresh(),this.fire("import"),this._firePharse({type:"contentchange"}),this._interactChange(),this}},exportData:function(a,b){var c,d;return c=this.exportJson(),!a||(d=l[a])&&d.encode?(this._fire(new i("beforeexport",{json:c,protocolName:a,protocol:d})),k.resolve(d.encode(c,this,b))):k.reject(new Error("Not supported protocol:"+a))},importData:function(a,b,c){var d,e=this;if(a&&(!(d=l[a])||!d.decode))return k.reject(new Error("Not supported protocol:"+a));var f={local:b,protocolName:a,protocol:d};return this._fire(new i("beforeimport",f)),k.resolve(d.decode(b,this,c)).then(function(a){return e.importJson(a),a})},decodeData:function(a,b,c){var d;if(a&&(!(d=l[a])||!d.decode))return k.reject(new Error("Not supported protocol:"+a));var e={local:b,protocolName:a,protocol:d};return this._fire(new i("beforeimport",e)),k.resolve(d.decode(b,this,c))}})}},b[15]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21)),g=e.createClass("MindEvent",{constructor:function(a,b,c){b=b||{},b.getType&&"ShapeEvent"==b.getType()?(this.kityEvent=b,this.originEvent=b.originEvent):b.target&&b.preventDefault?this.originEvent=b:e.Utils.extend(this,b),this.type=a,this._canstop=c||!1},getPosition:function(a){if(this.kityEvent)return a&&"minder"!=a?this.kityEvent.getPosition.call(this.kityEvent,a):this.kityEvent.getPosition(this.minder.getRenderContainer())},getTargetNode:function(){var a=this.kityEvent&&this.kityEvent.targetShape;if(!a)return null;for(;!a.minderNode&&a.container;)a=a.container;var b=a.minderNode;return b&&a.getOpacity()<1?null:b||null},stopPropagation:function(){this._stoped=!0},stopPropagationImmediately:function(){this._immediatelyStoped=!0,this._stoped=!0},shouldStopPropagation:function(){return this._canstop&&this._stoped},shouldStopPropagationImmediately:function(){return this._canstop&&this._immediatelyStoped},preventDefault:function(){this.originEvent.preventDefault()},isRightMB:function(){var a=!1;return!!this.originEvent&&("which"in this.originEvent?a=3==this.originEvent.which:"button"in this.originEvent&&(a=2==this.originEvent.button),a)},getKeyCode:function(){var a=this.originEvent;return a.keyCode||a.which}});f.registerInitHook(function(a){this._initEvents()}),e.extendClass(f,{_initEvents:function(){this._eventCallbacks={}},_resetEvents:function(){this._initEvents(),this._bindEvents()},_bindEvents:function(){this._paper.on("click dblclick mousedown contextmenu mouseup mousemove mouseover mousewheel DOMMouseScroll touchstart touchmove touchend dragenter dragleave drop",this._firePharse.bind(this)),window&&window.addEventListener("resize",this._firePharse.bind(this))},dispatchKeyEvent:function(a){this._firePharse(a)},_firePharse:function(a){var b,c,d;"DOMMouseScroll"==a.type&&(a.type="mousewheel",a.wheelDelta=a.originEvent.wheelDelta=-10*a.originEvent.detail,a.wheelDeltaX=a.originEvent.mozMovementX,a.wheelDeltaY=a.originEvent.mozMovementY),b=new g("before"+a.type,a,!0),this._fire(b)||(c=new g("pre"+a.type,a,!0),d=new g(a.type,a,!0),(this._fire(c)||this._fire(d))&&this._fire(new g("after"+a.type,a,!1)))},_interactChange:function(a){var b=this;b._interactScheduled||(setTimeout(function(){b._fire(new g("interactchange")),b._interactScheduled=!1},100),b._interactScheduled=!0)},_listen:function(a,b){(this._eventCallbacks[a]||(this._eventCallbacks[a]=[])).push(b)},_fire:function(a){a.minder=this;var b=this.getStatus(),c=this._eventCallbacks[a.type.toLowerCase()]||[];if(b&&(c=c.concat(this._eventCallbacks[b+"."+a.type.toLowerCase()]||[])),0!==c.length){for(var d=(this.getStatus(),0);d<c.length&&(c[d].call(this,a),!a.shouldStopPropagationImmediately());d++);return a.shouldStopPropagation()}},on:function(a,b){var c=this;return a.split(/\s+/).forEach(function(a){c._listen(a.toLowerCase(),b)}),this},off:function(a,b){var c,d,e,f,g=a.split(/\s+/);for(c=0;c<g.length;c++)if(e=this._eventCallbacks[g[c].toLowerCase()]){for(f=null,d=0;d<e.length;d++)e[d]==b&&(f=d);null!==f&&e.splice(f,1)}},fire:function(a,b){var c=new g(a,b);return this._fire(c),this}}),d.exports=g}},b[16]={value:function(a,c,d){var e=b.r(19),f=b.r(21);f.registerInitHook(function(){this.on("beforemousedown",function(a){this.focus(),a.preventDefault()}),this.on("paperrender",function(){this.focus()})}),e.extendClass(f,{focus:function(){if(!this.isFocused()){this._renderTarget.classList.add("focus"),this.renderNodeBatch(this.getSelectedNodes())}return this.fire("focus"),this},blur:function(){if(this.isFocused()){this._renderTarget.classList.remove("focus"),this.renderNodeBatch(this.getSelectedNodes())}return this.fire("blur"),this},isFocused:function(){var a=this._renderTarget;return a&&a.classList.contains("focus")}})}},b[17]={value:function(a,b,c){var d={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Left:37,Up:38,Right:39,Down:40,direction:{37:1,38:1,39:1,40:1},Del:46,NumLock:144,Cmd:91,CmdFF:224,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"`":192,"=":187,"-":189,"/":191,".":190,controlKeys:{16:1,17:1,18:1,20:1,91:1,224:1},notContentChange:{13:1,9:1,33:1,34:1,35:1,36:1,16:1,17:1,18:1,20:1,91:1,37:1,38:1,39:1,40:1,113:1,114:1,115:1,144:1,27:1},isSelectedNodeKey:{37:1,38:1,39:1,40:1,13:1,9:1}};for(var e in d)d.hasOwnProperty(e)&&(d[e.toLowerCase()]=d[e]);var f="a".charCodeAt(0);"abcdefghijklmnopqrstuvwxyz".split("").forEach(function(a){d[a]=a.charCodeAt(0)-f+65});var g=9;do{d[g.toString()]=g+48}while(--g);c.exports=d}},b[18]={value:function(a,c,d){function e(a,b,c){b.split(" ").forEach(function(b){a.addEventListener(b,c,!1)})}var f=b.r(19),g=(b.r(35),b.r(21));g.registerInitHook(function(a){this.setDefaultOptions({enableKeyReceiver:!0}),this.getOption("enableKeyReceiver")&&this.on("paperrender",function(){this._initKeyReceiver()})}),f.extendClass(g,{_initKeyReceiver:function(){if(!this._keyReceiver){var a=this._keyReceiver=document.createElement("input");a.classList.add("km-receiver");this._renderTarget.appendChild(a);var b=this;e(a,"keydown keyup keypress copy paste blur focus input",function(c){switch(c.type){case"blur":b.blur();break;case"focus":b.focus();break;case"input":a.value=null}b._firePharse(c),c.preventDefault()}),this.on("focus",function(){a.select(),a.focus()}),this.on("blur",function(){a.blur()}),this.isFocused()&&(a.select(),a.focus())}}})}},b[19]={value:function(a,b,c){c.exports=window.kity}},b[20]={value:function(a,c,d){function e(a,b){k[a]=b,f=f||a}var f,g=b.r(19),h=b.r(35),i=b.r(21),j=b.r(23),k=(b.r(15),b.r(11),{}),l=g.createClass("Layout",{doLayout:function(a,b){throw new Error("Not Implement: Layout.doLayout()")},align:function(a,b,c){var d=this;c=c||0,a.forEach(function(a){var e=d.getTreeBox([a]),f=a.getLayoutTransform();switch(b){case"left":return f.translate(c-e.left,0);case"right":return f.translate(c-e.right,0);case"top":return f.translate(0,c-e.top);case"bottom":return f.translate(0,c-e.bottom)}})},stack:function(a,b,c){var d=this,e=0;return c=c||function(a,b,c){return a.getStyle({x:"margin-right",y:"margin-bottom"}[c])+b.getStyle({x:"margin-left",y:"margin-top"}[c])},a.forEach(function(a,f,g){var h=d.getTreeBox([a]),i={x:h.width,y:h.height}[b],j={x:h.left,y:h.top}[b],k=a.getLayoutTransform();"x"==b?k.translate(e-j,0):k.translate(0,e-j),e+=i,g[f+1]&&(e+=c(a,g[f+1],b))}),e},move:function(a,b,c){a.forEach(function(a){a.getLayoutTransform().translate(b,c)}),"undefined"!=typeof km&&"function"==typeof km._relLine_render&&km._relLine_render(300)},getBranchBox:function(a){var b,c,d,e,f=new g.Box;for(b=0;b<a.length;b++)c=a[b],d=c.getLayoutTransform(),e=c.getContentBox(),f=f.merge(d.transformBox(e));return f},getTreeBox:function(a){var b,c,d,e,f=new g.Box;for(a instanceof Array||(a=[a]),b=0;b<a.length;b++)c=a[b],d=c.getLayoutTransform(),e=c.getContentBox(),c.isExpanded()&&c.children.length&&(e=e.merge(this.getTreeBox(c.children))),f=f.merge(d.transformBox(e));return f},getOrderHint:function(a){return[]}});l.register=e,i.registerInitHook(function(a){this.refresh()}),h.extend(i,{getLayoutList:function(){return k},getLayoutInstance:function(a){var b=k[a];if(!b)throw new Error("Missing Layout: "+a);return new b}}),g.extendClass(j,{getLayout:function(){var a=this.getData("layout");return a=a||(this.isRoot()?f:this.parent.getLayout())},setLayout:function(a){return a&&("inherit"==a?this.setData("layout"):this.setData("layout",a)),this},layout:function(a){return this.setLayout(a).getMinder().layout(),this},getLayoutInstance:function(){return i.getLayoutInstance(this.getLayout())},getOrderHint:function(a){return this.parent.getLayoutInstance().getOrderHint(this)},getLayoutTransform:function(){return this._layoutTransform||new g.Matrix},getGlobalLayoutTransformPreview:function(){var a=this.parent?this.parent.getLayoutTransform():new g.Matrix,b=this.getLayoutTransform(),c=this.getLayoutOffset();return c&&(b=b.clone().translate(c.x,c.y)),a.merge(b)},getLayoutPointPreview:function(){return this.getGlobalLayoutTransformPreview().transformPoint(new g.Point)},getGlobalLayoutTransform:function(){return this._globalLayoutTransform?this._globalLayoutTransform:this.parent?this.parent.getGlobalLayoutTransform():new g.Matrix},setLayoutTransform:function(a){return this._layoutTransform=a,this},setGlobalLayoutTransform:function(a){return this.getRenderContainer().setMatrix(this._globalLayoutTransform=a),this},setVertexIn:function(a){this._vertexIn=a},setVertexOut:function(a){this._vertexOut=a},getVertexIn:function(){return this._vertexIn||new g.Point},getVertexOut:function(){return this._vertexOut||new g.Point},getLayoutVertexIn:function(){return this.getGlobalLayoutTransform().transformPoint(this.getVertexIn())},getLayoutVertexOut:function(){return this.getGlobalLayoutTransform().transformPoint(this.getVertexOut())},setLayoutVectorIn:function(a){return this._layoutVectorIn=a,this},setLayoutVectorOut:function(a){return this._layoutVectorOut=a,this},getLayoutVectorIn:function(){return this._layoutVectorIn||new g.Vector},getLayoutVectorOut:function(){return this._layoutVectorOut||new g.Vector},getLayoutBox:function(){return this.getGlobalLayoutTransform().transformBox(this.getContentBox())},getLayoutPoint:function(){return this.getGlobalLayoutTransform().transformPoint(new g.Point)},getLayoutOffset:function(){if(!this.parent)return new g.Point;var a=this.getData("layout_"+this.parent.getLayout()+"_offset");return a?new g.Point(a.x,a.y):new g.Point},setLayoutOffset:function(a){return this.parent?(this.setData("layout_"+this.parent.getLayout()+"_offset",a?{x:a.x,y:a.y}:void 0),this):this},hasLayoutOffset:function(){return!!this.getData("layout_"+this.parent.getLayout()+"_offset")},resetLayoutOffset:function(){return this.setLayoutOffset(null)},getLayoutRoot:function(){return this.isLayoutRoot()?this:this.parent.getLayoutRoot()},isLayoutRoot:function(){return this.getData("layout")||this.isRoot()}}),g.extendClass(i,{layout:function(){function a(b,c){b.isExpanded(),b.children.forEach(function(b){a(b,c)}),b.getLayoutInstance().doLayout(b,b.getChildren(),c)}var b=this.getOption("layoutAnimationDuration");this.getRoot().traverse(function(a){a.setLayoutTransform(null)}),a(this.getRoot(),1),a(this.getRoot(),2);var c=this;return this.applyLayoutResult(this.getRoot(),b,function(){setTimeout(function(){c.fire("layoutallfinish")},0)}),this.fire("layout")},refresh:function(){return this.getRoot().renderTree(),this.layout().fire("contentchange")._interactChange(),this},applyLayoutResult:function(a,b,c){function d(){--i||c&&c()}function e(a,b){a.setGlobalLayoutTransform(b),h.fire("layoutapply",{node:a,matrix:b})}function f(a,c){var i=a.getLayoutTransform().merge(c.clone()),j=a.getGlobalLayoutTransform()||new g.Matrix,k=a.getLayoutOffset();i.translate(k.x,k.y),i.m.e=Math.round(i.m.e),i.m.f=Math.round(i.m.f),a._layoutTimeline&&(a._layoutTimeline.stop(),a._layoutTimeline=null),b?a._layoutTimeline=new g.Animator(j,i,e).start(a,b,"ease").on("finish",function(){setTimeout(function(){e(a,i),h.fire("layoutfinish",{node:a,matrix:i}),d()},150)}):(e(a,i),h.fire("layoutfinish",{node:a,matrix:i}),d());for(var l=0;l<a.children.length;l++)f(a.children[l],i)}a=a||this.getRoot();var h=this,i=a.getComplex();return i>200&&(b=0),f(a,a.parent?a.parent.getGlobalLayoutTransform():new g.Matrix),"function"==typeof this._relLine_render&&this._relLine_render(),this}}),d.exports=l}},b[21]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=[],h=e.createClass("Minder",{constructor:function(a){this._options=f.extend({},a);for(var b,c=g.slice();c.length;)"function"==typeof(b=c.shift())&&b.call(this,this._options);this.fire("finishInitHook")}});h.version="1.4.43",h.registerInitHook=function(a){g.push(a)},d.exports=h}},b[22]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=b.r(21),h={};c.register=function(a,b){h[a]=b},g.registerInitHook(function(){this._initModules()}),e.extendClass(g,{_initModules:function(){var a=h,b=this._options.modules||f.keys(a);this._commands={},this._query={},this._modules={},this._rendererClasses={};var c,d,e,g,i,j,k,l=this;for(c=0;c<b.length;c++)if(d=b[c],a[d]&&(g="function"==typeof a[d]?a[d].call(l):a[d],this._modules[d]=g,g)){g.defaultOptions&&l.setDefaultOptions(g.defaultOptions),g.init&&g.init.call(l,this._options),i=g.commands;for(d in i)this._commands[d.toLowerCase()]=new i[d];if(j=g.events)for(e in j)l.on(e,j[e]);if(k=g.renderers)for(e in k)this._rendererClasses[e]=this._rendererClasses[e]||[],f.isArray(k[e])?this._rendererClasses[e]=this._rendererClasses[e].concat(k[e]):this._rendererClasses[e].push(k[e]);g.commandShortcutKeys&&this.addCommandShortcutKeys(g.commandShortcutKeys)}},_garbage:function(){for(this.clearSelect();this._root.getChildren().length;)this._root.removeChild(0)},destroy:function(){var a=this._modules;this._resetEvents(),this._garbage();for(var b in a)a[b].destroy&&a[b].destroy.call(this)},reset:function(){var a=this._modules;this._garbage();for(var b in a)a[b].reset&&a[b].reset.call(this)}})}},b[23]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=b.r(21),h=e.createClass("MinderNode",{constructor:function(a){this.parent=null,this.root=this,this.children=[],this.data={id:f.guid(),created:+new Date},this.initContainers(),f.isString(a)?this.setText(a):f.isObject(a)&&f.extend(this.data,a)},initContainers:function(){this.rc=(new e.Group).setId(f.uuid("minder_node")),this.rc.minderNode=this},isRoot:function(){return this.root===this},isLeaf:function(){return 0===this.children.length},getRoot:function(){return this.root||this},getParent:function(){return this.parent},getSiblings:function(){var a=this.parent.children,b=[],c=this;return a.forEach(function(a){a!=c&&b.push(a)}),b},getLevel:function(){for(var a=0,b=this.parent;b;)a++,b=b.parent;return a},getComplex:function(){var a=0;return this.traverse(function(){a++}),a},getType:function(a){return this.type=["root","main","sub"][Math.min(this.getLevel(),2)],this.type},isAncestorOf:function(a){for(var b=a.parent;b;){if(b==this)return!0;b=b.parent}return!1},getData:function(a){return a?this.data[a]:this.data},setData:function(a,b){if("object"==typeof a){var c=a;for(a in c)c.hasOwnProperty(a)&&(this.data[a]=c[a])}else this.data[a]=b;return this},setText:function(a){return this.data.text=a},getText:function(){return this.data.text||null},preTraverse:function(a,b){var c=this.getChildren();b||a(this);for(var d=0;d<c.length;d++)c[d].preTraverse(a)},postTraverse:function(a,b){for(var c=this.getChildren(),d=0;d<c.length;d++)c[d].postTraverse(a);b||a(this)},traverse:function(a,b){return this.postTraverse(a,b)},getChildren:function(){return this.children},getIndex:function(){return this.parent?this.parent.children.indexOf(this):-1},insertChild:function(a,b){void 0===b&&(b=this.children.length),a.parent&&a.parent.removeChild(a),a.parent=this,a.root=this.root,this.children.splice(b,0,a)},appendChild:function(a){return this.insertChild(a)},prependChild:function(a){return this.insertChild(a,0)},removeChild:function(a){var b,c=a;a instanceof h&&(c=this.children.indexOf(a)),c>=0&&(b=this.children.splice(c,1)[0],b.parent=null,b.root=b)},clearChildren:function(){this.children=[]},getChild:function(a){return this.children[a]},getRenderContainer:function(){return this.rc},getCommonAncestor:function(a){return h.getCommonAncestor(this,a)},contains:function(a){return this==a||this.isAncestorOf(a)},clone:function(){var a=new h;return a.data=f.clone(this.data),this.children.forEach(function(b){a.appendChild(b.clone())}),a},compareTo:function(a){if(!f.comparePlainObject(this.data,a.data))return!1;if(!f.comparePlainObject(this.temp,a.temp))return!1;if(this.children.length!=a.children.length)return!1;for(var b=0;this.children[b];){if(!this.children[b].compareTo(a.children[b]))return!1;b++}return!0},getMinder:function(){return this.getRoot().minder}});h.getCommonAncestor=function(a,b){if(a instanceof Array)return h.getCommonAncestor.apply(this,a);switch(arguments.length){case 1:return a.parent||a;case 2:if(a.isAncestorOf(b))return a;if(b.isAncestorOf(a))return b;for(var c=a.parent;c&&!c.isAncestorOf(b);)c=c.parent;return c;default:return Array.prototype.reduce.call(arguments,function(a,b){return h.getCommonAncestor(a,b)},a)}},e.extendClass(g,{getRoot:function(){return this._root},setRoot:function(a){this._root=a,a.minder=this},getAllNode:function(){var a=[];return this.getRoot().traverse(function(b){a.push(b)}),a},getNodeById:function(a){return this.getNodesById([a])[0]},getNodesById:function(a){var b=this.getAllNode(),c=[];return b.forEach(function(b){-1!=a.indexOf(b.getData("id"))&&c.push(b)}),c},createNode:function(a,b,c){var d=new h(a);return this.fire("nodecreate",{node:d,parent:b,index:c}),this.appendNode(d,b,c),d},appendNode:function(a,b,c){return b&&b.insertChild(a,c),this.attachNode(a),this},removeNode:function(a){a.parent&&(a.parent.removeChild(a),this.detachNode(a),this.fire("noderemove",{node:a}))},attachNode:function(a){var b=this.getRenderContainer();a.traverse(function(a){a.attached=!0,b.addShape(a.getRenderContainer())}),b.addShape(a.getRenderContainer()),this.fire("nodeattach",{node:a})},detachNode:function(a){var b=this.getRenderContainer();a.traverse(function(a){a.attached=!1,b.removeShape(a.getRenderContainer())}),this.fire("nodedetach",{node:a})},getMinderTitle:function(){return this.getRoot().getText()}}),d.exports=h}},b[24]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=b.r(21);g.registerInitHook(function(a){this._defaultOptions={}}),e.extendClass(g,{setDefaultOptions:function(a){return f.extend(this._defaultOptions,a),this},getOption:function(a){return a?a in this._options?this._options[a]:this._defaultOptions[a]:f.extend({},this._defaultOptions,this._options)},setOption:function(a,b){this._options[a]=b}})}},b[25]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=b.r(21);g.registerInitHook(function(){this._initPaper()}),e.extendClass(g,{_initPaper:function(){this._paper=new e.Paper,this._paper._minder=this,this._paper.getNode().ondragstart=function(a){a.preventDefault()},this._paper.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),this._addRenderContainer(),this.setRoot(this.createNode()),this._options.renderTo&&this.renderTo(this._options.renderTo)},_addRenderContainer:function(){this._rc=(new e.Group).setId(f.uuid("minder")),this._paper.addShape(this._rc)},renderTo:function(a){if("string"==typeof a&&(a=document.querySelector(a)),a){if("script"==a.tagName.toLowerCase()){var b=document.createElement("div");b.id=a.id,b.class=a.class,a.parentNode.insertBefore(b,a),a.parentNode.removeChild(a),a=b}a.classList.add("km-view"),this._paper.renderTo(this._renderTarget=a),this._bindEvents(),this.fire("paperrender")}return this},getRenderContainer:function(){return this._rc},getPaper:function(){return this._paper},getRenderTarget:function(){return this._renderTarget}})}},b[26]={value:function(a,c,d){function e(a,b,c,d){return c=a.createNode(b.data,c,d),b.children.forEach(function(b,d){e(a,b,c,d)}),c}function f(a,b){var c=b.path.split("/");c.shift();var d,f=c.shift();if("root"==f){var g=c.indexOf("data");if(g>-1){f="data";var h=c.splice(g+1);b.dataPath=h}else f="node";d=a.getRoot();for(var i,j;i=c.shift();)"children"!=i&&(void 0!==j&&(d=d.getChild(j)),j=+i);b.index=j,b.node=d}switch(b.express=[f,b.op].join(".")){case"theme.replace":a.useTheme(b.value);break;case"template.replace":a.useTemplate(b.value);break;case"node.add":e(a,b.value,b.node,b.index).renderTree(),a.layout();break;case"node.remove":a.removeNode(b.node.getChild(b.index)),a.layout();break;case"data.add":case"data.replace":case"data.remove":var k,l=b.node.data;for(c=b.dataPath.slice();l&&c.length>1;)k=c.shift(),k in l?l=l[k]:"remove"!=b.op&&(l=l[k]={});l&&(k=c.shift(),l[k]=b.value),"expandState"==k?d.renderTree():d.render(),a.layout()}a.fire("patch",{patch:b})}var g=b.r(19),h=b.r(21);g.extendClass(h,{applyPatches:function(a){for(var b=0;b<a.length;b++)f(this,a[b]);return this.fire("contentchange"),this}})}},b[27]={value:function(a,b,c){var d=0,e=1,f=2,g=function(a){if(!(this instanceof g))return new g(a);this.id="Thenable/1.0.7",this.state=d,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],"function"==typeof a&&a.call(this,this.fulfill.bind(this),this.reject.bind(this))};g.prototype={fulfill:function(a){return h(this,e,"fulfillValue",a)},reject:function(a){return h(this,f,"rejectReason",a)},then:function(a,b){var c=this,d=new g;return c.onFulfilled.push(k(a,d,"fulfill")),c.onRejected.push(k(b,d,"reject")),i(c),d}},g.all=function(a){return new g(function(b,c){var d=a.length,e=0,f=0,g=[];for(0===d&&b(g);e<d;)a[e].then(function(a){g.push(a),++f===d&&b(g)},function(a){c(a)}),e++})};var h=function(a,b,c,e){return a.state===d&&(a.state=b,a[c]=e,i(a)),a},i=function(a){a.state===e?j(a,"onFulfilled",a.fulfillValue):a.state===f&&j(a,"onRejected",a.rejectReason)},j=function(a,b,c){if(0!==a[b].length){var d=a[b];a[b]=[];var e=function(){for(var a=0;a<d.length;a++)d[a](c)};"object"==typeof process&&"function"==typeof process.nextTick?process.nextTick(e):"function"==typeof setImmediate?setImmediate(e):setTimeout(e,0)}},k=function(a,b,c){return function(d){if("function"!=typeof a)b[c].call(b,d);else{var e;try{e=d instanceof g?d.then(a):a(d)}catch(a){return void b.reject(a)}l(b,e)}}},l=function(a,b){if(a===b)return void a.reject(new TypeError("cannot resolve promise with itself"));var c;if("object"==typeof b&&null!==b||"function"==typeof b)try{c=b.then}catch(b){return void a.reject(b)}if("function"!=typeof c)a.fulfill(b);else{var d=!1;try{c.call(b,function(c){d||(d=!0,c===b?a.reject(new TypeError("circular thenable chain")):l(a,c))},function(b){d||(d=!0,a.reject(b))})}catch(b){d||a.reject(b)}}};g.resolve=function(a){return new g(function(b){b(a)})},g.reject=function(a){return new g(function(b,c){c(a)})},c.exports=g}},b[28]={value:function(a,c,d){var e=b.r(19),f=b.r(21);b.r(15);f.registerInitHook(function(a){a.readOnly&&this.setDisabled()}),e.extendClass(f,{disable:function(){var a=this;a.bkqueryCommandState=a.queryCommandState,a.bkqueryCommandValue=a.queryCommandValue,a.queryCommandState=function(b){var c=this._getCommand(b);return c&&c.enableReadOnly?a.bkqueryCommandState.apply(a,arguments):-1},a.queryCommandValue=function(b){var c=this._getCommand(b);return c&&c.enableReadOnly?a.bkqueryCommandValue.apply(a,arguments):null},this.setStatus("readonly"),a._interactChange()},enable:function(){var a=this;a.bkqueryCommandState&&(a.queryCommandState=a.bkqueryCommandState,delete a.bkqueryCommandState),a.bkqueryCommandValue&&(a.queryCommandValue=a.bkqueryCommandValue,delete a.bkqueryCommandValue),this.setStatus("normal"),a._interactChange()}})}},b[29]={value:function(a,c,d){function e(){function a(a,b){var c=[];["center","left","right","top","bottom","outline","outside"].forEach(function(a){var d="before"+a,e="after"+a;b[d]&&(c=c.concat(b[d])),b[a]&&(c=c.concat(b[a])),b[e]&&(c=c.concat(b[e]))}),a._renderers=c.map(function(b){return new b(a)})}return{renderNodeBatch:function(b){var c,d,e,g,h=this._rendererClasses,i=[],j=0;if(b.length){for(d=0;d<b.length;d++)g=b[d],g._renderers||a(g,h),g._contentBox=new f.Box,this.fire("beforerender",{node:g});for(j=b[0]._renderers.length,c=0;c<j;c++){for(d=0;d<b.length;d++)"function"==typeof i[d]&&(i[d]=i[d]()),i[d]instanceof f.Box||(i[d]=new f.Box(i[d]));for(d=0;d<b.length;d++)g=b[d],e=g._renderers[c],i[d]&&(g._contentBox=g._contentBox.merge(i[d]),e.contentBox=i[d]),e.shouldRender(g)?(e.getRenderShape()||(e.setRenderShape(e.create(g)),e.bringToBack?g.getRenderContainer().prependShape(e.getRenderShape()):g.getRenderContainer().appendShape(e.getRenderShape())),e.getRenderShape().setVisible(!0),i[d]=e.update(e.getRenderShape(),g,g._contentBox)):e.getRenderShape()&&(e.getRenderShape().setVisible(!1),i[d]=null)}for(d=0;d<b.length;d++)this.fire("noderender",{node:b[d]})}},renderNode:function(b){var c,d=this._rendererClasses;b._renderers||a(b,d),this.fire("beforerender",{node:b}),b._contentBox=new f.Box,b._renderers.forEach(function(a){a.shouldRender(b)?(a.getRenderShape()||(a.setRenderShape(a.create(b)),a.bringToBack?b.getRenderContainer().prependShape(a.getRenderShape()):b.getRenderContainer().appendShape(a.getRenderShape())),a.getRenderShape().setVisible(!0),c=a.update(a.getRenderShape(),b,b._contentBox),"function"==typeof c&&(c=c()),c&&(b._contentBox=b._contentBox.merge(c),a.contentBox=c)):a.getRenderShape()&&a.getRenderShape().setVisible(!1)}),this.fire("noderender",{node:b})}}}var f=b.r(19),g=b.r(21),h=b.r(23),i=f.createClass("Renderer",{constructor:function(a){this.node=a},create:function(a){throw new Error("Not implement: Renderer.create()")},shouldRender:function(a){return!0},watchChange:function(a){void 0===this.watchingData||this.watchingData,this.watchingData=a},shouldDraw:function(a){return!0},update:function(a,b,c){return this.shouldDraw()&&this.draw(a,b),this.place(a,b,c)},draw:function(a,b){throw new Error("Not implement: Renderer.draw()")},place:function(a,b,c){throw new Error("Not implement: Renderer.place()")},getRenderShape:function(){return this._renderShape||null},setRenderShape:function(a){this._renderShape=a}});f.extendClass(g,e()),f.extendClass(h,{render:function(){if(this.attached)return this.getMinder().renderNode(this),window.km&&"function"==typeof window.km._relLine_render&&window.km._relLine_render(),this},renderTree:function(){if(this.attached){var a=[];return this.traverse(function(b){a.push(b)}),this.getMinder().renderNodeBatch(a),window.km&&"function"==typeof window.km._relLine_render&&window.km._relLine_render(0,!0),this}},getRenderer:function(a){var b=this._renderers;if(!b)return null;for(var c=0;c<b.length;c++)if(b[c].getType()==a)return b[c];return null},getContentBox:function(){return this.parent&&this.parent.isCollapsed()?new f.Box:this._contentBox||new f.Box},getRenderBox:function(a,b){var c=a&&this.getRenderer(a),d=c?c.contentBox:this.getContentBox();return f.Matrix.getCTM(this.getRenderContainer(),b||"paper").transformBox(d)}}),d.exports=i}},b[30]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=b.r(21),h=b.r(23);g.registerInitHook(function(){this._initSelection()}),e.extendClass(g,{_initSelection:function(){this._selectedNodes=[]},renderChangedSelection:function(a){var b=this.getSelectedNodes(),c=[];for(b.forEach(function(b){-1==a.indexOf(b)&&c.push(b)}),a.forEach(function(a){-1==b.indexOf(a)&&c.push(a)}),c.length&&(this._interactChange(),this.fire("selectionchange"));c.length;)c.shift().render()},getSelectedNodes:function(){return this._selectedNodes},getSelectedNode:function(){return this.getSelectedNodes()[0]||null},removeAllSelectedNodes:function(){var a=this._selectedNodes.splice(0);return this._selectedNodes=[],this.renderChangedSelection(a),this.fire("selectionclear")},removeSelectedNodes:function(a){var b=this,c=this._selectedNodes.slice(0);return a=f.isArray(a)?a:[a],a.forEach(function(a){var c;-1!==(c=b._selectedNodes.indexOf(a))&&b._selectedNodes.splice(c,1)}),this.renderChangedSelection(c),this},select:function(a,b){var c=this.getSelectedNodes().slice(0);b&&(this._selectedNodes=[]);var d=this;return a=f.isArray(a)?a:[a],a.forEach(function(a){-1===d._selectedNodes.indexOf(a)&&d._selectedNodes.unshift(a)}),this.renderChangedSelection(c),this},selectById:function(a,b){a=f.isArray(a)?a:[a];var c=this.getNodesById(a);return this.select(c,b)},toggleSelect:function(a){return f.isArray(a)?a.forEach(this.toggleSelect.bind(this)):a.isSelected()?this.removeSelectedNodes(a):this.select(a),this},isSingleSelect:function(){return 1==this._selectedNodes.length},getSelectedAncestors:function(a){function b(a,b){for(var c=a.length-1;c>=0;--c)if(a[c].isAncestorOf(b))return!0;return!1}var c,d=this.getSelectedNodes().slice(0),e=[],f=d.indexOf(this.getRoot());for(~f&&!a&&d.splice(f,1),d.sort(function(a,b){return a.getLevel()-b.getLevel()});c=d.pop();)b(d,c)||e.push(c);return e}}),e.extendClass(h,{isSelected:function(){var a=this.getMinder();return a&&-1!=a.getSelectedNodes().indexOf(this)}})}},b[31]={value:function(a,c,d){function e(a){var b=4096,c=8192,d=16384,e=0;return"string"==typeof a?a.toLowerCase().split(/\+\s*/).forEach(function(a){switch(a){case"ctrl":case"cmd":e|=b;break;case"alt":e|=c;break;case"shift":e|=d;break;default:e|=h[a]}}):((a.ctrlKey||a.metaKey)&&(e|=b),a.altKey&&(e|=c),a.shiftKey&&(e|=d),e|=a.keyCode),e}var f=b.r(19),g=b.r(35),h=b.r(17),i=b.r(21),j=b.r(15);f.extendClass(j,{isShortcutKey:function(a){var b=this.originEvent;return!!b&&e(a)==e(b)}}),i.registerInitHook(function(){this._initShortcutKey()}),f.extendClass(i,{_initShortcutKey:function(){this._bindShortcutKeys()},_bindShortcutKeys:function(){var a=this._shortcutKeys={};this.on("keydown",function(b){for(var c in a)if(a.hasOwnProperty(c)&&b.isShortcutKey(c)){var d=a[c];if(d.__statusCondition&&d.__statusCondition!=this.getStatus())return;d(),b.preventDefault()}})},addShortcut:function(a,b){var c=this._shortcutKeys;a.split(/\|\s*/).forEach(function(a){var d,e=a.split("::");e.length>1&&(a=e[1],d=e[0],b.__statusCondition=d),c[a]=b})},addCommandShortcutKeys:function(a,b){var c=this._commandShortcutKeys||(this._commandShortcutKeys={}),d={};b?d[a]=b:d=a;var e=this;g.each(d,function(a,b){c[b]=a,e.addShortcut(a,function(){-1!==e.queryCommandState(b)&&e.execCommand(b)})})},getCommandShortcutKey:function(a){var b=this._commandShortcutKeys;return b&&b[a]||null},supportClipboardEvent:function(a){return!!a.ClipboardEvent}(window)})}},b[32]={value:function(a,c,d){var e=b.r(19),f=b.r(21),g=~window.location.href.indexOf("status"),h=~window.location.href.indexOf("trace");f.registerInitHook(function(){this._initStatus()}),e.extendClass(f,{_initStatus:function(){this._status="normal",this._rollbackStatus="normal"},setStatus:function(a,b){return"readonly"!=this._status||b?(a!=this._status&&(this._rollbackStatus=this._status,this._status=a,this.fire("statuschange",{lastStatus:this._rollbackStatus,currentStatus:this._status}),g&&(console.log(window.event.type,this._rollbackStatus,"->",this._status),h&&console.trace())),this):this},rollbackStatus:function(){this.setStatus(this._rollbackStatus)},getRollbackStatus:function(){return this._rollbackStatus},getStatus:function(){return this._status}})}},b[33]={value:function(a,c,d){function e(a,b){l[a]=b}var f=b.r(19),g=b.r(35),h=b.r(21),i=b.r(11),j=b.r(23),k=b.r(22),l={};c.register=e,g.extend(h,{getTemplateList:function(){return l}}),f.extendClass(h,function(){var a=h.prototype.getTheme;return{useTemplate:function(a,b){this.setTemplate(a),this.refresh(b||800)},getTemplate:function(){return this._template||"default"},setTemplate:function(a){this._template=a||null},getTemplateSupport:function(a){var b=l[this.getTemplate()];return b&&b[a]},getTheme:function(b){return(this.getTemplateSupport("getTheme")||a).call(this,b)}}}()),f.extendClass(j,function(){var a=j.prototype.getLayout,b=j.prototype.getConnect;return{getLayout:function(){return(this.getMinder().getTemplateSupport("getLayout")||a).call(this,this)},getConnect:function(){return(this.getMinder().getTemplateSupport("getConnect")||b).call(this,this)}}}()),k.register("TemplateModule",{commands:{template:f.createClass("TemplateCommand",{base:i,execute:function(a,b){a.useTemplate(b),a.execCommand("camera")},queryValue:function(a){return a.getTemplate()||"default"}})}})}},b[34]={value:function(a,c,d){function e(a,b){m[a]=b}var f=b.r(19),g=b.r(35),h=b.r(21),i=b.r(23),j=b.r(22),k=b.r(11),l={left:function(a){return 3 in a&&a[3]||1 in a&&a[1]||a[0]},right:function(a){return 1 in a&&a[1]||a[0]},top:function(a){return a[0]},bottom:function(a){return 2 in a&&a[2]||a[0]}},m={};c.register=e,g.extend(h,{getThemeList:function(){return m}}),f.extendClass(h,{useTheme:function(a){return this.setTheme(a),this.refresh(800),!0},setTheme:function(a){if(a&&!m[a])throw new Error("Theme "+a+" not exists!");var b=this._theme;this._theme=a||null;var c=this.getRenderTarget();return c&&(c.classList.remove("km-theme-"+b),a&&c.classList.add("km-theme-"+a),c.style.background=this.getStyle("background")),this.fire("themechange",{theme:a}),this},getTheme:function(a){return this._theme||this.getOption("defaultTheme")||"fresh-blue"},getThemeItems:function(a){this.getTheme(a);return m[this.getTheme(a)]},getStyle:function(a,b){var c,d,e,f,h=this.getThemeItems(b);if(a in h)return h[a];if(c=a.split("-"),c.length<2)return null;if(d=c.pop(),(a=c.join("-"))in h){if(e=h[a],g.isArray(e)&&(f=l[d]))return f(e);if(!isNaN(e))return e}return null},getNodeStyle:function(a,b){var c=this.getStyle(a.getType()+"-"+b,a);return null!==c?c:this.getStyle(b,a)}}),f.extendClass(i,{getStyle:function(a){return this.getMinder().getNodeStyle(this,a)}}),j.register("Theme",{defaultOptions:{defaultTheme:"fresh-blue"},commands:{theme:f.createClass("ThemeCommand",{base:k,execute:function(a,b){return a.useTheme(b)},queryValue:function(a){return a.getTheme()||"default"}})}}),h.registerInitHook(function(){this.setTheme()})}},b[35]={value:function(a,c){var d=b.r(19),e={};c.extend=d.Utils.extend.bind(d.Utils),c.each=d.Utils.each.bind(d.Utils),c.uuid=function(a){return e[a]=e[a]?e[a]+1:1,a+e[a]},c.guid=function(){return(1e6*+new Date+Math.floor(1e6*Math.random())).toString(36)},c.trim=function(a){return a.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},c.keys=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},c.clone=function(a){return JSON.parse(JSON.stringify(a))},c.comparePlainObject=function(a,b){return JSON.stringify(a)==JSON.stringify(b)},c.encodeHtml=function(a,b){return a?a.replace(b||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp);)?/g,function(a,b){return b?a:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[a]}):""},c.clearWhiteSpace=function(a){return a.replace(/[\u200b\t\r\n]/g,"")},c.each(["String","Function","Array","Number","RegExp","Object"],function(a){var b=Object.prototype.toString;c["is"+a]=function(c){return b.apply(c)=="[object "+a+"]"}})}},b[36]={value:function(a,c,d){d.exports=window.kityminder=b.r(37)}},b[37]={value:function(a,c,d){var e={version:b.r(21).version};b.r(35),e.Minder=b.r(21),e.Command=b.r(11),e.Node=b.r(23),b.r(24),b.r(10),e.Event=b.r(15),e.data=b.r(14),b.r(12),e.KeyMap=b.r(17),b.r(31),b.r(32),b.r(25),b.r(30),b.r(16),b.r(18),e.Module=b.r(22),b.r(28),e.Render=b.r(29),e.Connect=b.r(13),e.Layout=b.r(20),e.Theme=b.r(34),e.Template=b.r(33),e.Promise=b.r(27),b.r(9),b.r(26),b.r(44),b.r(45),b.r(46),b.r(47),b.r(48),b.r(50),b.r(51),b.r(53),b.r(52),b.r(54),b.r(55),b.r(56),b.r(57),b.r(58),b.r(59),b.r(60),b.r(62),b.r(63),b.r(64),b.r(65),b.r(66),b.r(67),b.r(68),b.r(72),b.r(69),b.r(71),b.r(70),b.r(42),b.r(38),b.r(39),b.r(40),b.r(41),b.r(43),b.r(79),b.r(82),b.r(81),b.r(80),b.r(82),b.r(84),b.r(83),b.r(0),b.r(1),b.r(2),b.r(3),b.r(4),b.r(7),b.r(8),b.r(73),b.r(77),b.r(74),b.r(76),b.r(75),b.r(78),b.r(49),b.r(61),b.r(5),b.r(6),d.exports=e}},b[38]={value:function(a,c,d){function e(a){function b(a){var b=[],d=a.getLayoutBox(),e=5;return"x"==c?(b.push({type:"up",node:a,area:new f.Box({x:d.x,y:d.top-a.getStyle("margin-top")-e,width:d.width,height:a.getStyle("margin-top")}),path:["M",d.x,d.top-e,"L",d.right,d.top-e]}),b.push({type:"down",node:a,area:new f.Box({x:d.x,y:d.bottom+e,width:d.width,height:a.getStyle("margin-bottom")}),path:["M",d.x,d.bottom+e,"L",d.right,d.bottom+e]})):(b.push({type:"up",node:a,area:new f.Box({x:d.left-a.getStyle("margin-left")-e,y:d.top,width:a.getStyle("margin-left"),height:d.height}),path:["M",d.left-e,d.top,"L",d.left-e,d.bottom]}),b.push({type:"down",node:a,area:new f.Box({x:d.right+e,y:d.top,width:a.getStyle("margin-right"),height:d.height}),path:["M",d.right+e,d.top,"L",d.right+e,d.bottom]})),b}var c="left"==a||"right"==a?"x":"y",d="left"==a||"top"==a?-1:1,e={left:"right",right:"left",top:"bottom",bottom:"top",x:"y",y:"x"};g.register(a,f.createClass({base:g,doLayout:function(b,g){var h=b.getContentBox();if("x"==c?(b.setVertexOut(new f.Point(h[a],h.cy)),b.setLayoutVectorOut(new f.Vector(d,0))):(b.setVertexOut(new f.Point(h.cx,h[a])),b.setLayoutVectorOut(new f.Vector(0,d))),!g.length)return!1;g.forEach(function(b){var g=b.getContentBox();b.setLayoutTransform(new f.Matrix),"x"==c?(b.setVertexIn(new f.Point(g[e[a]],g.cy)),b.setLayoutVectorIn(new f.Vector(d,0))):(b.setVertexIn(new f.Point(g.cx,g[e[a]])),b.setLayoutVectorIn(new f.Vector(0,d)))}),this.align(g,e[a]),this.stack(g,e[c]);var i=this.getBranchBox(g),j=0,k=0;"x"==c?(j=h[a],j+=d*b.getStyle("margin-"+a),j+=d*g[0].getStyle("margin-"+e[a]),k=h.bottom,k-=h.height/2,k-=i.height/2,k-=i.y):(j=h.right,j-=h.width/2,j-=i.width/2,j-=i.x,k=h[a],k+=d*b.getStyle("margin-"+a),k+=d*g[0].getStyle("margin-"+e[a])),this.move(g,j,k)},getOrderHint:b}))}var f=b.r(19),g=b.r(20);["left","right","top","bottom"].forEach(e)}},b[39]={value:function(a,c,d){function e(a){var b="filetree-"+(a>0?"down":"up");g.register(b,f.createClass({base:g,doLayout:function(b,c,d){var e=b.getContentBox(),g=20;if(b.setVertexOut(new f.Point(e.left+g,a>0?e.bottom:e.top)),b.setLayoutVectorOut(new f.Vector(0,a)),c.length){c.forEach(function(a){var b=a.getContentBox();a.setLayoutTransform(new f.Matrix),a.setVertexIn(new f.Point(b.left,b.cy)),a.setLayoutVectorIn(new f.Vector(1,0))}),this.align(c,"left"),this.stack(c,"y");var h=0;h+=e.left,h+=g,h+=c[0].getStyle("margin-left");var i=0;a>0?(i+=e.bottom,i+=b.getStyle("margin-bottom"),i+=c[0].getStyle("margin-top")):(i-=this.getTreeBox(c).bottom,i+=e.top,i-=b.getStyle("margin-top"),i-=c[0].getStyle("margin-bottom")),this.move(c,h,i)}},getOrderHint:function(a){var b=[],c=a.getLayoutBox(),d=a.getLevel()>1?3:5;return b.push({type:"up",node:a,area:new f.Box({x:c.x,y:c.top-a.getStyle("margin-top")-d,width:c.width,height:a.getStyle("margin-top")}),path:["M",c.x,c.top-d,"L",c.right,c.top-d]}),b.push({type:"down",node:a,area:new f.Box({x:c.x,y:c.bottom+d,width:c.width,height:a.getStyle("margin-bottom")}),path:["M",c.x,c.bottom+d,"L",c.right,c.bottom+d]}),b}}))}var f=b.r(19),g=b.r(20);[-1,1].forEach(e)}},b[40]={value:function(a,c,d){var e=b.r(19),f=b.r(20);f.register("fish-bone-master",e.createClass("FishBoneMasterLayout",{base:f,doLayout:function(a,b,c){var d=[],f=[],g=b[0],h=a.getContentBox();if(a.setVertexOut(new e.Point(h.right,h.cy)),a.setLayoutVectorOut(new e.Vector(1,0)),g){var i=(g.getContentBox(),a.getStyle("margin-right")),j=g.getStyle("margin-left"),k=g.getStyle("margin-top"),l=g.getStyle("margin-bottom");b.forEach(function(a,b){a.setLayoutTransform(new e.Matrix);var c=a.getContentBox();b%2?(f.push(a),a.setVertexIn(new e.Point(c.left,c.top)),a.setLayoutVectorIn(new e.Vector(1,1))):(d.push(a),a.setVertexIn(new e.Point(c.left,c.bottom)),a.setLayoutVectorIn(new e.Vector(1,-1)))}),this.stack(d,"x"),this.stack(f,"x"),this.align(d,"bottom"),this.align(f,"top");var m=h.right+i+j,n=h.cy-l-a.getStyle("margin-top"),o=h.cy+k+a.getStyle("margin-bottom");this.move(d,m,n),this.move(f,m+j,o)}}}))}},b[41]={value:function(a,c,d){var e=b.r(19),f=b.r(20);f.register("fish-bone-slave",e.createClass("FishBoneSlaveLayout",{base:f,doLayout:function(a,b,c){var d=this,f=Math.abs,g=.382,h=a.getContentBox(),i=a.getLayoutVectorIn();a.setLayoutVectorOut(i);var j=h.left+h.width*g,k=new e.Point(j,i.y>0?h.bottom:h.top);a.setVertexOut(k);var l=b[0];if(l){var m=l.getContentBox();b.forEach(function(a,b){a.setLayoutTransform(new e.Matrix),a.setLayoutVectorIn(new e.Vector(1,0)),a.setVertexIn(new e.Point(m.left,m.cy))}),this.stack(b,"y"),this.align(b,"left");var n=0,o=0;n+=k.x,a.getLayoutVectorOut().y<0?(o-=this.getTreeBox(b).bottom,o+=a.getContentBox().top,o-=a.getStyle("margin-top"),o-=l.getStyle("margin-bottom")):(o+=a.getContentBox().bottom,o+=a.getStyle("margin-bottom"),o+=l.getStyle("margin-top")),this.move(b,n,o),2==c&&b.forEach(function(a){var b=a.getLayoutTransform(),c=a.getContentBox(),g=b.transformPoint(new e.Point(c.left,0));d.move([a],f(g.y-k.y),0)})}}}))}},b[42]={value:function(a,c,d){var e=b.r(19),f=b.r(20),g=b.r(21);f.register("mind",e.createClass({base:f,doLayout:function(a,b){var c=Math.ceil(a.children.length/2),d=[],f=[];b.forEach(function(a){a.getIndex()<c?d.push(a):f.push(a)});var h=g.getLayoutInstance("left"),i=g.getLayoutInstance("right");h.doLayout(a,f),i.doLayout(a,d);var j=a.getContentBox();a.setVertexOut(new e.Point(j.cx,j.cy)),a.setLayoutVectorOut(new e.Vector(0,0))},getOrderHint:function(a){var b=[],c=a.getLayoutBox(),d=5;return b.push({type:"up",node:a,area:new e.Box({x:c.x,y:c.top-a.getStyle("margin-top")-d,width:c.width,height:a.getStyle("margin-top")}),path:["M",c.x,c.top-d,"L",c.right,c.top-d]}),b.push({type:"down",node:a,area:new e.Box({x:c.x,y:c.bottom+d,width:c.width,height:a.getStyle("margin-bottom")}),path:["M",c.x,c.bottom+d,"L",c.right,c.bottom+d]}),b}}))}},b[43]={value:function(a,c,d){var e=b.r(19),f=b.r(20);b.r(21);f.register("tianpan",e.createClass({base:f,doLayout:function(a,b){if(0!=b.length){var c,d,f,g=this,h=a.getContentBox(),i=5,j=Math.max(h.width,50);b.forEach(function(a,b){a.setLayoutTransform(new e.Matrix),f=g.getTreeBox(a),j=Math.max(Math.max(f.width,f.height),j)}),j=j/1.5/Math.PI,b.forEach(function(a,b){c=j*(Math.cos(i)+Math.sin(i)*i),d=j*(Math.sin(i)-Math.cos(i)*i),i+=.9-.02*b,a.setLayoutVectorIn(new e.Vector(1,0)),a.setVertexIn(new e.Point(h.cx,h.cy)),a.setLayoutTransform(new e.Matrix),g.move([a],c,d)})}},getOrderHint:function(a){var b=[],c=a.getLayoutBox(),d=5;return b.push({type:"up",node:a,area:{x:c.x,y:c.top-a.getStyle("margin-top")-d,width:c.width,height:a.getStyle("margin-top")},path:["M",c.x,c.top-d,"L",c.right,c.top-d]}),b.push({type:"down",node:a,area:{x:c.x,y:c.bottom+d,width:c.width,height:a.getStyle("margin-bottom")},path:["M",c.x,c.bottom+d,"L",c.right,c.bottom+d]}),b}}))}},b[44]={value:function(a,c,d){function e(a,b){return a.getIndex()-b.getIndex()}function f(a,b){return-e(a,b)}var g=b.r(19),h=b.r(23),i=b.r(11),j=b.r(22);g.extendClass(h,{arrange:function(a){var b=this.parent;if(b){var c=b.children;if(!(a<0||a>=c.length))return c.splice(this.getIndex(),1),c.splice(a,0,this),this}}});var k=g.createClass("ArrangeUpCommand",{base:i,execute:function(a){var b=a.getSelectedNodes();b.sort(e);var c=b.map(function(a){return a.getIndex()});b.forEach(function(a,b){a.arrange(c[b]-1)}),a.layout(300)},queryState:function(a){return a.getSelectedNode()?0:-1}}),l=g.createClass("ArrangeUpCommand",{base:i,execute:function(a){var b=a.getSelectedNodes();b.sort(f);var c=b.map(function(a){return a.getIndex()});b.forEach(function(a,b){a.arrange(c[b]+1)}),a.layout(300)},queryState:function(a){return a.getSelectedNode()?0:-1}}),m=g.createClass("ArrangeCommand",{base:i,execute:function(a,b){var c=a.getSelectedNodes().slice();if(c.length){if(h.getCommonAncestor(c)==c[0].parent){var d=c.map(function(a){return{index:a.getIndex(),node:a}}),e=Math.min.apply(Math,d.map(function(a){return a.index}))>=b;d.sort(function(a,b){return e?b.index-a.index:a.index-b.index}),d.forEach(function(a){a.node.arrange(b)}),a.layout(300)}}},queryState:function(a){return a.getSelectedNode()?0:-1}});j.register("ArrangeModule",{commands:{arrangeup:k,arrangedown:l,arrange:m},contextmenu:[{command:"arrangeup"},{command:"arrangedown"},{divider:!0}],commandShortcutKeys:{arrangeup:"normal::alt+Up",arrangedown:"normal::alt+Down"}})}},b[45]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21),b.r(23),b.r(11)),g=b.r(22),h=b.r(65);g.register("basestylemodule",function(){function a(a,b){return a.getData(b)||a.getStyle(b)}var b=this;return h.registerStyleHook(function(b,c){var d=a(b,"font-weight"),e=a(b,"font-style");[d,e].join("/");c.eachItem(function(a,b){b.setFont({weight:d,style:e})})}),{commands:{bold:e.createClass("boldCommand",{base:f,execute:function(a){var b=a.getSelectedNodes();1==this.queryState("bold")?b.forEach(function(a){a.setData("font-weight").render()}):b.forEach(function(a){a.setData("font-weight","bold").render()}),a.layout()},queryState:function(){var a=b.getSelectedNodes(),c=0;return 0===a.length?-1:(a.forEach(function(a){if(a&&a.getData("font-weight"))return c=1,!1}),c)}}),italic:e.createClass("italicCommand",{base:f,execute:function(a){var b=a.getSelectedNodes();1==this.queryState("italic")?b.forEach(function(a){a.setData("font-style").render()}):b.forEach(function(a){a.setData("font-style","italic").render()}),a.layout()},queryState:function(){var a=b.getSelectedNodes(),c=0;return 0===a.length?-1:(a.forEach(function(a){if(a&&a.getData("font-style"))return c=1,!1}),c)}})},commandShortcutKeys:{bold:"ctrl+b",italic:"ctrl+i"}}})}},b[46]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(23)),g=b.r(11);b.r(22).register("ClipboardModule",function(){function a(b,d){h.push(d),c.appendNode(d,b),d.render(),d.setLayoutOffset(null);var e=d.children.map(function(a){return a.clone()});d.clearChildren();for(var f,g=0;f=e[g];g++)a(d,f)}function b(a){a.length&&(a.sort(function(a,b){return a.getIndex()-b.getIndex()}),d=a.map(function(a){return a.clone()}))}var c=this,d=[],h=[],i=e.createClass("CopyCommand",{base:g,execute:function(a){b(a.getSelectedAncestors(!0)),this.setContentChanged(!1)}}),j=e.createClass("CutCommand",{base:g,execute:function(a){var c=a.getSelectedAncestors();0!==c.length&&(b(c),a.select(f.getCommonAncestor(c),!0),c.slice().forEach(function(b){a.removeNode(b)}),a.layout(300))}}),k=e.createClass("PasteCommand",{base:g,execute:function(b){if(d.length){var c=b.getSelectedNodes();if(!c.length)return;for(var e,f=0;e=d[f];f++)for(var g,i=0;g=c[i];i++)a(g,e.clone());b.select(h,!0),h=[],b.layout(300)}},queryState:function(a){return a.getSelectedNode()?0:-1}});if(c.supportClipboardEvent&&!e.Browser.gecko){var l=function(a){this.fire("beforeCopy",a)},m=function(a){this.fire("beforeCut",a)},n=function(a){this.fire("beforePaste",a)};return{commands:{copy:i,cut:j,paste:k},clipBoardEvents:{copy:l.bind(c),cut:m.bind(c),paste:n.bind(c)},sendToClipboard:b}}return{commands:{copy:i,cut:j,paste:k},commandShortcutKeys:{copy:"normal::ctrl+c|",cut:"normal::ctrl+x",paste:"normal::ctrl+v"},sendToClipboard:b}})}},b[47]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(23)),g=b.r(11),h=b.r(22),i=e.createClass("MoveToParentCommand",{base:g,execute:function(a,b,c){for(var d,e=0;e<b.length;e++)d=b[e],d.parent&&(d.parent.removeChild(d),c.appendChild(d),d.render());c.expand(),a.select(b,!0)}}),j=e.createClass("DropHinter",{base:e.Group,constructor:function(){this.callBase(),this.rect=new e.Rect,this.addShape(this.rect)},render:function(a){this.setVisible(!!a),a&&(this.rect.setBox(a.getLayoutBox()).setRadius(a.getStyle("radius")||0).stroke(a.getStyle("drop-hint-color")||"yellow",a.getStyle("drop-hint-width")||2),this.bringTop())}}),k=e.createClass("OrderHinter",{base:e.Group,constructor:function(){this.callBase(),this.area=new e.Rect,this.path=new e.Path,this.addShapes([this.area,this.path])},render:function(a){this.setVisible(!!a),a&&(this.area.setBox(a.area),this.area.fill(a.node.getStyle("order-hint-area-color")||"rgba(0, 255, 0, .5)"),this.path.setPathData(a.path),this.path.stroke(a.node.getStyle("order-hint-path-color")||"#0f0",a.node.getStyle("order-hint-path-width")||1))}}),l=e.createClass("TreeDragger",{constructor:function(a){this._minder=a,this._dropHinter=new j,this._orderHinter=new k,a.getRenderContainer().addShapes([this._dropHinter,this._orderHinter])},dragStart:function(a){this._startPosition=a},dragMove:function(a){if(this._startPosition){var b=e.Vector.fromPoints(this._dragPosition||this._startPosition,a),c=this._minder;if(this._dragPosition=a,!this._dragMode){if(e.Vector.fromPoints(this._dragPosition,this._startPosition).length()<10)return;if(!this._enterDragMode())return}for(var d=0;d<this._dragSources.length;d++)this._dragSources[d].setLayoutOffset(this._dragSources[d].getLayoutOffset().offset(b)),c.applyLayoutResult(this._dragSources[d]);this._dropTest()?this._renderOrderHint(this._orderSucceedHint=null):this._orderTest()}},dragEnd:function(){if(this._startPosition=null,this._dragPosition=null,this._dragMode){if(this._fadeDragSources(1),this._dropSucceedTarget)this._dragSources.forEach(function(a){a.setLayoutOffset(null)}),this._minder.layout(-1),this._minder.execCommand("movetoparent",this._dragSources,this._dropSucceedTarget);else if(this._orderSucceedHint){var a=this._orderSucceedHint,b=a.node.getIndex(),c=this._dragSources.map(function(a){return a.setLayoutOffset(null),a.getIndex()}),d=Math.max.apply(Math,c),e=Math.min.apply(Math,c);b<e&&"down"==a.type&&b++,b>d&&"up"==a.type&&b--,a.node.setLayoutOffset(null),this._minder.execCommand("arrange",b),this._renderOrderHint(null)}else this._minder.fire("savescene");this._minder.layout(300),this._leaveDragMode(),this._minder.fire("contentchange")}},_enterDragMode:function(){return this._calcDragSources(),this._dragSources.length?(this._fadeDragSources(.5),this._calcDropTargets(),this._calcOrderHints(),this._dragMode=!0,this._minder.setStatus("dragtree"),!0):(this._startPosition=null,!1)},_calcDragSources:function(){this._dragSources=this._minder.getSelectedAncestors()},_fadeDragSources:function(a){var b=this._minder;this._dragSources.forEach(function(c){c.getRenderContainer().setOpacity(a,200),c.traverse(function(c){a<1?b.detachNode(c):b.attachNode(c)},!0)})},_calcDropTargets:function(){function a(b,c){var d,e=[];return e.push(c),c.getChildren().forEach(function(c){for(d=0;d<b.length;d++)if(b[d]==c)return;e=e.concat(a(b,c))}),e}this._dropTargets=a(this._dragSources,this._minder.getRoot()),this._dropTargetBoxes=this._dropTargets.map(function(a){return a.getLayoutBox()})},_calcOrderHints:function(){var a=this._dragSources,b=f.getCommonAncestor(a);if(b==a[0]&&(b=a[0].parent),0===a.length||b!=a[0].parent)return void(this._orderHints=[]);var c=b.children;this._orderHints=c.reduce(function(b,c){return-1==a.indexOf(c)&&(b=b.concat(c.getOrderHint())),b},[])},_leaveDragMode:function(){this._dragMode=!1,this._dropSucceedTarget=null,this._orderSucceedHint=null,this._renderDropHint(null),this._renderOrderHint(null),this._minder.rollbackStatus()},_drawForDragMode:function(){this._text.setContent(this._dragSources.length+" items"),this._text.setPosition(this._startPosition.x,this._startPosition.y+5),this._minder.getRenderContainer().addShape(this)},_boxTest:function(a,b,c){var d,e,f,g,h,i=this._dragSources.map(function(a){return a.getLayoutBox()});for(c=c||function(a,b,c){return a&&!a.isEmpty()},d=0;d<a.length;d++)for(f=a[d],h=b.call(this,f,d),e=0;e<i.length;e++){g=i[e];var j=g.intersect(h);if(c(j,g,h))return f}return null},_dropTest:function(){return this._dropSucceedTarget=this._boxTest(this._dropTargets,function(a,b){return this._dropTargetBoxes[b]},function(a,b,c){function d(a){return a.width*a.height}return!!a&&(!!d(a)&&(d(a)>.5*Math.min(d(b),d(c))||(a.width+1>=Math.min(b.width,c.width)||a.height+1>=Math.min(b.height,c.height))))}),this._renderDropHint(this._dropSucceedTarget),!!this._dropSucceedTarget},_orderTest:function(){return this._orderSucceedHint=this._boxTest(this._orderHints,function(a){return a.area}),this._renderOrderHint(this._orderSucceedHint),!!this._orderSucceedHint},_renderDropHint:function(a){this._dropHinter.render(a)},_renderOrderHint:function(a){this._orderHinter.render(a)},preventDragMove:function(){this._startPosition=null}});h.register("DragTree",function(){var a;return{init:function(){a=new l(this),window.addEventListener("mouseup",function(){a.dragEnd()})},events:{"normal.mousedown inputready.mousedown":function(b){b.originEvent.button||b.getTargetNode()&&b.getTargetNode()!=this.getRoot()&&a.dragStart(b.getPosition())},"normal.mousemove dragtree.mousemove":function(b){a.dragMove(b.getPosition())},"normal.mouseup dragtree.beforemouseup":function(b){a.dragEnd(),b.preventDefault()},statuschange:function(b){"textedit"==b.lastStatus&&"normal"==b.currentStatus&&a.preventDragMove()}},commands:{movetoparent:i}}})}},b[48]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=b.r(17),h=b.r(23),i=b.r(11),j=b.r(22),k=b.r(29);j.register("Expand",function(){var a=this,b="expandState",c="collapse";e.extendClass(h,{expand:function(){return this.setData(b,"expand"),this},collapse:function(){return this.setData(b,c),this},isExpanded:function(){return this.getData(b)!==c&&(this.isRoot()||this.parent.isExpanded())},isCollapsed:function(){return!this.isExpanded()}});var d=e.createClass("ExpandCommand",{base:i,execute:function(a,b){var c=a.getSelectedNode();if(c){for(b&&(c=c.parent);c.parent;)c.expand(),c=c.parent;c.renderTree(),a.layout(100)}},queryState:function(a){var b=a.getSelectedNode();return!b||b.isRoot()||b.isExpanded()?-1:0}}),j=e.createClass("ExpandToLevelCommand",{base:i,execute:function(a,b){a.getRoot().traverse(function(a){a.getLevel()<b&&a.expand(),a.getLevel()!=b||a.isLeaf()||a.collapse()}),a.refresh(100)},enableReadOnly:!0}),l=e.createClass("CollapseCommand",{base:i,execute:function(a){var b=a.getSelectedNode();b&&(b.collapse(),b.renderTree(),a.layout())},queryState:function(a){var b=a.getSelectedNode();return b&&!b.isRoot()&&b.isExpanded()?0:-1}}),m=e.createClass("Expander",{base:e.Group,constructor:function(a){this.callBase(),this.radius=6,this.outline=new e.Circle(this.radius).stroke("gray").fill("white"),this.sign=(new e.Path).stroke("gray"),this.addShapes([this.outline,this.sign]),this.initEvent(a),this.setId(f.uuid("node_expander")),this.setStyle("cursor","pointer")},initEvent:function(b){this.on("mousedown",function(c){a.select([b],!0),b.isExpanded()?b.collapse():b.expand(),b.renderTree().getMinder().layout(100),b.getMinder().fire("contentchange"),c.stopPropagation(),c.preventDefault()}),this.on("dblclick click mouseup",function(a){a.stopPropagation(),a.preventDefault()})},setState:function(a){if("hide"==a)return void this.setVisible(!1);this.setVisible(!0);var b=["M",1.5-this.radius,0,"L",this.radius-1.5,0];a==c&&b.push(["M",0,1.5-this.radius,"L",0,this.radius-1.5]),this.sign.setPathData(b)}}),n=e.createClass("ExpanderRenderer",{base:k,create:function(a){if(!a.isRoot())return this.expander=new m(a),a.getRenderContainer().prependShape(this.expander),a.expanderRenderer=this,this.node=a,this.expander},shouldRender:function(a){return!a.isRoot()},update:function(a,c,d){if(c.parent){var e=c.parent.isExpanded();a.setState(e&&c.children.length?c.getData(b):"hide");var f=c.getLayoutVectorIn().normalize(a.radius+c.getStyle("stroke-width")),g=c.getVertexIn().offset(f.reverse());this.expander.setTranslate(g)}}});return{commands:{expand:d,expandtolevel:j,collapse:l},events:{layoutapply:function(a){var b=a.node.getRenderer("ExpanderRenderer");b.getRenderShape()&&b.update(b.getRenderShape(),a.node)},beforerender:function(a){var b=a.node,c=!b.parent||b.parent.isExpanded();b.getRenderContainer().setVisible(c),c||a.stopPropagation()},"normal.keydown":function(a){if("textedit"!=this.getStatus()){if(a.originEvent.keyCode==g["/"]){var b=this.getSelectedNode();if(!b||b==this.getRoot())return;var c=b.isExpanded();this.getSelectedNodes().forEach(function(a){c?a.collapse():a.expand(),a.renderTree()}),this.layout(100),this.fire("contentchange"),a.preventDefault(),a.stopPropagationImmediately()}a.isShortcutKey("Alt+`")&&this.execCommand("expandtolevel",9999);for(var d=1;d<6;d++)a.isShortcutKey("Alt+"+d)&&this.execCommand("expandtolevel",d)}}},renderers:{outside:n},contextmenu:[{command:"expandtoleaf",query:function(){return!a.getSelectedNode()},fn:function(a){a.execCommand("expandtolevel",9999)}},{command:"expandtolevel1",query:function(){return!a.getSelectedNode()},fn:function(a){a.execCommand("expandtolevel",1)}},{command:"expandtolevel2",query:function(){return!a.getSelectedNode()},fn:function(a){a.execCommand("expandtolevel",2)}},{command:"expandtolevel3",query:function(){return!a.getSelectedNode()},fn:function(a){a.execCommand("expandtolevel",3)}},{divider:!0}]}})}},b[49]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=(b.r(21),b.r(23),b.r(11)),h=b.r(22),i=b.r(29),j={width:30,height:30};h.register("flag",function(){function a(a,b){var c=document.createElement("img");c.onload=function(){b(j.width,j.height)},c.onerror=function(){b(null)},c.src=a}function b(a,b,c,d){var e=a/b,f=c/d;return a>c&&e>f?(a=c,b=a/e):b>d&&(b=d,a=b*e),{width:0|a,height:0|b}}var c=e.createClass("ImageCommand",{base:g,execute:function(c,d,e){var f=c.getSelectedNodes();a(d,function(a,g){f.forEach(function(f){b(a,g,c.getOption("maxImageWidth"),c.getOption("maxImageHeight"));f.setData("flag",d),f.setData("flagTitle",d&&e),f.render()}),c.fire("saveScene"),c.layout(300)})},queryState:function(a){var b=a.getSelectedNodes(),c=0;return 0===b.length?-1:(b.forEach(function(a){if(a&&a.getData("flag"))return c=0,!1}),c)},queryValue:function(a){var b=a.getSelectedNode();return b?{url:b.getData("flag"),title:b.getData("flagTitle")}:void 0}}),d=(e.createClass("ImageRenderer",{base:i,create:function(a){return new e.Image(a.getData("flag"))},shouldRender:function(a){return a.getData("flag")},update:function(a,b,c){var d=b.getData("flag"),f=b.getData("flagTitle"),g=j,h=b.getStyle("space-top");if(g){f&&a.node.setAttributeNS("http://www.w3.org/1999/xlink","title",f);var i=c.cx-g.width/2,k=c.y-g.height-h;return a.setUrl(d).setX(0|i).setY(0|k).setWidth(0|g.width).setHeight(0|g.height),new e.Box(0|i,0|k,0|g.width,0|g.height)}}}),e.createClass("FlagIcon",{base:e.Group,constructor:function(a){this.callBase(),this.setSize(30),this.create(a),this.setId(f.uuid("node_flag"))},setSize:function(a){this.width=this.height=a},create:function(a){var b=new e.Image(a.getData("flag"));b.setWidth(0|this.width),b.setHeight(0|this.height),this.addShapes([b]),this.flag=b}}));return{commands:{flag:c},renderers:{left:e.createClass("ImageRenderer",{base:i,create:function(a){return new d(a)},shouldRender:function(a){return a.getData("flag")},update:function(a,b,c){var d,f,g=(b.getData("flag"),b.getStyle("space-left"));return d=c.left-a.width-g,f=-a.height/2,a.setTranslate(d,f),new e.Box({x:d,y:f,width:a.width,height:a.height})}})}}})}},b[50]={value:function(a,c,d){function e(a,b){return a.getData(b)||a.getStyle(b)}var f=b.r(19),g=(b.r(35),b.r(21),b.r(23),b.r(11)),h=b.r(22);b.r(65).registerStyleHook(function(a,b){var c=a.getData("color"),d=a.getStyle("selected-color"),f=a.getStyle("color"),g=c||(a.isSelected()&&d?d:f),h=e(a,"font-family"),i=e(a,"font-size");b.fill(g),b.eachItem(function(a,b){b.setFont({family:h,size:i})})}),h.register("fontmodule",{commands:{forecolor:f.createClass("fontcolorCommand",{base:g,execute:function(a,b){a.getSelectedNodes().forEach(function(a){a.setData("color",b),a.render()})},queryState:function(a){return 0===a.getSelectedNodes().length?-1:0},queryValue:function(a){return 1==a.getSelectedNodes().length?a.getSelectedNodes()[0].getData("color"):"mixed"}}),background:f.createClass("backgroudCommand",{base:g,execute:function(a,b){a.getSelectedNodes().forEach(function(a){a.setData("background",b),a.render()})},queryState:function(a){return 0===a.getSelectedNodes().length?-1:0},queryValue:function(a){return 1==a.getSelectedNodes().length?a.getSelectedNodes()[0].getData("background"):"mixed"}}),fontfamily:f.createClass("fontfamilyCommand",{base:g,execute:function(a,b){a.getSelectedNodes().forEach(function(c){c.setData("font-family",b),c.render(),a.layout()})},queryState:function(a){return 0===a.getSelectedNodes().length?-1:0},queryValue:function(a){var b=a.getSelectedNode();return b?b.getData("font-family"):null}}),fontsize:f.createClass("fontsizeCommand",{base:g,execute:function(a,b){a.getSelectedNodes().forEach(function(c){c.setData("font-size",b),c.render(),a.layout(300)})},queryState:function(a){return 0===a.getSelectedNodes().length?-1:0},queryValue:function(a){var b=a.getSelectedNode();return b?b.getData("font-size"):null}})}})}},b[51]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21),b.r(23),b.r(11)),g=b.r(22),h=b.r(29);g.register("hyperlink",{commands:{hyperlink:e.createClass("hyperlink",{base:f,execute:function(a,b,c){a.getSelectedNodes().forEach(function(a){a.setData("hyperlink",b),a.setData("hyperlinkTitle",b&&c),a.render()}),a.layout()},queryState:function(a){var b=a.getSelectedNodes(),c=0;return 0===b.length?-1:(b.forEach(function(a){if(a&&a.getData("hyperlink"))return c=0,!1}),c)},queryValue:function(a){var b=a.getSelectedNode();return{url:b.getData("hyperlink"),title:b.getData("hyperlinkTitle")}}})},renderers:{right:e.createClass("hyperlinkrender",{base:h,create:function(){var a=new e.HyperLink,b=new e.Path,c=new e.Rect(24,22,-2,-6,4).fill("rgba(255, 255, 255, 0)");return b.setPathData("M16.614,10.224h-1.278c-1.668,0-3.07-1.07-3.599-2.556h4.877c0.707,0,1.278-0.571,1.278-1.278V3.834 c0-0.707-0.571-1.278-1.278-1.278h-4.877C12.266,1.071,13.668,0,15.336,0h1.278c2.116,0,3.834,1.716,3.834,3.834V6.39 C20.448,8.508,18.73,10.224,16.614,10.224z M5.112,5.112c0-0.707,0.573-1.278,1.278-1.278h7.668c0.707,0,1.278,0.571,1.278,1.278 S14.765,6.39,14.058,6.39H6.39C5.685,6.39,5.112,5.819,5.112,5.112z M2.556,3.834V6.39c0,0.707,0.573,1.278,1.278,1.278h4.877 c-0.528,1.486-1.932,2.556-3.599,2.556H3.834C1.716,10.224,0,8.508,0,6.39V3.834C0,1.716,1.716,0,3.834,0h1.278 c1.667,0,3.071,1.071,3.599,2.556H3.834C3.129,2.556,2.556,3.127,2.556,3.834z").fill("#666"),a.addShape(c),a.addShape(b),a.setTarget("_blank"),a.setStyle("cursor","pointer"),a.on("mouseover",function(){c.fill("rgba(255, 255, 200, .8)")}).on("mouseout",function(){c.fill("rgba(255, 255, 255, 0)")}),a},shouldRender:function(a){return a.getData("hyperlink")},update:function(a,b,c){var d=b.getData("hyperlink");a.setHref("#");for(var f=["^http:","^https:","^ftp:","^mailto:"],g=0;g<f.length;g++)if(new RegExp(f[g]).test(d)){a.setHref(d);break}var h=b.getData("hyperlinkTitle");h=h?[h,"(",d,")"].join(""):d,a.node.setAttributeNS("http://www.w3.org/1999/xlink","title",h);var i=b.getStyle("space-right");return a.setTranslate(c.right+i+2,-5),new e.Box({x:c.right+i,y:-11,width:24,height:22})}})}})}},b[52]={value:function(a,c,d){var e=b.r(19),f=b.r(17),g=b.r(22);b.r(11);g.register("ImageViewer",function(){function a(a,b,d){var e=document.createElement(a);return c(e,b),d&&d.length&&d.forEach(function(a){e.appendChild(a)}),e}function b(a,b,c){a.addEventListener(b,c)}function c(a,b){b&&b.split(" ").forEach(function(b){a.classList.add(b)})}var d=e.createClass("ImageViewer",{constructor:function(){var c=a("button","km-image-viewer-btn km-image-viewer-close"),d=a("button","km-image-viewer-btn km-image-viewer-source"),e=this.image=a("img"),f=this.toolbar=a("div","km-image-viewer-toolbar",[d,c]),g=a("div","km-image-viewer-container",[e]),h=this.viewer=a("div","km-image-viewer",[f,g]);this.hotkeyHandler=this.hotkeyHandler.bind(this),b(c,"click",this.close.bind(this)),b(d,"click",this.viewSource.bind(this)),b(e,"click",this.zoomImage.bind(this)),b(h,"contextmenu",this.toggleToolbar.bind(this)),b(document,"keydown",this.hotkeyHandler)},dispose:function(){this.close(),document.removeEventListener("remove",this.hotkeyHandler)},hotkeyHandler:function(a){this.actived&&a.keyCode===f.esc&&this.close()},toggleToolbar:function(a){a&&a.preventDefault(),this.toolbar.classList.toggle("hidden")},zoomImage:function(a){var b=this.image;"boolean"==typeof a?a&&c(b,"limited"):b.classList.toggle("limited")},viewSource:function(a){window.open(this.image.src)},open:function(a){var b=document.querySelector("input");b&&(b.focus(),b.blur()),this.image.src=a,this.zoomImage(!0),document.body.appendChild(this.viewer),this.actived=!0},close:function(){this.image.src="",document.body.removeChild(this.viewer),this.actived=!1}});return{init:function(){this.viewer=new d},events:{"normal.dblclick":function(a){var b=a.kityEvent.targetShape;"Image"===b.__KityClassName&&b.url&&this.viewer.open(b.url)}}}})}},b[53]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21),b.r(23),b.r(11)),g=b.r(22),h=b.r(29);g.register("image",function(){function a(a,b){var c=document.createElement("img");c.onload=function(){b(c.width,c.height)},c.onerror=function(){b(null)},c.src=a,c.classList.add("km-image")}function b(a,b,c,d){var e=a/b,f=c/d;return a>c&&e>f?(a=c,b=a/e):b>d&&(b=d,a=b*e),{width:0|a,height:0|b}}return{defaultOptions:{maxImageWidth:200,maxImageHeight:200},commands:{image:e.createClass("ImageCommand",{base:f,execute:function(c,d,e){var f=c.getSelectedNodes();a(d,function(a,g){f.forEach(function(f){var h=b(a,g,c.getOption("maxImageWidth"),c.getOption("maxImageHeight"));f.setData("image",d),f.setData("imageTitle",d&&e),f.setData("imageSize",d&&h),f.render()}),c.fire("saveScene"),c.layout(300)})},queryState:function(a){var b=a.getSelectedNodes(),c=0;return 0===b.length?-1:(b.forEach(function(a){if(a&&a.getData("image"))return c=0,!1}),c)},queryValue:function(a){var b=a.getSelectedNode();return{url:b.getData("image"),title:b.getData("imageTitle")}}})},renderers:{top:e.createClass("ImageRenderer",{base:h,create:function(a){return new e.Image(a.getData("image"))},shouldRender:function(a){return a.getData("image")},update:function(a,b,c){var d=b.getData("image"),f=b.getData("imageTitle"),g=b.getData("imageSize"),h=b.getStyle("space-top");if(g){f&&a.node.setAttributeNS("http://www.w3.org/1999/xlink","title",f);var i=c.cx-g.width/2,j=c.y-g.height-h;return a.setUrl(d).setX(0|i).setY(0|j).setWidth(0|g.width).setHeight(0|g.height),new e.Box(0|i,0|j,0|g.width,0|g.height)}}})}}})}},b[54]={value:function(a,c,d){var e=(b.r(19),b.r(35),b.r(17),b.r(21),b.r(23),b.r(11),b.r(22));b.r(29);e.register("KeyboardModule",function(){function a(a){var b,d=[];a.traverse(function(a){b=a.getLayoutBox(),b.width&&b.height&&d.push({left:b.x,top:b.y,right:b.x+b.width,bottom:b.y+b.height,width:b.width,height:b.height,node:a})});for(var e=0;e<d.length;e++)c(d,e)}function b(a,b){var c,d,h,i,j,k,l;c=e(a.left,b.left),d=f(a.right,b.right),h=e(a.top,b.top),i=f(a.bottom,b.bottom),j=d-c-a.width-b.width,k=i-h-a.height-b.height,l=j<0?k:k<0?j:g(j*j+k*k);var m=a.node,n=b.node;return m.parent==n.parent&&(l/=10),n.parent==m&&(l/=5),l}function c(a,c){for(var d,e,f=a[c],g={},h=0;h<a.length;h++)h!=c&&(d=a[h],e=b(d,f),d.right<f.left&&(!g.left||e<g.left.dist)&&(g.left={dist:e,node:d.node}),d.left>f.right&&(!g.right||e<g.right.dist)&&(g.right={dist:e,node:d.node}),d.bottom<f.top&&(!g.top||e<g.top.dist)&&(g.top={dist:e,node:d.node}),d.top>f.bottom&&(!g.down||e<g.down.dist)&&(g.down={dist:e,node:d.node}));f.node._nearestNodes={right:g.right&&g.right.node||null,top:g.top&&g.top.node||null,left:g.left&&g.left.node||null,down:g.down&&g.down.node||null}}function d(b,c){var d=b.getSelectedNode();if(!d)return b.select(b.getRoot()),void a(b.getRoot());d._nearestNodes||a(b.getRoot());var e=d._nearestNodes[c];e&&b.select(e,!0)}var e=Math.min,f=Math.max,g=(Math.abs,Math.sqrt);Math.exp;return{events:{layoutallfinish:function(){a(this.getRoot())},"normal.keydown readonly.keydown":function(a){var b=this;["left","right","up","down"].forEach(function(c){a.isShortcutKey(c)&&(d(b,"up"==c?"top":c),a.preventDefault())})}}}})}},b[55]={value:function(a,c,d){var e=b.r(19),f=b.r(11),g=b.r(22),h=e.createClass("LayoutCommand",{base:f,execute:function(a,b){a.getSelectedNodes().forEach(function(a){a.layout(b)})},queryValue:function(a){var b=a.getSelectedNode();if(b)return b.getData("layout")},queryState:function(a){return a.getSelectedNode()?0:-1}}),i=e.createClass("ResetLayoutCommand",{base:f,execute:function(a){var b=a.getSelectedNodes();b.length||(b=[a.getRoot()]),b.forEach(function(a){a.traverse(function(a){a.resetLayoutOffset(),a.isRoot()||a.setData("layout",null)})}),a.layout(300)},enableReadOnly:!0});g.register("LayoutModule",{commands:{layout:h,resetlayout:i},contextmenu:[{command:"resetlayout"},{divider:!0}],commandShortcutKeys:{resetlayout:"Ctrl+Shift+L"}})}},b[56]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21),b.r(23)),g=b.r(11),h=b.r(22),i=(b.r(29),e.createClass("AppendChildCommand",{base:g,execute:function(a,b){var c=a.getSelectedNode();if(!c)return null;var d=a.createNode(b,c);a.select(d,!0),c.isExpanded()?d.render():(c.expand(),c.renderTree()),a.layout(600)},queryState:function(a){return a.getSelectedNode()?0:-1}})),j=e.createClass("AppendSiblingCommand",{base:g,execute:function(a,b){var c=a.getSelectedNode(),d=c.parent;if(!d)return a.execCommand("AppendChildNode",b);var e=a.createNode(b,d,c.getIndex()+1);e.setGlobalLayoutTransform(c.getGlobalLayoutTransform()),a.select(e,!0),e.render(),a.layout(600)},queryState:function(a){return a.getSelectedNode()?0:-1}}),k=e.createClass("RemoverNodeCommand",{base:g,execute:function(a){var b=a.getSelectedNodes(),c=f.getCommonAncestor.apply(null,b),d=b[0].getIndex();if(b.forEach(function(b){b.isRoot()||a.removeNode(b)}),1==b.length){var e=c.children[d-1]||c.children[d];a.select(e||c||a.getRoot(),!0)}else a.select(c||a.getRoot(),!0);a.layout(600)},queryState:function(a){var b=a.getSelectedNode();return b&&!b.isRoot()?0:-1}}),l=e.createClass("AppendParentCommand",{base:g,execute:function(a,b){var c=a.getSelectedNodes();c.sort(function(a,b){return a.getIndex()-b.getIndex()});var d=c[0].parent,e=a.createNode(b,d,c[0].getIndex());c.forEach(function(a){e.appendChild(a)}),e.setGlobalLayoutTransform(c[c.length>>1].getGlobalLayoutTransform()),a.select(e,!0),a.layout(600)},queryState:function(a){var b=a.getSelectedNodes();if(!b.length)return-1;var c=b[0].parent;if(!c)return-1;for(var d=1;d<b.length;d++)if(b[d].parent!=c)return-1;return 0}});h.register("NodeModule",function(){return{commands:{AppendChildNode:i,AppendSiblingNode:j,RemoveNode:k,AppendParentNode:l},commandShortcutKeys:{appendsiblingnode:"normal::Enter",appendchildnode:"normal::Insert|Tab",appendparentnode:"normal::Shift+Tab|normal::Shift+Insert",removenode:"normal::Del|Backspace"}}})}},b[57]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21),b.r(23),b.r(11)),g=b.r(22),h=b.r(29);g.register("NoteModule",function(){var a="M9,9H3V8h6L9,9L9,9z M9,7H3V6h6V7z M9,5H3V4h6V5z M8.5,11H2V2h8v7.5 M9,12l2-2V1H1v11",b=e.createClass("NoteCommand",{base:f,execute:function(a,b){var c=a.getSelectedNode();c.setData("note",b),c.render(),c.getMinder().layout(300)},queryState:function(a){return 1===a.getSelectedNodes().length?0:-1},queryValue:function(a){var b=a.getSelectedNode();return b&&b.getData("note")}}),c=e.createClass("NoteIcon",{base:e.Group,constructor:function(){this.callBase(),this.width=16,this.height=17,this.rect=new e.Rect(16,17,.5,-8.5,2).fill("transparent"),this.path=(new e.Path).setPathData(a).setTranslate(2.5,-6.5),this.addShapes([this.rect,this.path]),this.on("mouseover",function(){this.rect.fill("rgba(255, 255, 200, .8)")}).on("mouseout",function(){this.rect.fill("transparent")}),this.setStyle("cursor","pointer")}});return{renderers:{right:e.createClass("NoteIconRenderer",{base:h,create:function(a){var b=new c;return b.on("mousedown",function(b){b.preventDefault(),a.getMinder().fire("editnoterequest")}),b.on("mouseover",function(){a.getMinder().fire("shownoterequest",{node:a,icon:b})}),b.on("mouseout",function(){a.getMinder().fire("hidenoterequest",{node:a,icon:b})}),b},shouldRender:function(a){return a.getData("note")},update:function(a,b,c){var d=c.right+b.getStyle("space-left"),f=c.cy;return a.path.fill(b.getStyle("color")),a.setTranslate(d,f),new e.Box(d,Math.round(f-a.height/2),a.width,a.height)}})},commands:{note:b}}})}},b[58]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=(b.r(21),b.r(23),b.r(11),b.r(22)),h=b.r(29),i=e.createClass("OutlineRenderer",{base:h,create:function(a){var b=(new e.Rect).setId(f.uuid("node_outline"));return this.bringToBack=!0,b},update:function(a,b,c){var d=b.getStyle("shape"),f=b.getStyle("padding-left"),g=b.getStyle("padding-right"),h=b.getStyle("padding-top"),i=b.getStyle("padding-bottom"),j={x:c.x-f,y:c.y-h,width:c.width+f+g,height:c.height+h+i},k=b.getStyle("radius");if(d&&"circle"==d){var l=Math.pow;k=(0,Math.round)(Math.sqrt(l(j.width,2)+l(j.height,2))/2),j.x=c.cx-k,j.y=c.cy-k,j.width=2*k,j.height=2*k}var m=b.isSelected()?b.getMinder().isFocused()?"selected-":"blur-selected-":"";return a.setPosition(j.x,j.y).setSize(j.width,j.height).setRadius(k).fill(b.getData("background")||b.getStyle(m+"background")||b.getStyle("background")).stroke(b.getStyle(m+"stroke"||b.getStyle("stroke")),b.getStyle(m+"stroke-width")),new e.Box(j)}}),j=e.createClass("ShadowRenderer",{base:h,create:function(a){return this.bringToBack=!0,new e.Rect},shouldRender:function(a){return a.getStyle("shadow")},update:function(a,b,c){a.setPosition(c.x+4,c.y+5).fill(b.getStyle("shadow"));var d=b.getStyle("shape");if(d){if("circle"==d){var e=Math.max(c.width,c.height);a.setSize(e,e),a.setRadius(e/2)}}else a.setSize(c.width,c.height),a.setRadius(b.getStyle("radius"))}}),k=new e.Marker;k.setWidth(10),k.setHeight(12),k.setRef(0,0),k.setViewBox(-6,-4,8,10),k.addShape((new e.Path).setPathData("M-5-3l5,3,-5,3").stroke("#33ffff"));var l=/wire/.test(window.location.href),m=e.createClass("WireframeRenderer",{base:h,create:function(){var a=new e.Group,b=this.oxy=(new e.Path).stroke("#f6f").setPathData("M0,-50L0,50M-50,0L50,0"),c=this.wireframe=(new e.Rect).stroke("lightgreen"),d=this.vectorIn=(new e.Path).stroke("#66ffff"),f=this.vectorOut=(new e.Path).stroke("#66ffff");return d.setMarker(k,"end"),f.setMarker(k,"end"),a.addShapes([b,c,d,f])},shouldRender:function(){return l},update:function(a,b,c){this.wireframe.setPosition(c.x,c.y).setSize(c.width,c.height);var d=b.getVertexIn(),e=b.getVertexOut(),f=b.getLayoutVectorIn().normalize(30),g=b.getLayoutVectorOut().normalize(30);this.vectorIn.setPathData(["M",d.offset(f.reverse()),"L",d]),this.vectorOut.setPathData(["M",e,"l",g])}});g.register("OutlineModule",function(){return{events:l?{ready:function(){this.getPaper().addResource(k)},layoutallfinish:function(){this.getRoot().traverse(function(a){a.getRenderer("WireframeRenderer").update(null,a,a.getContentBox())})}}:null,renderers:{outline:i,outside:[j,m]}}})}},b[59]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=(b.r(21),b.r(23),b.r(11)),h=b.r(22),i=b.r(29);h.register("PriorityModule",function(){var a=[null,["#FF1200","#840023"],["#0074FF","#01467F"],["#00AF00","#006300"],["#FF962E","#B25000"],["#A464FF","#4720C4"],["#A3A3A3","#515151"],["#A3A3A3","#515151"],["#A3A3A3","#515151"],["#A3A3A3","#515151"]],b="M0,13c0,3.866,3.134,7,7,7h6c3.866,0,7-3.134,7-7V7H0V13z",c="M20,10c0,3.866-3.134,7-7,7H7c-3.866,0-7-3.134-7-7V7c0-3.866,3.134-7,7-7h6c3.866,0,7,3.134,7,7V10z",d="priority",h=e.createClass("PriorityIcon",{base:e.Group,constructor:function(){this.callBase(),this.setSize(20),this.create(),this.setId(f.uuid("node_priority"))},setSize:function(a){this.width=this.height=a},create:function(){var a,d,f;(new e.Path).setPathData(c).fill("white"),a=(new e.Path).setPathData(b).setTranslate(.5,.5),d=(new e.Path).setPathData(c).setOpacity(.8).setTranslate(.5,.5),f=(new e.Text).setX(this.width/2-.5).setY(this.height/2).setTextAnchor("middle").setVerticalAlign("middle").setFontItalic(!0).setFontSize(12).fill("white"),this.addShapes([a,d,f]),this.mask=d,this.back=a,this.number=f},setValue:function(b){var c=this.back,d=this.mask,e=this.number,f=a[b];f&&(c.fill(f[1]),d.fill(f[0])),e.setContent(b)}});return{commands:{priority:e.createClass("SetPriorityCommand",{base:g,execute:function(a,b){for(var c=a.getSelectedNodes(),e=0;e<c.length;e++)c[e].setData(d,b||null).render();a.layout()},queryValue:function(a){for(var b,c=a.getSelectedNodes(),e=0;e<c.length&&!(b=c[e].getData(d));e++);return b||null},queryState:function(a){return a.getSelectedNodes().length?0:-1}})},renderers:{left:e.createClass("PriorityRenderer",{base:i,create:function(a){return new h},shouldRender:function(a){return a.getData(d)},update:function(a,b,c){var f,g,h=b.getData(d),i=b.getStyle("space-left");return a.setValue(h),f=c.left-a.width-i,g=-a.height/2,a.setTranslate(f,g),new e.Box({x:f,y:g,width:a.width,height:a.height})}})}}})}},b[60]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=(b.r(21),b.r(23),b.r(11)),h=b.r(22),i=b.r(29);h.register("ProgressModule",function(){var a=this,b="progress",c="#FFED83",d="#43BC00",h="M10,3c4.418,0,8,3.582,8,8h1c0-5.523-3.477-10-9-10S1,5.477,1,11h1C2,6.582,5.582,3,10,3z",j="#8E8E8E",k="M10,0C4.477,0,0,4.477,0,10c0,5.523,4.477,10,10,10s10-4.477,10-10C20,4.477,15.523,0,10,0zM10,18c-4.418,0-8-3.582-8-8s3.582-8,8-8s8,3.582,8,8S14.418,18,10,18z",l=(new e.LinearGradient).pipe(function(a){a.setStartPosition(0,0),a.setEndPosition(0,1),a.addStop(0,"#fff"),a.addStop(1,"#ccc")}),m="M15.812,7.896l-6.75,6.75l-4.5-4.5L6.25,8.459l2.812,2.803l5.062-5.053L15.812,7.896z",n="#EEE";a.getPaper().addResource(l);var o=e.createClass("ProgressIcon",{base:e.Group,constructor:function(a){this.callBase(),this.setSize(20),this.create(),this.setValue(a),this.setId(f.uuid("node_progress")),this.translate(.5,.5)},setSize:function(a){this.width=this.height=a},create:function(){var a,b,f,g,i;a=new e.Circle(9).fill(c),b=new e.Pie(9,0).fill(d),f=(new e.Path).setPathData(h).setTranslate(-10,-10).fill(j),g=(new e.Path).setTranslate(-10,-10).setPathData(k).fill(l),i=(new e.Path).setTranslate(-10,-10).setPathData(m).fill(n),this.addShapes([a,b,f,i,g]),this.pie=b,this.check=i},setValue:function(a){this.pie.setAngle(-360*(a-1)/8),this.check.setVisible(9==a)}});return{commands:{progress:e.createClass("ProgressCommand",{base:g,execute:function(a,c){for(var d=a.getSelectedNodes(),e=0;e<d.length;e++)d[e].setData(b,c||null).render();a.layout()},queryValue:function(a){for(var c,d=a.getSelectedNodes(),e=0;e<d.length&&!(c=d[e].getData(b));e++);return c||null},queryState:function(a){return a.getSelectedNodes().length?0:-1}})},renderers:{left:e.createClass("ProgressRenderer",{base:i,create:function(a){return new o},shouldRender:function(a){return a.getData(b)},update:function(a,c,d){var f,g,h=c.getData(b),i=c.getStyle("space-left");return a.setValue(h),f=d.left-a.width-i,g=-a.height/2,a.setTranslate(f+a.width/2,g+a.height/2),new e.Box(f,g,a.width,a.height)}})}}})}},b[61]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=(b.r(21),b.r(23),b.r(11)),h=b.r(22),i=b.r(29),j=b.r(5).LeaderLine,k=b.r(6).PlainDraggable;h.register("relLine",function(){function a(a,b){var c=a.rc.getId(),d=b.rc.getId(),e=document.getElementById(c),f=document.getElementById(d),g=new j(e,f,n);return g.start=j.pointAnchor(e,{x:e.getBBox().width/2,y:0}),g.end=j.pointAnchor(f,{x:f.getBBox()/2,y:0}),km._relLine_obj.push(g),g}function b(a){function b(){var b=document.getElementsByClassName("rel-line-point-start")[0].getBoundingClientRect(),c=document.getElementsByClassName("rel-line-point-end")[0].getBoundingClientRect(),d=document.getElementsByClassName("rel-line-line-start")[0],e=document.getElementsByClassName("rel-line-line-end")[0];d.x2.baseVal.value=b.x-j+o,d.y2.baseVal.value=b.y-n+o,e.x1.baseVal.value=c.x-j+o,e.y1.baseVal.value=c.y-n+o;var g={x:b.x-j+o-s.p1.x,y:b.y-n+o-s.p1.y},h={x:c.x-j+o-s.p2.x,y:c.y-n+o-s.p2.y};f.ctrl=[{x:g.x,y:g.y},{x:h.x,y:h.y}],a.setOptions({startSocketGravity:[g.x,g.y],endSocketGravity:[h.x,h.y]}),l.position(),m.position()}c();var d,e,f=km._relLine[km._relLine_obj.indexOf(a)],g=km.getPaper().getNode(),h=km.getNodeById(f.startId).rc.node,i=km.getNodeById(f.endId).rc.node,j=g.getBoundingClientRect().x,n=g.getBoundingClientRect().y;d=document.createElementNS("http://www.w3.org/2000/svg","circle"),d&&(d.setAttribute("cx",h.getBoundingClientRect().x+(h.getBBox().width/2-j)),d.setAttribute("cy",h.getBoundingClientRect().y-n),d.setAttribute("r",o),d.setAttribute("class","rel-line-point-start"),d.setAttribute("style","-webkit-tap-highlight-color: transparent; box-shadow: transparent 0px 0px 1px; cursor: grab; user-select: none;fill: #009143;"),g.appendChild(d)),(e=document.createElementNS("http://www.w3.org/2000/svg","circle"))&&(e.setAttribute("cx",i.getBoundingClientRect().x+(i.getBBox().width/2-j)),e.setAttribute("cy",i.getBoundingClientRect().y-n),e.setAttribute("r",o),e.setAttribute("class","rel-line-point-end"),e.setAttribute("style","-webkit-tap-highlight-color: transparent; box-shadow: transparent 0px 0px 1px; cursor: grab; user-select: none;fill: #009143;"),g.appendChild(e));var p=document.createElementNS("http://www.w3.org/2000/svg","line");p&&(p.setAttribute("x1",h.getBoundingClientRect().x+(h.getBBox().width/2-j)),p.setAttribute("y1",h.getBoundingClientRect().y-n),p.setAttribute("x2",d.getBoundingClientRect().x-j+o),p.setAttribute("y2",d.getBoundingClientRect().y-n+o),p.setAttribute("class","rel-line-line-start"),p.setAttribute("style","stroke: #009143;stroke-width: 2px;"),g.appendChild(p));var q=document.createElementNS("http://www.w3.org/2000/svg","line");q&&(q.setAttribute("x1",e.getBoundingClientRect().x-j+o),q.setAttribute("y1",e.getBoundingClientRect().y-n+o),q.setAttribute("x2",i.getBoundingClientRect().x+(i.getBBox().width/2-j)),q.setAttribute("y2",i.getBoundingClientRect().y-n),q.setAttribute("class","rel-line-line-end"),q.setAttribute("style","stroke: #009143;stroke-width: 2px;"),g.appendChild(q));var r=g,s={p0:{x:h.getBoundingClientRect().x,y:h.getBoundingClientRect().y},p1:{x:d.cx.baseVal.value,y:d.cy.baseVal.value},p2:{x:e.cx.baseVal.value,y:e.cy.baseVal.value},p3:{x:i.getBoundingClientRect().x,y:i.getBoundingClientRect().y}};l=new k(d,{containment:r,onMove:function(){b()}}),m=new k(e,{containment:r,onMove:function(){b()}}),g.addEventListener("mousedown",function(){km.circle.remove()})}function c(){Array.prototype.forEach.call(document.getElementsByClassName("rel-line-point-start"),function(a){a.remove()}),Array.prototype.forEach.call(document.getElementsByClassName("rel-line-point-end"),function(a){a.remove()}),Array.prototype.forEach.call(document.getElementsByClassName("rel-line-line-start"),function(a){a.remove()}),Array.prototype.forEach.call(document.getElementsByClassName("rel-line-line-end"),function(a){a.remove()}),l=null,m=null}function d(a){km.circle.curline=a,b(a),h(a)}function h(a){var b=km.getPaper().getNode(),c=b.getBoundingClientRect().x,d=b.getBoundingClientRect().y,e=km._relLine[km._relLine_obj.indexOf(a)],f=document.getElementsByClassName("rel-line-point-start")[0],g=document.getElementsByClassName("rel-line-point-end")[0];if(f&&e.ctrl){f.cx.baseVal.value=f.cx.baseVal.value+e.ctrl[0].x,f.cy.baseVal.value=f.cy.baseVal.value+e.ctrl[0].y,g.cx.baseVal.value=g.cx.baseVal.value+e.ctrl[1].x,g.cy.baseVal.value=g.cy.baseVal.value+e.ctrl[1].y;var h=document.getElementsByClassName("rel-line-line-start")[0],i=document.getElementsByClassName("rel-line-line-end")[0];h.x2.baseVal.value=f.getBoundingClientRect().x-c+o,h.y2.baseVal.value=f.getBoundingClientRect().y-d+o,i.x1.baseVal.value=g.getBoundingClientRect().x-c+o,i.y1.baseVal.value=g.getBoundingClientRect().y-d+o,l.position(),m.position()}}var l,m,n={color:"#009143",size:1.5,dash:!1,endPlugSize:2,startSocket:"right",Socket:"left"},o=10,p=e.createClass("RelLineCommand",{base:g,execute:function(a){function b(){var c=a.getSelectedNode();if(c)try{var d=document.getElementById(c.rc.getId());l.start!=d&&(l.end=d,l.end=j.pointAnchor(d,{x:d.getBBox()/2,y:0}),a.getRenderContainer().container.removeEventListener("mousedown",b),a.getRenderContainer().container.removeEventListener("mousemove",e),m.endId=c.data.id||"",a._relLine.push(m))}catch(a){console.log("zhhlog:relLine:RelLineCommand:error="+a)}}function e(){Date.now()-o>50&&(o=parseInt(Date.now()),l.end=j.areaAnchor(a.getRenderContainer().container.node,{x:window.event.offsetX,y:window.event.offsetY,width:0,height:0}),l.position())}var g=a.getSelectedNode(),h=j.areaAnchor(a.getRenderContainer().container.node,{x:0,y:0,width:0,height:0});if(g){var i=g.rc.getId(),k=document.getElementById(i),l=new j(k,h,n);l.start=j.pointAnchor(k,{x:k.getBBox().width/2,y:0}),a._relLine=a._relLine||[],a._relLine_obj=a._relLine_obj||[];var m={id:f.guid(),startId:g.data.id||"",endId:""};a._relLine_obj.push(l),a.circle={create:d,remove:c},a.getRenderContainer().container.addEventListener("mousedown",b);var o=parseInt(Date.now());a.getRenderContainer().container.addEventListener("mousemove",e)}},queryState:function(a){var b=a.getSelectedNodes(),c=0;return 0===b.length?-1:(b.forEach(function(a){if(a&&a.getData("relLine"))return c=0,!1}),c)},queryValue:function(a){return{relLine:a.getSelectedNode().getData("relLine")}}}),q=function(){km.circle={create:d,remove:c},km._relLine_render=function(a,b){console.error=function(){},a=a||0,setTimeout(function(){if(km._relLine_obj){var a=km.getSelectedNode(),e=void 0!=a?a.children:null,f=function(a,b,d){a&&a.forEach(function(a){var e=a.data.id;a.rc.node;d.startId!=e&&d.endId!=e||("none"==km.getNodeById(d.startId).rc.node.getAttribute("display")||"none"==km.getNodeById(d.endId).rc.node.getAttribute("display")?(b.hide(),document.getElementsByClassName("rel-line-point-start").length>0&&c(b)):b.show()),f(a.children,b,d)})};km._relLine_obj.forEach(function(a,c){try{a.position()}catch(a){}b&&f(e,a,km._relLine[c]),document.getElementsByClassName("rel-line-point-start").length>0&&km.circle.curline===a&&d(a)})}},a)}},r=e.createClass("LeaderLineRenderer",{base:e.Group,constructor:function(a){this.callBase(),this.create()},create:function(){try{setTimeout(function(){var b=km._relLine||[];km._relLine_obj=km._relLine_obj||[],q(),b.forEach(function(b,c){a(km.getNodeById(b.startId),km.getNodeById(b.endId))})},800)}catch(a){console.log("zhhlog:LeaderLineRenderer:error:"+a)}}});return setTimeout(function(){q()},1e3),{commands:{relLine:p},renderers:{left:e.createClass("LeaderLineRenderer",{base:i,create:function(a){return new r(a)},shouldRender:function(a){return a.getData("relLine")},update:function(a,b,c){}})}}})}},b[62]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21)),g=(b.r(23),b.r(11)),h=b.r(22),i=b.r(29);h.register("Resource",function(){var a=function(){var a,b,c,d,e,f,g,h,i,j,k;return k=4*(1<<30),a=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],e=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479],j=function(a){return a<0&&(a+=k),("00000000"+a.toString(16)).slice(-8)},f=[[16,50,84,118,152,186,220,254],[174,132,249,109,193,32,123,53],[139,12,37,223,234,99,23,73],[151,19,205,235,98,165,4,143],[9,117,66,250,30,203,134,211],[194,166,176,56,212,87,239,145],[92,241,222,164,112,54,41,184],[189,231,28,147,5,79,104,162],[246,158,59,128,44,125,65,90],[42,72,103,81,191,233,195,13]],g=function(a,b,c){var d=h[a]^h[b];h[a]=d>>>c|d<<32-c},b=function(a,b,j,k,l){var m=d+f[c][a]%16,n=d+(f[c][a]>>4);b%=4,j=4+j%4,k=8+k%4,l=12+l%4,h[b]+=h[j]+(i[m]^e[n%16]),g(l,b,16),h[k]+=h[l],g(j,k,12),h[b]+=h[j]+(i[n]^e[m%16]),g(l,b,8),h[k]+=h[l],g(j,k,7)},function(f,g){g instanceof Array&&4===g.length||(g=[0,0,0,0]);var k,l,m,n,o,p,q,r;for(l=a.slice(0),k=e.slice(0,8),c=0;c<4;c+=1)k[c]^=g[c];if(m=16*f.length,o=m%512>446||m%512==0?0:m,m%512==432)f+="老";else{for(f+="耀";f.length%32!=27;)f+="\0";f+=""}for(i=[],r=0;r<f.length;r+=2)i.push(65536*f.charCodeAt(r)+f.charCodeAt(r+1));for(i.push(0),i.push(m),p=i.length-16,q=0,d=0;d<i.length;d+=16){for(q+=512,n=d===p?o:Math.min(m,q),h=l.concat(k),h[12]^=n,h[13]^=n,c=0;c<10;c+=1)for(r=0;r<8;r+=1)r<4?b(r,r,r,r,r):b(r,r,r+1,r+2,r+3);for(r=0;r<8;r+=1)l[r]^=g[r%4]^h[r]^h[r+8]}return l.map(j).join("")}}(),b=[51,303,75,200,157,0,26,254].map(function(a){return e.Color.createHSL(a,100,85)});e.extendClass(f,{getHashCode:function(b){b=a(b);var c,d,e=1315423911;for(c=b.length-1;c>=0;c--)d=b.charCodeAt(c),e^=(e<<5)+d+(e>>2);return 2147483647&e},getResourceColor:function(a){var c,d=this._getResourceColorIndexMapping();return Object.prototype.hasOwnProperty.call(d,a)||(c=this._getNextResourceColorIndex(),d[a]=c),b[d[a]]||e.Color.createHSL(Math.floor(this.getHashCode(a)/2147483647*359),100,85)},getUsedResource:function(){var a,b=this._getResourceColorIndexMapping(),c=[];for(a in b)Object.prototype.hasOwnProperty.call(b,a)&&c.push(a);return c},_getNextResourceColorIndex:function(){var a,c,d,e=this._getResourceColorIndexMapping();c=[];for(a in e)Object.prototype.hasOwnProperty.call(e,a)&&c.push(e[a]);for(d=0;d<b.length;d++)if(!~c.indexOf(d))return d;return-1},_getResourceColorIndexMapping:function(){return this._resourceColorMapping||(this._resourceColorMapping={})}});var c=e.createClass("ResourceCommand",{base:g,execute:function(a,b){var c=a.getSelectedNodes();"string"==typeof b&&(b=[b]),c.forEach(function(a){a.setData("resource",b).render()}),a.layout(200)},queryValue:function(a){var b=a.getSelectedNodes(),c=[];return b.forEach(function(a){var b=a.getData("resource");b&&b.forEach(function(a){~c.indexOf(a)||c.push(a)})}),c},queryState:function(a){return a.getSelectedNode()?0:-1}}),d=e.createClass("ResourceOverlay",{base:e.Group,constructor:function(){this.callBase();var a,b;b=this.rect=(new e.Rect).setRadius(4),a=this.text=(new e.Text).setFontSize(12).setVerticalAlign("middle"),this.addShapes([b,a])},setValue:function(a,b){var c,d,e,f=8,g=4;c=this.text,a==this.lastResourceName?d=this.lastBox:(c.setContent(a),d=c.getBoundaryBox(),this.lastResourceName=a,this.lastBox=d),c.setX(f).fill(b.dec("l",70)),e=this.rect,e.setPosition(0,d.y-g),this.width=Math.round(d.width+2*f),this.height=Math.round(d.height+2*g),e.setSize(this.width,this.height),e.fill(b)}});return{commands:{resource:c},renderers:{right:e.createClass("ResourceRenderer",{base:i,create:function(a){return this.overlays=[],new e.Group},shouldRender:function(a){return a.getData("resource")&&a.getData("resource").length},update:function(a,b,c){var f=b.getStyle("space-right"),g=this.overlays,h=b.getData("resource").filter(function(a){return null!==a});if(0!==h.length){var i,j,k,l=b.getMinder();for(k=0,i=0;i<h.length;i++)k+=f,j=g[i],j||(j=new d,g.push(j),a.addShape(j)),j.setVisible(!0),j.setValue(h[i],l.getResourceColor(h[i])),j.setTranslate(k,-1),k+=j.width;for(;j=g[i++];)j.setVisible(!1);return a.setTranslate(c.right,0),new e.Box({x:c.right,y:Math.round(-g[0].height/2),width:k,height:g[0].height})}}})}}})}},b[63]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21),b.r(23),b.r(11),b.r(22));b.r(29);f.register("Select",function(){var a=this,b=a.getRenderContainer(),c=function(){var c=null,d=new e.Path,f=!1;return{selectStart:function(a){if(!a.originEvent.button&&!a.originEvent.altKey)return c?this.selectEnd():void(c=a.getPosition(b).round())},selectMove:function(g){if("textedit"!=a.getStatus()&&c){var h=c,i=g.getPosition(b);if(!f){if(e.Vector.fromPoints(h,i).length()<10)return;f=!0,b.addShape(d),d.fill(a.getStyle("marquee-background")).stroke(a.getStyle("marquee-stroke")).setOpacity(.8).getDrawer().clear()}var j=new e.Box(h.x,h.y,i.x-h.x,i.y-h.y),k=[];j.left=Math.round(j.left),j.top=Math.round(j.top),j.right=Math.round(j.right),j.bottom=Math.round(j.bottom),d.getDrawer().pipe(function(){this.clear(),this.moveTo(j.left,j.top),this.lineTo(j.right,j.top),this.lineTo(j.right,j.bottom),this.lineTo(j.left,j.bottom),this.close()}),a.getRoot().traverse(function(a){a.getLayoutBox().intersect(j).isEmpty()||k.push(a)}),a.select(k,!0),window.getSelection().removeAllRanges()}},selectEnd:function(a){c&&(c=null),f&&(d.fadeOut(200,"ease",0,function(){d.remove&&d.remove()}),f=!1)}}}(),d=null,f=null;return{init:function(){window.addEventListener("mouseup",function(){c.selectEnd()})},events:{mousedown:function(a){var b=a.getTargetNode();b?a.isShortcutKey("Ctrl")?this.toggleSelect(b):b.isSelected()?this.isSingleSelect()||(d=b,f=a.getPosition()):this.select(b,!0):(this.removeAllSelectedNodes(),c.selectStart(a),this.setStatus("normal"))},mousemove:c.selectMove,mouseup:function(a){var b=a.getTargetNode();if(b&&b==d){var g=a.getPosition();e.Vector.fromPoints(f,g).length()<1&&this.select(d,!0),d=null}c.selectEnd(a)},"normal.keydown":function(a){if(a.isShortcutKey("ctrl+a")){var b=[];this.getRoot().traverse(function(a){b.push(a)}),this.select(b,!0),a.preventDefault()}}}}})}},b[64]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21),b.r(23),b.r(11)),g=b.r(22);b.r(29);g.register("StyleModule",function(){function a(a){for(var c=a.getData(),d=0;d<b.length;d++)if(b[d]in c)return!0}var b=["font-size","font-family","font-weight","font-style","background","color"],c=null;return{commands:{copystyle:e.createClass("CopyStyleCommand",{base:f,execute:function(a){var d=a.getSelectedNode(),e=d.getData();return c={},b.forEach(function(a){a in e?c[a]=e[a]:(c[a]=null,delete c[a])}),c},queryState:function(b){var c=b.getSelectedNodes();return 1!==c.length?-1:a(c[0])?0:-1}}),pastestyle:e.createClass("PastStyleCommand",{base:f,execute:function(a){return a.getSelectedNodes().forEach(function(a){for(var b in c)c.hasOwnProperty(b)&&a.setData(b,c[b])}),a.renderNodeBatch(a.getSelectedNodes()),a.layout(300),c},queryState:function(a){return c&&a.getSelectedNodes().length?0:-1}}),clearstyle:e.createClass("ClearStyleCommand",{base:f,execute:function(a){return a.getSelectedNodes().forEach(function(a){b.forEach(function(b){a.setData(b)})}),a.renderNodeBatch(a.getSelectedNodes()),a.layout(300),c},queryState:function(b){var c=b.getSelectedNodes();if(!c.length)return-1;for(var d=0;d<c.length;d++)if(a(c[d]))return 0;return-1}})}}})}},b[65]={value:function(a,c,d){var e=b.r(19),f=b.r(35),g=(b.r(21),b.r(23)),h=b.r(11),i=b.r(22),j=b.r(29),k={safari:{"微软雅黑,Microsoft YaHei":-.17,"楷体,楷体_GB2312,SimKai":-.1,"隶书, SimLi":-.1,"comic sans ms":-.23,"impact,chicago":-.15,"times new roman":-.1,"arial black,avant garde":-.17,default:0},ie:{10:{"微软雅黑,Microsoft YaHei":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"times new roman":.04,"arial black,avant garde":-.17,default:-.15},11:{"微软雅黑,Microsoft YaHei":-.17,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"times new roman":.04,"sans-serif":-.16,"arial black,avant garde":-.17,default:-.15}},edge:{"微软雅黑,Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.17,"impact,chicago":-.08,"sans-serif":-.16,"arial black,avant garde":-.17,default:-.15},sg:{"微软雅黑,Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.05,"comic sans ms":-.22,"impact,chicago":-.16,"times new roman":-.03,"arial black,avant garde":-.22,default:-.15},chrome:{Mac:{"andale mono":-.05,"comic sans ms":-.3,"impact,chicago":-.13,"times new roman":-.1,"arial black,avant garde":-.17,default:0},Win:{"微软雅黑,Microsoft YaHei":-.15,"arial,helvetica,sans-serif":-.02,"arial black,avant garde":-.2,"comic sans ms":-.2,"impact,chicago":-.12,"times new roman":-.02,default:-.15},Lux:{"andale mono":-.05,"comic sans ms":-.3,"impact,chicago":-.13,"times new roman":-.1,"arial black,avant garde":-.17,default:0}},firefox:{Mac:{"微软雅黑,Microsoft YaHei":-.2,"宋体,SimSun":.05,"comic sans ms":-.2,"impact,chicago":-.15,"arial black,avant garde":-.17,"times new roman":-.1,default:.05},Win:{"微软雅黑,Microsoft YaHei":-.16,"andale mono":-.17,"arial,helvetica,sans-serif":-.17,"comic sans ms":-.22,"impact,chicago":-.23,"times new roman":-.22,"sans-serif":-.22,"arial black,avant garde":-.17,default:-.16},Lux:{"宋体,SimSun":-.2,"微软雅黑,Microsoft YaHei":-.2,"黑体, SimHei":-.2,"隶书, SimLi":-.2,"楷体,楷体_GB2312,SimKai":-.2,"andale mono":-.2,"arial,helvetica,sans-serif":-.2,"comic sans ms":-.2,"impact,chicago":-.2,"times new roman":-.2,"sans-serif":-.2,"arial black,avant garde":-.2,default:-.16}}},l=e.createClass("TextRenderer",{base:j,create:function(){return(new e.Group).setId(f.uuid("node_text"))},update:function(a,b){function c(a){return b.getData(a)||b.getStyle(a)}var d,f=b.getText(),g=f?f.split("\n"):[" "],h=b.getStyle("line-height"),i=c("font-size"),j=c("font-family")||"default",l=h*i*g.length-(h-1)*i,m=-l/2,n=e.Browser;n.chrome||n.opera||n.bd||"chrome"===n.lb?d=k.chrome[n.platform][j]:n.gecko?d=k.firefox[n.platform][j]:n.sg?d=k.sg[j]:n.safari?d=k.safari[j]:n.ie?d=k.ie[n.version][j]:n.edge?d=k.edge[j]:n.lb&&(d=.9),a.setTranslate(0,(d||0)*i);var o=new e.Box,p=Math.round;this.setTextStyle(b,a);var q,r,s,t,u=g.length,v=a.getItems().length;if(u<v)for(q=u,r;r=a.getItem(q);)a.removeItem(q);else if(u>v)for(var w=u-v;w--;)s=(new e.Text).setAttr("text-rendering","inherit"),e.Browser.ie||e.Browser.edge?s.setVerticalAlign("top"):s.setAttr("dominant-baseline","text-before-edge"),a.addItem(s);for(q=0,s;t=g[q],s=a.getItem(q);q++)s.setContent(t),(e.Browser.ie||e.Browser.edge)&&s.fixPosition();this.setTextStyle(b,a);var x=b.getText()+["font-size","font-name","font-weight","font-style"].map(c).join("/");return b._currentTextHash==x&&b._currentTextGroupBox?b._currentTextGroupBox:(b._currentTextHash=x,function(){a.eachItem(function(a,b){var c=m+a*i*h;b.setY(c);var d=b.getBoundaryBox();o=o.merge(new e.Box(0,c,d.height&&d.width||1,i))});var c=new e.Box(p(o.x),p(o.y),p(o.width),p(o.height));return b._currentTextGroupBox=c,c})},setTextStyle:function(a,b){l._styleHooks.forEach(function(c){c(a,b)})}}),m=e.createClass({base:h,execute:function(a,b){var c=a.getSelectedNode();c&&(c.setText(b),c.render(),a.layout())},queryState:function(a){return 1==a.getSelectedNodes().length?0:-1},queryValue:function(a){var b=a.getSelectedNode();return b?b.getText():null}});f.extend(l,{_styleHooks:[],registerStyleHook:function(a){l._styleHooks.push(a)}}),e.extendClass(g,{getTextGroup:function(){return this.getRenderer("TextRenderer").getRenderShape()}}),i.register("text",{commands:{text:m},renderers:{center:l}}),d.exports=l}},b[66]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21),b.r(23),b.r(11)),g=b.r(22),h=(b.r(29),e.createClass("ViewDragger",{constructor:function(a){this._minder=a,this._enabled=!1,this._bind();var b=this;this._minder.getViewDragger=function(){return b},this.setEnabled(!1)},isEnabled:function(){return this._enabled},setEnabled:function(a){var b=this._minder.getPaper();b.setStyle("cursor",a?"pointer":"default"),b.setStyle("cursor",a?"-webkit-grab":"default"),this._enabled=a},timeline:function(){return this._moveTimeline},move:function(a,b){var c=(this._minder,this.getMovement().offset(a));this.moveTo(c,b)},moveTo:function(a,b){if(b){var c=this;return this._moveTimeline&&this._moveTimeline.stop(),this._moveTimeline=this._minder.getRenderContainer().animate(new e.Animator(this.getMovement(),a,function(a,b){c.moveTo(b)}),b,"easeOutCubic").timeline(),this._moveTimeline.on("finish",function(){c._moveTimeline=null}),this}this._minder.getRenderContainer().setTranslate(a.round()),this._minder.fire("viewchange"),"function"==typeof this._minder._relLine_render&&this._minder._relLine_render()},getMovement:function(){var a=this._minder.getRenderContainer().transform.translate;return a?a[0]:new e.Point},getView:function(){var a=this._minder,b=a._lastClientSize||{width:a.getRenderTarget().clientWidth,height:a.getRenderTarget().clientHeight},c=this.getMovement(),d=new e.Box(0,0,b.width,b.height);return a.getPaper().getViewPortMatrix().inverse().translate(-c.x,-c.y).transformBox(d)},_bind:function(){function a(a){if(d){d=null,a.stopPropagation(),c&&(b.setEnabled(!1),c=!1,"hand"==b._minder.getStatus()&&b._minder.rollbackStatus());b._minder.getPaper().setStyle("cursor","hand"==b._minder.getStatus()?"-webkit-grab":"default"),b._minder.fire("viewchanged")}}var b=this,c=!1,d=null,f=null;this._minder.on("normal.mousedown normal.touchstart inputready.mousedown inputready.touchstart readonly.mousedown readonly.touchstart",function(a){2==a.originEvent.button&&a.originEvent.preventDefault(),(a.getTargetNode()==this.getRoot()||2==a.originEvent.button||a.originEvent.altKey)&&(d=a.getPosition("view"),c=!0)}).on("normal.mousemove normal.touchmove readonly.mousemove readonly.touchmove inputready.mousemove inputready.touchmove",function(a){if("touchmove"==a.type&&a.preventDefault(),c){if(e.Vector.fromPoints(d,a.getPosition("view")).length()>10){this.setStatus("hand",!0);b._minder.getPaper().setStyle("cursor","-webkit-grabbing")}}}).on("hand.beforemousedown hand.beforetouchstart",function(a){if(b.isEnabled()){d=a.getPosition("view"),a.stopPropagation();b._minder.getPaper().setStyle("cursor","-webkit-grabbing")}}).on("hand.beforemousemove hand.beforetouchmove",function(a){if(d){f=a.getPosition("view");var c=e.Vector.fromPoints(d,f);b.move(c),a.stopPropagation(),a.preventDefault(),a.originEvent.preventDefault(),d=f}}).on("mouseup touchend",a),window.addEventListener("mouseup",a),this._minder.on("contextmenu",function(a){a.preventDefault()})}}));g.register("View",function(){var a=e.createClass("ToggleHandCommand",{base:f,execute:function(a){"hand"!=a.getStatus()?a.setStatus("hand",!0):a.rollbackStatus(),this.setContentChanged(!1)},queryState:function(a){return"hand"==a.getStatus()?1:0},enableReadOnly:!0}),b=e.createClass("CameraCommand",{base:f,execute:function(a,b){b=b||a.getRoot();var c=a.getPaper().getViewPort(),d=b.getRenderContainer().getRenderBox("view"),f=c.center.x-d.x-d.width/2,g=c.center.y-d.y,h=a._viewDragger,i=a.getOption("viewAnimationDuration");h.move(new e.Point(f,g),i),this.setContentChanged(!1)},enableReadOnly:!0}),c=e.createClass("MoveCommand",{base:f,execute:function(a,b){var c=a._viewDragger,d=a._lastClientSize,f=a.getOption("viewAnimationDuration");switch(b){case"up":c.move(new e.Point(0,d.height/2),f);break;case"down":c.move(new e.Point(0,-d.height/2),f);break;case"left":c.move(new e.Point(d.width/2,0),f);break;case"right":c.move(new e.Point(-d.width/2,0),f)}},enableReadOnly:!0});return{init:function(){this._viewDragger=new h(this)},commands:{hand:a,camera:b,move:c},events:{statuschange:function(a){this._viewDragger.setEnabled("hand"==a.currentStatus)},mousewheel:function(a){var b,c;if(a=a.originEvent,!a.ctrlKey&&!a.shiftKey){"wheelDeltaX"in a?(b=a.wheelDeltaX||0,c=a.wheelDeltaY||0):(b=0,c=a.wheelDelta),this._viewDragger.move({x:b/2.5,y:c/2.5});var d=this;clearTimeout(this._mousewheeltimer),this._mousewheeltimer=setTimeout(function(){d.fire("viewchanged")},100),a.preventDefault()}},"normal.dblclick readonly.dblclick":function(a){a.kityEvent.targetShape instanceof e.Paper&&this.execCommand("camera",this.getRoot(),800)},"paperrender finishInitHook":function(){this.getRenderTarget()&&(this.execCommand("camera",null,0),this._lastClientSize={width:this.getRenderTarget().clientWidth,height:this.getRenderTarget().clientHeight})},resize:function(a){var b={width:this.getRenderTarget().clientWidth,height:this.getRenderTarget().clientHeight},c=this._lastClientSize;this._viewDragger.move(new e.Point((b.width-c.width)/2|0,(b.height-c.height)/2|0)),this._lastClientSize=b},"selectionchange layoutallfinish":function(a){var b=this.getSelectedNode(),c=this;if(e.Browser.edge&&this.fire("paperrender"),b){var d=this._viewDragger,f=d.timeline();if(f)return void f.on("finish",function(){c.fire("selectionchange")});var g=d.getView(),h=b.getLayoutBox(),i=50,j=0,k=0;h.right>g.right?j+=g.right-h.right-i:h.left<g.left&&(j+=g.left-h.left+i),h.bottom>g.bottom&&(k+=g.bottom-h.bottom-i),h.top<g.top&&(k+=g.top-h.top+i),(j||k)&&d.move(new e.Point(j,k),100)}}}}})}},b[67]={value:function(a,c,d){var e=b.r(19),f=(b.r(35),b.r(21)),g=(b.r(23),b.r(11)),h=b.r(22);b.r(29);h.register("Zoom",function(){function a(){var a=h._zoomValue>=100?"optimize-speed":"geometricPrecision";h.getRenderContainer().setAttr("text-rendering",a)}function b(a){var b=a.shapeNode,c=b.getCTM(),d=new e.Matrix(c.a,c.b,c.c,c.d,.5+(0|c.e),.5+(0|c.f));b.setAttribute("transform","matrix("+d.toString()+")")}function c(b,c){var f=b.getPaper();f.getViewPort();if(c){a();var g=b.getOption("zoomAnimationDuration");if(b.getRoot().getComplex()>200||!g)b._zoomValue=c,b.zoom(c),b.fire("viewchange");else{var h=new e.Animator({beginValue:b._zoomValue,finishValue:c,setter:function(a,b){a.zoom(b)}});b._zoomValue=c,d&&d.pause(),d=h.start(b,g,"easeInOutSine"),d.on("finish",function(){b.fire("viewchange")})}b.fire("zoom",{zoom:c})}}var d,h=this;e.extendClass(f,{zoom:function(a){var c=this.getPaper(),d=c.getViewPort();d.zoom=a/100,d.center={x:d.center.x,y:d.center.y},c.setViewPort(d),100==a&&b(c),"function"==typeof this._relLine_render&&this._relLine_render()},getZoomValue:function(){return this._zoomValue}});var i=e.createClass("Zoom",{base:g,execute:c,queryValue:function(a){return a._zoomValue}}),j=e.createClass("ZoomInCommand",{base:g,execute:function(a){c(a,this.nextValue(a))},queryState:function(a){return+!this.nextValue(a)},nextValue:function(a){var b,c=a.getOption("zoom");for(b=0;b<c.length;b++)if(c[b]>a._zoomValue)return c[b];return 0},enableReadOnly:!0}),k=e.createClass("ZoomOutCommand",{base:g,execute:function(a){c(a,this.nextValue(a))},queryState:function(a){return+!this.nextValue(a)},nextValue:function(a){var b,c=a.getOption("zoom");for(b=c.length-1;b>=0;b--)if(c[b]<a._zoomValue)return c[b];return 0},enableReadOnly:!0});return{init:function(){this._zoomValue=100,this.setDefaultOptions({zoom:[10,20,50,100,200]}),a()},commands:{zoomin:j,zoomout:k,zoom:i},events:{"normal.mousewheel readonly.mousewheel":function(a){if(a.originEvent.ctrlKey||a.originEvent.metaKey){var b=a.originEvent.wheelDelta,c=this;Math.abs(b)>100&&(clearTimeout(this._wheelZoomTimeout),this._wheelZoomTimeout=setTimeout(function(){c.getPaper()._zoom;b>0?c.execCommand("zoomin"):b<0&&c.execCommand("zoomout")},100),a.originEvent.preventDefault())}}},commandShortcutKeys:{zoomin:"ctrl+=",zoomout:"ctrl+-"}}})}},b[68]={value:function(a,c,d){b.r(14).registerProtocol("json",d.exports={fileDescription:"KityMinder 格式",fileExtension:".km",dataType:"text",mineType:"application/json",encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}})}},b[69]={value:function(a,c,d){function e(a){return f(a,1).join("\n")}function f(a,b){var c=[];b=b||1;var d=g(b);c.push(d+" "+a.data.text),c.push(o);var e=a.data.note;if(e){var h=/^#/.test(e);h&&(c.push(p),e=e.replace(/^#+/gm,function(a){return d+a})),c.push(e),h&&c.push(q),c.push(o)}return a.children&&a.children.forEach(function(a){c=c.concat(f(a,b+1))}),c}function g(a){for(var b="";a--;)b+="#";return b}function h(a){var b,c,d,e,f,g,h,m={};a=a.replace(/^(.+)\n={3,}/,function(a,b){return"# "+b}),b=a.split(n);for(var o=0;o<b.length;o++)c=b[o],d=k(c),d.noteClose?g=!1:d.noteStart?g=!0:(h=d.codeBlock?!h:h,g||h||!d.level||d.level>e+1?f&&j(f,c):(e=d.level,f=i(d.content,m[e-1]),m[e]=f));return l(m[1]),m[1]}function i(a,b){var c={data:{text:a,note:""}};return b&&(b.children?b.children.push(c):b.children=[c]),c}function j(a,b){a.data.note+=b+"\n"}function k(a){var b=/^(#+)?\s*(.*)$/.exec(a);return{level:b[1]&&b[1].length||null,content:b[2],noteStart:a==p,noteClose:a==q,codeBlock:/^\s*```/.test(a)}}function l(a){if(/\S/.test(a.data.note)){for(var b=a.data.note.split("\n");b.length&&!/\S/.test(b[0]);)b.shift();for(;b.length&&!/\S/.test(b[b.length-1]);)b.pop();a.data.note=b.join("\n")}else a.data.note=null,delete a.data.note;a.children&&a.children.forEach(l)}var m=b.r(14),n=/\r\n|\r|\n/,o="",p="\x3c!--Note--\x3e",q="\x3c!--/Note--\x3e";m.registerProtocol("markdown",d.exports={fileDescription:"Markdown/GFM 格式",fileExtension:".md",mineType:"text/markdown",dataType:"text",encode:function(a){return e(a.root)},decode:function(a){return h(a)}})}},b[70]={value:function(a,c,d){function e(a,b){return new k(function(b,c){var d=document.createElement("img");d.onload=function(){b({element:this,x:a.x,y:a.y,width:a.width,height:a.height})},d.onerror=function(a){c(a)},d.crossOrigin="anonymous",d.src=a.url})}function f(a,b){return k(function(b,c){var d=new XMLHttpRequest;d.open("GET",a.url+"?_="+Date.now(),!0),d.responseType="blob",d.onreadystatechange=function(){if(4===d.readyState&&200===d.status){var c=d.response,e=document.createElement("img");e.src=l.createObjectURL(c),e.onload=function(){l.revokeObjectURL(e.src),b({element:e,x:a.x,y:a.y,width:a.width,height:a.height})}}},d.send()})}function g(a){function b(c){var d=c.data;if(d.image){a.renderNode(c);var d=c.data,e=d.image,f=d.imageSize,g=c.getRenderBox("ImageRenderer",a.getRenderContainer()),h={url:e,width:f.width,height:f.height,x:-j.getBoundaryBox().x+g.x,y:-j.getBoundaryBox().y+g.y};o.push(h)}if("collapse"!==d.expandState)for(var i=c.getChildren(),k=0;k<i.length;k++)b(i[k])}var c,d,e,f,g,h,i=a.getPaper(),j=(i.container,a.getRenderContainer()),k=j.getRenderBox(),m=k.width+1,n=k.height+1;c=i.shapeNode.getAttribute("transform"),i.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),j.translate(-k.x,-k.y),d=i.container.innerHTML,j.translate(k.x,k.y),i.shapeNode.setAttribute("transform",c),e=document.createElement("div"),e.innerHTML=d,f=e.querySelector("svg"),f.setAttribute("width",k.width+1),f.setAttribute("height",k.height+1),f.setAttribute("style",'font-family: Arial, "Microsoft Yahei","Heiti SC";'),e=document.createElement("div"),e.appendChild(f),d=e.innerHTML,d=d.replace(' xmlns="http://www.w3.org/2000/svg" xmlns:NS1="" NS1:ns1:xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:NS2="" NS2:xmlns:ns1=""',""),d=d.replace(/&nbsp;|[\x00-\x1F\x7F-\x9F]/g,""),d=d.replace(/NS\d+:title/gi,"xlink:title"),g=new Blob([d],{type:"image/svg+xml"}),h=l.createObjectURL(g);var o=[];return b(a.getRoot()),{width:m,height:n,dataUrl:h,xml:d,imagesInfo:o}}function h(a,b,c){function d(a,b){a.save(),a.fillStyle=b,a.fillRect(0,0,o.width,o.height),a.restore()}function h(a,b,c,d,e,f){e&&f?a.drawImage(b,c+A,d+A,e,f):a.drawImage(b,c+A,d+A)}function j(a){return a.toDataURL("image/png")}function m(a){var b=a.map(function(a){return f(a)});return k.all(b)}function n(){return e({url:y}).then(function(a){return h(p,a.element,w,x,a.width,a.height),m(z)}).then(function(a){for(var b=0;b<a.length;b++)h(p,a[b].element,a[b].x+w,a[b].y+x,a[b].width,a[b].height);l.revokeObjectURL(y),document.body.appendChild(o);var c=j(o);return document.body.removeChild(o),c},function(a){alert("脑图的节点中包含跨域图片，导出的 png 中节点图片不显示，你可以替换掉这些跨域的图片并重试。"),l.revokeObjectURL(y),document.body.appendChild(o);var b=j(o);return document.body.removeChild(o),b})}var o=document.createElement("canvas"),p=o.getContext("2d"),q=b.getStyle("background").toString(),r=/url\(\"(.+)\"\)/.exec(q),s=i.Color.parse(q),t=g(b),u=c&&c.width&&c.width>t.width?c.width:t.width,v=c&&c.height&&c.height>t.height?c.height:t.height,w=c&&c.width&&c.width>t.width?(c.width-t.width)/2:0,x=c&&c.height&&c.height>t.height?(c.height-t.height)/2:0,y=t.dataUrl,z=t.imagesInfo,A=20;if(o.width=u+2*A,o.height=v+2*A,r){return e({url:r[1]}).then(function(a){return d(p,p.createPattern(a.element,"repeat")),n()})}return d(p,s.toString()),n()}var i=b.r(19),j=b.r(14),k=b.r(27),l=window.URL||window.webkitURL||window;j.registerProtocol("png",d.exports={fileDescription:"PNG 图片",fileExtension:".png",mineType:"image/png",dataType:"base64",encode:h})}},b[71]={value:function(a,c,d){function e(a,b,c){function d(a,b){var c;try{c=b.getScreenCTM().inverse()}catch(a){throw new Error("Can not inverse source element' ctm.")}return c.multiply(a.getScreenCTM())}function e(a,b){b instanceof Function||(b=function(){});for(var c=[],d=[],e=[],f=0,g=a.length;f<g;f++)switch(a[f]){case"M":case"L":case"T":case"S":case"A":case"C":case"H":case"V":case"Q":e.length&&(d.push(e.join("")),e=[]),","===d[d.length-1]&&d.pop(),d.length&&(b(d),c.push(d.join("")),d=[]),d.push(a[f]);break;case"Z":case"z":d.push(e.join(""),a[f]),b(d),c.push(d.join("")),e=[],d=[];break;case".":case"e":e.push(a[f]);break;case"-":"e"!==a[f-1]&&(e.length&&d.push(e.join(""),","),e=[]),e.push("-");break;case" ":case",":e.length&&(d.push(e.join(""),","),e=[]);break;default:/\d/.test(a[f])?e.push(a[f]):e.length?(d.push(e.join(""),a[f]),e=[]):(","===d[d.length-1]&&d.pop(),d.push(a[f])),f+1===g&&(e.length&&d.push(e.join("")),b(d),c.push(d.join("")),e=null,d=null)}return c.join("")}function f(a,b,c){if(a&&"defs"!==a.tagName){if("transparent"===a.getAttribute("fill")&&a.setAttribute("fill","none"),a.getAttribute("marker-end")&&a.removeAttribute("marker-end"),b=b||0,c=c||0,a.getAttribute("transform")){var g=d(a,a.parentElement);b-=g.e,c-=g.f,a.removeAttribute("transform")}switch(a.tagName.toLowerCase()){case"g":break;case"path":var h=a.getAttribute("d");return void(h&&(h=e(h,function(a){switch(a[0]){case"V":a[1]=+a[1]-c;break;case"H":a[1]=+a[1]-b;break;case"M":case"L":case"T":a[1]=+a[1]-b,a[3]=+a[3]-c;break;case"Q":case"S":a[1]=+a[1]-b,a[3]=+a[3]-c,a[5]=+a[5]-b,a[7]=+a[7]-c;break;case"A":a[11]=+a[11]-b,a[13]=+a[13]-c;break;case"C":a[1]=+a[1]-b,a[3]=+a[3]-c,a[5]=+a[5]-b,a[7]=+a[7]-c,a[9]=+a[9]-b,a[11]=+a[11]-c}}),a.setAttribute("d",h),a.removeAttribute("transform")));case"image":case"text":if(b&&c){var i=+a.getAttribute("x")||0,j=+a.getAttribute("y")||0;a.setAttribute("x",i-b),a.setAttribute("y",j-c)}return a.getAttribute("dominant-baseline")&&(a.removeAttribute("dominant-baseline"),a.setAttribute("dy",".8em")),void a.removeAttribute("transform")}if(a.children)for(var k=0,l=a.children.length;k<l;k++)f(a.children[k],b,c)}}a.style.visibility="hidden",f(a,b||0,c||0),a.style.visibility="visible"}b.r(14).registerProtocol("svg",d.exports={fileDescription:"SVG 矢量图",fileExtension:".svg",mineType:"image/svg+xml",dataType:"text",encode:function(a,b){var c,d,f,g=b.getPaper(),h=g.shapeNode.getAttribute("transform"),i=b.getRenderContainer(),j=i.getRenderBox(),k=(i.getTransform(),j.width),l=j.height,m=20;return g.shapeNode.setAttribute("transform","translate(0.5, 0.5)"),c=g.container.innerHTML,g.shapeNode.setAttribute("transform",h),d=document.createElement("div"),document.body.appendChild(d),d.innerHTML=c,f=d.querySelector("svg"),f.setAttribute("width",k+2*m|0),f.setAttribute("height",l+2*m|0),f.setAttribute("style","background: "+b.getStyle("background")),f.setAttribute("viewBox",[0,0,k+2*m|0,l+2*m|0].join(" ")),tempSvgContainer=document.createElement("div"),e(f,j.x-m|0,j.y-m|0),document.body.removeChild(d),tempSvgContainer.appendChild(f),c=tempSvgContainer.innerHTML,c=c.replace(/&nbsp;/g,"&#xa0;")}})}},b[72]={value:function(a,c,d){function e(a,b){for(var c="";b--;)c+=a;return c}function f(a){if(!a)return"";for(var b=[],c=["\\","n"],d=0,e=0,f=a.length;d<f;d++)if("\n"!==a[d]&&"\r"!==a[d])if(a[d]!==c[e]){switch(e){case 0:b.push(a[d]);break;case 1:b.push(a[d-1],a[d])}e=0}else 2===++e&&(e=0,b.push("\\\\n"));else b.push("\\n"),e=0;return b.join("")}function g(a){if(!a)return"";for(var b=[],c=["\\","\\","n"],d=0,e=0,f=a.length;d<f;d++)if(a[d]!==c[e])switch(e){case 0:b.push(a[d]),e=0;break;case 1:"n"===a[d]?b.push("\n"):b.push(a[d-1],a[d]),e=0;break;case 2:b.push(a[d-2]),"\\"!==a[d]&&(e=0,b.push(a[d-1],a[d]))}else 3===++e&&(e=0,b.push("\\n"));return b.join("")}function h(a,b){var c="";return b=b||0,c+=e("\t",b),c+=f(a.data.text)+p,a.children&&a.children.forEach(function(a){c+=h(a,b+1)}),c}function i(a){return!/\S/.test(a)}function j(a){for(var b=0;r.REGEXP.test(a);)a=a.replace(r.REGEXP,""),b++;return b}function k(a){return{data:{text:g(a.replace(r.DELETE,""))}}}function l(a){function b(a,b){(a.children||(a.children=[])).push(b)}for(var c,d,e,f,g={},h=a.split(q),l=0;l<h.length;l++)if(d=h[l],!i(d)){if(e=j(d),f=k(d),0===e){if(c)throw new Error("Invalid local format");c=f}else{if(!g[e-1])throw new Error("Invalid local format");b(g[e-1],f)}g[e]=f}return c}function m(a){function b(a){var c={};c.data=a.getData();var d=a.getChildren();c.children=[];for(var e=0;e<d.length;e++)c.children.push(b(d[e]));return c}if(a)return/^\s*$/.test(a.data.text)&&(a.data.text="分支主题"),h(b(a))}var n=b.r(14),o=b.r(19).Browser,p="\r",q=/\r\n|\r|\n/,r=function(a){return a.gecko?{REGEXP:new RegExp("^(\t|"+String.fromCharCode(160,160,32,160)+")"),DELETE:new RegExp("^(\t|"+String.fromCharCode(160,160,32,160)+")+")}:a.ie||a.edge?{REGEXP:new RegExp("^("+String.fromCharCode(32)+"|"+String.fromCharCode(160)+")"),DELETE:new RegExp("^("+String.fromCharCode(32)+"|"+String.fromCharCode(160)+")+")}:{REGEXP:/^(\t|\x20{4})/,DELETE:/^(\t|\x20{4})+/}}(o);n.registerProtocol("text",d.exports={fileDescription:"大纲文本",fileExtension:".txt",dataType:"text",mineType:"text/plain",encode:function(a){return h(a.root,0)},decode:function(a){return l(a)},Node2Text:function(a){return m(a)}})}},b[73]={value:function(a,c,d){b.r(33).register("default",{getLayout:function(a){if(a.getData("layout"))return a.getData("layout");var b=a.getLevel();return 0===b?"mind":1===b?a.getLayoutPointPreview().x>0?"right":"left":a.parent.getLayout()},getConnect:function(a){return 1==a.getLevel()?"arc":"under"}})}},b[74]={value:function(a,c,d){b.r(33).register("filetree",{getLayout:function(a){return a.getData("layout")?a.getData("layout"):a.isRoot()?"bottom":"filetree-down"},getConnect:function(a){return 1==a.getLevel()?"poly":"l"}})}},b[75]={value:function(a,c,d){b.r(33).register("fish-bone",{getLayout:function(a){if(a.getData("layout"))return a.getData("layout");var b=a.getLevel();return 0===b?"fish-bone-master":1===b?"fish-bone-slave":a.getLayoutPointPreview().y>0?"filetree-up":"filetree-down"},getConnect:function(a){switch(a.getLevel()){case 1:return"fish-bone-master";case 2:return"line";default:return"l"}}})}},b[76]={value:function(a,c,d){b.r(33).register("right",{getLayout:function(a){return a.getData("layout")||"right"},getConnect:function(a){return 1==a.getLevel()?"arc":"bezier"}})}},b[77]={value:function(a,c,d){b.r(33).register("structure",{getLayout:function(a){return a.getData("layout")||"bottom"},getConnect:function(a){return"poly"}})}},b[78]={value:function(a,c,d){b.r(33).register("tianpan",{getLayout:function(a){return a.getData("layout")?a.getData("layout"):0===a.getLevel()?"tianpan":a.parent.getLayout()},getConnect:function(a){return"arc_tp"}})}},b[79]={value:function(a,c,d){var e=b.r(34);["classic","classic-compact"].forEach(function(a){var b="classic-compact"==a;e.register(a,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":b?[10,25]:[15,25],"root-margin":b?[15,25]:[30,100],"root-radius":30,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":b?[5,15]:[6,20],"main-margin":b?[5,10]:20,"main-radius":10,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"white","sub-background":"transparent","sub-stroke":"none","sub-font-size":12,"sub-padding":[5,10],"sub-margin":b?[5,10]:[15,20],"sub-tree-margin":30,"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})})}},b[80]={value:function(a,c,d){b.r(34).register("fish",{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":[35,35],"root-margin":30,"root-radius":100,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":[6,20],"main-margin":[20,20],"main-radius":5,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"black","sub-background":"white","sub-stroke":"white","sub-font-size":12,"sub-padding":[5,10],"sub-margin":[10],"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":3,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})}},b[81]={value:function(a,c,d){function e(a,b,c){return h.Color.createHSL(a,b,c)}function f(a,b){return{background:"#fbfbfb","root-color":"white","root-background":e(a,37,60),"root-stroke":e(a,37,60),"root-font-size":16,"root-padding":b?[6,12]:[12,24],"root-margin":b?10:[30,100],"root-radius":5,"root-space":10,"main-color":"black","main-background":e(a,33,95),"main-stroke":e(a,37,60),"main-stroke-width":1,"main-font-size":14,"main-padding":[6,20],"main-margin":b?8:20,"main-radius":3,"main-space":5,"sub-color":"black","sub-background":"transparent","sub-stroke":"none","sub-font-size":12,"sub-padding":b?[3,5]:[5,10],"sub-margin":b?[4,8]:[15,20],"sub-radius":5,"sub-space":5,"connect-color":e(a,37,60),"connect-width":1,"connect-radius":5,"selected-stroke":e(a,26,30),"selected-stroke-width":"3","blur-selected-stroke":e(a,10,60),"marquee-background":e(a,100,80).set("a",.1),"marquee-stroke":e(a,37,60),"drop-hint-color":e(a,26,35),"drop-hint-width":5,"order-hint-area-color":e(a,100,30).set("a",.5),"order-hint-path-color":e(a,100,25),"order-hint-path-width":1,"text-selection-color":e(a,100,20),"line-height":1.5}}var g,h=b.r(19),i=b.r(34),j={red:0,soil:25,green:122,blue:204,purple:246,pink:334};for(g in j)i.register("fresh-"+g,f(j[g])),i.register("fresh-"+g+"-compat",f(j[g],!0))}},b[82]={value:function(a,c,d){var e=b.r(34);["snow","snow-compact"].forEach(function(a){var b="snow-compact"==a;e.register(a,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":24,"root-padding":b?[5,10]:[15,25],"root-margin":b?15:30,"root-radius":5,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":16,"main-padding":b?[4,10]:[6,20],"main-margin":b?[5,10]:[20,40],"main-radius":5,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","sub-color":"black","sub-background":"white","sub-stroke":"white","sub-font-size":12,"sub-padding":[5,10],"sub-margin":b?[5,10]:[10,20],"sub-radius":5,"sub-space":5,"connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})})}},b[83]={value:function(a,c,d){var e=b.r(34);["tianpan","tianpan-compact"].forEach(function(a){var b="tianpan-compact"==a;e.register(a,{background:'#3A4144 url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAIAAAACDbGyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowQzg5QTQ0NDhENzgxMUUzOENGREE4QTg0RDgzRTZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowQzg5QTQ0NThENzgxMUUzOENGREE4QTg0RDgzRTZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkMwOEQ1NDRGOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkMwOEQ1NDUwOEQ3NzExRTM4Q0ZEQThBODREODNFNkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+e9P33AAAACVJREFUeNpisXJ0YUACTAyoAMr/+eM7EGGRZ4FQ7BycEAZAgAEAHbEGtkoQm/wAAAAASUVORK5CYII=") repeat',"root-color":"#430","root-background":"#e9df98","root-stroke":"#e9df98","root-font-size":25,"root-padding":b?15:20,"root-margin":b?[15,25]:100,"root-radius":30,"root-space":10,"root-shadow":"rgba(0, 0, 0, .25)","root-shape":"circle","main-color":"#333","main-background":"#a4c5c0","main-stroke":"#a4c5c0","main-font-size":15,"main-padding":b?10:12,"main-margin":b?10:12,"main-radius":10,"main-space":5,"main-shadow":"rgba(0, 0, 0, .25)","main-shape":"circle","sub-color":"#333","sub-background":"#99ca6a","sub-stroke":"#a4c5c0","sub-font-size":13,"sub-padding":5,"sub-margin":b?6:10,"sub-tree-margin":30,"sub-radius":5,"sub-space":5,"sub-shadow":"rgba(0, 0, 0, .25)","sub-shape":"circle","connect-color":"white","connect-width":2,"main-connect-width":3,"connect-radius":5,"selected-background":"rgb(254, 219, 0)","selected-stroke":"rgb(254, 219, 0)","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.4})})}},b[84]={value:function(a,c,d){b.r(34).register("wire",{background:"black",color:"#999",stroke:"none",padding:10,margin:20,"font-size":14,"connect-color":"#999","connect-width":1,"selected-background":"#999","selected-color":"black","marquee-background":"rgba(255,255,255,.3)","marquee-stroke":"white","drop-hint-color":"yellow","sub-drop-hint-width":2,"main-drop-hint-width":4,"root-drop-hint-width":4,"order-hint-area-color":"rgba(0, 255, 0, .5)","order-hint-path-color":"#0f0","order-hint-path-width":1,"text-selection-color":"rgb(27,171,255)","line-height":1.5})}};var c={"expose-kityminder":36};a("expose-kityminder")}();